a64d8103a62445fe9a5c5cb431c86495
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactNative = require("react-native");

var _tweener = _interopRequireDefault(require("./tweener"));

var deviceScreen = _reactNative.Dimensions.get('window');

var DOUBLE_TAP_INTERVAL = 500;
var TAP_DURATION = 250;
var propsWhomRequireUpdate = ['closedDrawerOffset', 'openDrawerOffset', 'type', 'styles'];

var Drawer = function (_Component) {
  (0, _inherits2["default"])(Drawer, _Component);

  function Drawer() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2["default"])(this, Drawer);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(Drawer)).call.apply(_getPrototypeOf2, [this].concat(args)));
    _this._length = 0;
    _this._prevLength = 0;
    _this._offsetOpen = 0;
    _this._offsetClosed = 0;
    _this._open = false;
    _this._panning = false;
    _this._tweenPending = false;
    _this._activeTween = null;
    _this._lastPress = 0;
    _this._panStartTime = 0;
    _this._syncAfterUpdate = false;
    _this._interactionHandle = null;
    _this.state = {
      viewport: deviceScreen
    };

    _this.getChildContext = function () {
      return {
        drawer: (0, _assertThisInitialized2["default"])(_this)
      };
    };

    _this.initialize = function (props) {
      var fullLength = _this.getDeviceLength();

      _this._offsetClosed = _this.getClosedOffset(props, _this.state.viewport);
      _this._offsetOpen = _this.getOpenOffset(props, _this.state.viewport);
      _this._prevLength = _this._length;
      var styles = {
        container: {
          flex: 1,
          justifyContent: 'center',
          alignItems: 'center'
        }
      };
      styles.main = (0, _extends2["default"])({
        position: 'absolute',
        borderWidth: 0
      }, _this.isLeftOrRightSide() ? {
        top: 0
      } : {
        left: 0
      }, _this.props.styles.main);
      styles.drawer = (0, _extends2["default"])({
        position: 'absolute',
        borderWidth: 0
      }, _this.isLeftOrRightSide() ? {
        top: 0
      } : {
        left: 0
      }, _this.props.styles.drawer);

      if (props.initializeOpen || props.open) {
        _this._open = true;
        _this._length = fullLength - _this._offsetOpen;
        styles.main[_this.props.side] = 0;
        styles.drawer[_this.props.side] = 0;
        if (props.type === 'static') styles.main[_this.props.side] = fullLength - _this._offsetOpen;
        if (props.type === 'displace') styles.main[_this.props.side] = fullLength - _this._offsetOpen;
      } else {
        _this._open = false;
        _this._length = _this._offsetClosed;
        styles.main[_this.props.side] = _this._offsetClosed;
        if (props.type === 'static') styles.drawer[_this.props.side] = 0;
        if (props.type === 'overlay') styles.drawer[_this.props.side] = _this._offsetClosed + _this._offsetOpen - fullLength;
        if (props.type === 'displace') styles.drawer[_this.props.side] = -fullLength + _this._offsetClosed + _this._offsetOpen;
      }

      if (_this.main) {
        _this.drawer.setNativeProps({
          style: {
            left: styles.drawer.left
          }
        });

        _this.main.setNativeProps({
          style: {
            left: styles.main.left
          }
        });
      } else {
        _this.stylesheet = _reactNative.StyleSheet.create(styles);
        _this.responder = _reactNative.PanResponder.create({
          onStartShouldSetPanResponder: _this.onStartShouldSetPanResponder,
          onStartShouldSetPanResponderCapture: _this.onStartShouldSetPanResponderCapture,
          onMoveShouldSetPanResponder: _this.onMoveShouldSetPanResponder,
          onMoveShouldSetPanResponderCapture: _this.onMoveShouldSetPanResponderCapture,
          onPanResponderMove: _this.onPanResponderMove,
          onPanResponderRelease: _this.onPanResponderRelease,
          onPanResponderTerminate: _this.onPanResponderTerminate
        });
      }

      _this.resync(null, props);
    };

    _this.updatePosition = function () {
      var mainProps = {};
      var drawerProps = {};

      var ratio = (_this._length - _this._offsetClosed) / (_this.getOpenLength() - _this._offsetClosed);

      switch (_this.props.type) {
        case 'overlay':
          drawerProps[_this.props.side] = -_this.getDeviceLength() + _this._offsetOpen + _this._length;
          mainProps[_this.props.side] = _this._offsetClosed;
          break;

        case 'static':
          mainProps[_this.props.side] = _this._length;
          drawerProps[_this.props.side] = 0;
          break;

        case 'displace':
          mainProps[_this.props.side] = _this._length;
          drawerProps[_this.props.side] = -_this.getDeviceLength() + _this._length + _this._offsetOpen;
          break;
      }

      var mainOverlayProps = null;
      var drawerOverlayProps = null;

      if (_this.props.tweenHandler) {
        var propsFrag = _this.props.tweenHandler(ratio, _this.props.side);

        mainProps = (0, _extends2["default"])(mainProps, propsFrag.main);
        drawerProps = (0, _extends2["default"])(drawerProps, propsFrag.drawer);
        mainOverlayProps = propsFrag.mainOverlay;
        drawerOverlayProps = propsFrag.drawerOverlay;
      }

      if (_this.main && _this.drawer && _this.mainOverlay && _this.drawerOverlay) {
        _this.drawer.setNativeProps({
          style: drawerProps
        });

        _this.main.setNativeProps({
          style: mainProps
        });

        if (mainOverlayProps) _this.mainOverlay.setNativeProps({
          style: mainOverlayProps
        });
        if (drawerOverlayProps) _this.drawerOverlay.setNativeProps({
          style: drawerOverlayProps
        });
      }
    };

    _this.onPanResponderTerminate = function (e, gestureState) {
      _this._panning = false;
      _this.shouldOpenDrawer(_this.getGestureDelta(gestureState)) ? _this.open() : _this.close();
    };

    _this.onStartShouldSetPanResponderCapture = function (e, gestureState) {
      if (_this.shouldCaptureGestures()) return _this.processShouldSet(e, gestureState);
      return false;
    };

    _this.onStartShouldSetPanResponder = function (e, gestureState) {
      if (!_this.shouldCaptureGestures()) return _this.processShouldSet(e, gestureState);
      return false;
    };

    _this.onMoveShouldSetPanResponderCapture = function (e, gestureState) {
      if (_this.shouldCaptureGestures() && _this.props.negotiatePan) return _this.processMoveShouldSet(e, gestureState);
      return false;
    };

    _this.onMoveShouldSetPanResponder = function (e, gestureState) {
      if (!_this.shouldCaptureGestures() && _this.props.negotiatePan) return _this.processMoveShouldSet(e, gestureState);
      return false;
    };

    _this.onPanResponderMove = function (e, gestureState) {
      var delta = _this.getGestureDelta(gestureState);

      if (!_this.props.acceptPan) return false;
      if (_this._open ^ delta < 0 ^ _this.isRightOrBottomSide()) return false;
      delta = _this.isRightOrBottomSide() ? delta * -1 : delta;
      var length = _this._prevLength + delta;
      length = Math.min(length, _this.getOpenLength());
      length = Math.max(length, _this.getClosedLength());
      length = Math.round(length * 2) / 2;
      _this._length = length;

      _this.updatePosition();

      if (!_this._panning) {
        _this.props.onDragStart && _this.props.onDragStart();
      }

      _this._panning = true;
    };

    _this.onPanResponderRelease = function (e, gestureState) {
      var delta = _this.getGestureDelta(gestureState);

      _this._panning = false;
      if (Date.now() - _this._panStartTime < TAP_DURATION) _this.processTapGestures();
      if (Math.abs(delta) < 50 && _this._activeTween) return;
      _this.shouldOpenDrawer(delta) ? _this.open() : _this.close();

      _this.updatePosition();

      _this._prevLength = _this._length;
    };

    _this.processShouldSet = function (e, gestureState) {
      var inMask = _this.testPanResponderMask(e, gestureState);

      if (!inMask) return false;
      if (!_this._open && Math.abs(gestureState.dy) >= Math.abs(gestureState.dx)) return false;
      _this._panStartTime = Date.now();
      if (inMask && _this.shouldCaptureGestures()) return true;
      if (_this.props.negotiatePan) return false;
      if (!_this.props.acceptPan) return false;

      _this.terminateActiveTween();

      return true;
    };

    _this.processMoveShouldSet = function (e, gestureState) {
      var inMask = _this.testPanResponderMask(e, gestureState);

      if (!inMask && (!_this.props.acceptPanOnDrawer || _this._open === false)) return false;
      if (!_this.props.acceptPan) return false;
      if (!_this.props.negotiatePan || _this.props.disabled || !_this.props.acceptPan || _this._panning) return false;

      var delta = _this.getGestureDelta(gestureState);

      var deltaOppositeAxis = _this.getGestureDeltaOppositeAxis(gestureState);

      var swipeToLeftOrTop = delta < 0 ? true : false;
      var swipeToRightOrBottom = delta > 0 ? true : false;
      var swipeOppositeAxis = Math.abs(deltaOppositeAxis) >= Math.abs(delta) ? true : false;
      var swipeInCloseDirection = _this.isLeftOrTopSide() ? swipeToLeftOrTop : swipeToRightOrBottom;

      if (swipeOppositeAxis || _this._open && !swipeInCloseDirection || !_this._open && swipeInCloseDirection) {
        return false;
      }

      _this.terminateActiveTween();

      return true;
    };

    _this.processTapGestures = function () {
      if (_this._activeTween) return false;

      if (_this.props.acceptTap || _this.props.tapToClose && _this._open) {
        _this._open ? _this.close() : _this.open();
        return true;
      }

      if (_this.props.acceptDoubleTap) {
        var now = new Date().getTime();
        var timeDelta = now - _this._lastPress;
        _this._lastPress = now;

        if (timeDelta < DOUBLE_TAP_INTERVAL) {
          _this._open ? _this.close() : _this.open();
          return true;
        }
      }

      return false;
    };

    _this.testPanResponderMask = function (e, gestureState) {
      if (_this.props.disabled) return false;
      if (_this.context.drawer && _this.context.drawer._open) return false;
      if (_this._childDrawer && _this._childDrawer._open) return false;
      var pos0 = _this.isLeftOrRightSide() ? e.nativeEvent.pageX : e.nativeEvent.pageY;
      var deltaOpen = _this.isLeftOrTopSide() ? _this.getDeviceLength() - pos0 : pos0;
      var deltaClose = _this.isLeftOrTopSide() ? pos0 : _this.getDeviceLength() - pos0;
      if (_this._open && deltaOpen > _this.getOpenMask()) return false;
      if (!_this._open && deltaClose > _this.getClosedMask()) return false;
      return true;
    };

    _this.terminateActiveTween = function () {
      if (_this._activeTween) {
        _this._activeTween.terminate();

        _this._activeTween = null;
      }
    };

    _this.open = function (type, cb) {
      var start = _this._length;

      var end = _this.getOpenLength();

      if (_this._activeTween) return;
      if (type !== 'force' && start - end === 0 && _this._open === true) return;
      _this.props.onOpenStart && _this.props.onOpenStart();

      _this.setInteractionHandle();

      _this._activeTween = (0, _tweener["default"])({
        start: _this._length,
        end: _this.getOpenLength(),
        duration: _this.props.tweenDuration,
        easingType: _this.props.tweenEasing,
        onFrame: function onFrame(tweenValue) {
          _this._length = Math.round(tweenValue * 2) / 2;

          _this.updatePosition();
        },
        onEnd: function onEnd() {
          _this._activeTween = null;
          _this._open = true;
          _this._prevLength = _this._length;

          _this.adjustForCaptureGestures();

          _this.props.onOpen();

          _this.clearInteractionHandle();

          if (typeof type === 'function') {
            type();
          } else cb && cb();
        }
      });
    };

    _this.close = function (type, cb) {
      var start = _this._length;

      var end = _this.getClosedLength();

      if (_this._activeTween) return;
      if (type !== 'force' && start - end === 0 && _this._open === false) return;
      _this.props.onCloseStart && _this.props.onCloseStart();

      _this.setInteractionHandle();

      _this._activeTween = (0, _tweener["default"])({
        start: start,
        end: end,
        easingType: _this.props.tweenEasing,
        duration: _this.props.tweenDuration,
        onFrame: function onFrame(tweenValue) {
          _this._length = Math.round(tweenValue * 2) / 2;

          _this.updatePosition();
        },
        onEnd: function onEnd() {
          _this._activeTween = null;
          _this._open = false;
          _this._prevLength = _this._length;

          _this.adjustForCaptureGestures();

          _this.props.onClose();

          _this.clearInteractionHandle();

          if (typeof type === 'function') {
            type();
          } else cb && cb();
        }
      });
    };

    _this.toggle = function () {
      _this._open ? _this.close() : _this.open();
    };

    _this.handleSetViewport = function (e) {
      var viewport = e.nativeEvent.layout;
      var oldViewport = _this.state.viewport;
      if (viewport.width === oldViewport.width && viewport.height === oldViewport.height) return;
      var didRotationChange = viewport.width !== oldViewport.width;

      _this.resync(viewport, null, didRotationChange);
    };

    _this.resync = function (viewport, props, didRotationChange) {
      if (didRotationChange) _this._syncAfterUpdate = true;
      viewport = viewport || _this.state.viewport;
      props = props || _this.props;
      _this._offsetClosed = _this.getClosedOffset(props, viewport);
      _this._offsetOpen = _this.getOpenOffset(props, viewport);

      _this.setState({
        viewport: viewport
      });
    };

    _this.requiresResync = function (nextProps) {
      for (var i = 0; i < propsWhomRequireUpdate.length; i++) {
        var key = propsWhomRequireUpdate[i];
        if (_this.props[key] !== nextProps[key]) return true;
      }
    };

    _this.getDeviceLength = function () {
      var viewport = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.viewport;
      return _this.isLeftOrRightSide() ? viewport.width : viewport.height;
    };

    _this.getOpenLength = function () {
      return _this.getDeviceLength() - _this._offsetOpen;
    };

    _this.getClosedLength = function () {
      return _this._offsetClosed;
    };

    _this.getMainWidth = function () {
      var viewport = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.viewport;
      return _this.isLeftOrRightSide() ? viewport.width - _this._offsetClosed : viewport.width;
    };

    _this.getMainHeight = function () {
      var viewport = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.viewport;
      return _this.isTopOrBottomSide() ? viewport.height - _this._offsetClosed : viewport.height;
    };

    _this.getDrawerWidth = function () {
      var viewport = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.viewport;
      return _this.isLeftOrRightSide() ? viewport.width - _this._offsetOpen : viewport.width;
    };

    _this.getDrawerHeight = function () {
      var viewport = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.viewport;
      return _this.isTopOrBottomSide() ? viewport.height - _this._offsetOpen : viewport.height;
    };

    _this.getOpenMask = function () {
      var viewport = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.viewport;
      if (_this.props.panCloseMask && _this.props.panCloseMask % 1 === 0) return _this.props.panCloseMask;
      if (_this.props.panCloseMask) return _this.getDeviceLength(viewport) * _this.props.panCloseMask;
      return Math.max(0.05, _this._offsetOpen);
    };

    _this.getClosedMask = function () {
      if (_this.props.panOpenMask && _this.props.panOpenMask % 1 === 0) return _this.props.panOpenMask;
      if (_this.props.panOpenMask) return _this.getDeviceLength() * _this.props.panOpenMask;
      return Math.max(0.05, _this._offsetClosed);
    };

    _this.getOpenOffset = function (props, viewport) {
      if (typeof props.openDrawerOffset === 'function') return props.openDrawerOffset(viewport);
      return props.openDrawerOffset > 1 || props.openDrawerOffset < 0 ? props.openDrawerOffset : props.openDrawerOffset * _this.getDeviceLength(viewport);
    };

    _this.getClosedOffset = function (props, viewport) {
      if (typeof props.closedDrawerOffset === 'function') return props.closedDrawerOffset(viewport);
      return props.closedDrawerOffset > 1 || props.closedDrawerOffset < 0 ? props.closedDrawerOffset : props.closedDrawerOffset * _this.getDeviceLength(viewport);
    };

    _this.getGestureDelta = function (gestureState) {
      return _this.isLeftOrRightSide() ? gestureState.dx : gestureState.dy;
    };

    _this.getGestureDeltaOppositeAxis = function (gestureState) {
      return _this.isLeftOrRightSide() ? gestureState.dy : gestureState.dx;
    };

    _this.isLeftOrRightSide = function () {
      if (_reactNative.I18nManager.isRTL) {
        return ["right", "left"].includes(_this.props.side);
      } else {
        return ["left", "right"].includes(_this.props.side);
      }
    };

    _this.isTopOrBottomSide = function () {
      return ["top", "bottom"].includes(_this.props.side);
    };

    _this.isLeftOrTopSide = function () {
      var side = "left";

      if (_reactNative.I18nManager.isRTL) {
        side = "right";
      }

      return [side, "top"].includes(_this.props.side);
    };

    _this.isRightOrBottomSide = function () {
      var side = "right";

      if (_reactNative.I18nManager.isRTL) {
        side = "left";
      }

      return [side, "bottom"].includes(_this.props.side);
    };

    return _this;
  }

  (0, _createClass2["default"])(Drawer, [{
    key: "_registerChildDrawer",
    value: function _registerChildDrawer(drawer) {
      this._childDrawer = drawer;
    }
  }, {
    key: "componentWillMount",
    value: function componentWillMount() {
      if (this.context.drawer) this.context.drawer._registerChildDrawer(this);
      if (this.props.openDrawerThreshold && process.env.NODE_ENV !== 'production') console.error('react-native-drawer: openDrawerThreshold is obsolete. Use panThreshold instead.');
      if (this.props.panStartCompensation && process.env.NODE_ENV !== 'production') console.error('react-native-drawer: panStartCompensation is deprecated.');
      if (this.props.relativeDrag && process.env.NODE_ENV !== 'production') console.error('react-native-drawer: relativeDrag is deprecated.');
      this.initialize(this.props);
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      if (this.requiresResync(nextProps)) this.resync(null, nextProps);

      if (nextProps.open !== null && this._open !== nextProps.open) {
        this._syncAfterUpdate = true;
        this._open = nextProps.open;
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      if (this._syncAfterUpdate) {
        this._syncAfterUpdate = false;
        this._open ? this.open('force') : this.close('force');
      }
    }
  }, {
    key: "shouldOpenDrawer",
    value: function shouldOpenDrawer(delta) {
      var hasActiveHeading = this._open ^ delta > 0 ^ this.isRightOrBottomSide();
      if (!hasActiveHeading) return this._open;else return this._open ^ Math.abs(delta) > this.getDeviceLength() * this.props.panThreshold;
    }
  }, {
    key: "shouldCaptureGestures",
    value: function shouldCaptureGestures() {
      if (this.props.captureGestures === true) return true;
      if (this.props.captureGestures === 'closed' && this._open === false) return true;
      if (this.props.captureGestures === 'open' && this._open === true) return true;
      return false;
    }
  }, {
    key: "adjustForCaptureGestures",
    value: function adjustForCaptureGestures() {
      if (!this.props.captureGestures) return;
      var shouldCapture = this.shouldCaptureGestures();

      if (this.mainOverlay && this.drawerOverlay) {
        this.mainOverlay.setNativeProps({
          pointerEvents: shouldCapture && this._open ? 'auto' : 'none'
        });
        this.drawerOverlay.setNativeProps({
          pointerEvents: shouldCapture && !this._open ? 'auto' : 'none'
        });
      }
    }
  }, {
    key: "setInteractionHandle",
    value: function setInteractionHandle() {
      if (this._interactionHandle) _reactNative.InteractionManager.clearInteractionHandle(this._interactionHandle);
      if (this.props.useInteractionManager) this._interactionHandle = _reactNative.InteractionManager.createInteractionHandle();
    }
  }, {
    key: "clearInteractionHandle",
    value: function clearInteractionHandle() {
      if (this._interactionHandle) _reactNative.InteractionManager.clearInteractionHandle(this._interactionHandle);
    }
  }, {
    key: "render",
    value: function render() {
      var first = this.props.type === 'overlay' ? this.renderMain() : this.renderDrawer();
      var second = this.props.type === 'overlay' ? this.renderDrawer() : this.renderMain();
      return _react["default"].createElement(_reactNative.View, {
        key: "drawerContainer",
        onLayout: this.handleSetViewport,
        style: this.stylesheet.container
      }, first, second);
    }
  }, {
    key: "renderMain",
    value: function renderMain() {
      var _this2 = this;

      return _react["default"].createElement(_reactNative.View, (0, _extends2["default"])({}, this.responder.panHandlers, {
        key: "main",
        ref: function ref(c) {
          return _this2.main = c;
        },
        style: [this.stylesheet.main, {
          height: this.getMainHeight(),
          width: this.getMainWidth()
        }]
      }), this.props.children, _react["default"].createElement(_reactNative.View, {
        pointerEvents: this._open && this.shouldCaptureGestures() ? 'auto' : 'none',
        ref: function ref(c) {
          return _this2.mainOverlay = c;
        },
        style: [styles.overlay, this.props.styles && this.props.styles.mainOverlay]
      }));
    }
  }, {
    key: "renderDrawer",
    value: function renderDrawer() {
      var _this3 = this;

      return _react["default"].createElement(_reactNative.View, (0, _extends2["default"])({}, this.responder.panHandlers, {
        key: "drawer",
        ref: function ref(c) {
          return _this3.drawer = c;
        },
        elevation: this.props.elevation,
        style: [this.stylesheet.drawer, {
          height: this.getDrawerHeight(),
          width: this.getDrawerWidth()
        }]
      }), this.props.content, _react["default"].createElement(_reactNative.View, {
        pointerEvents: !this._open && this.shouldCaptureGestures() ? 'auto' : 'none',
        ref: function ref(c) {
          return _this3.drawerOverlay = c;
        },
        style: [styles.overlay, this.props.styles && this.props.styles.drawerOverlay]
      }));
    }
  }]);
  return Drawer;
}(_react.Component);

exports["default"] = Drawer;
Drawer.tweenPresets = {
  parallax: function parallax(ratio) {
    var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'left';
    var drawer = (0, _defineProperty2["default"])({}, side, -150 * (1 - ratio));
    return {
      drawer: drawer
    };
  }
};
Drawer.propTypes = {
  acceptDoubleTap: _propTypes["default"].bool,
  acceptPan: _propTypes["default"].bool,
  acceptTap: _propTypes["default"].bool,
  acceptPanOnDrawer: _propTypes["default"].bool,
  captureGestures: _propTypes["default"].oneOf([true, false, 'open', 'closed']),
  children: _propTypes["default"].node,
  closedDrawerOffset: _propTypes["default"].oneOfType([_propTypes["default"].number, _propTypes["default"].func]),
  content: _propTypes["default"].node,
  disabled: _propTypes["default"].bool,
  elevation: _propTypes["default"].number,
  initializeOpen: _propTypes["default"].bool,
  open: _propTypes["default"].bool,
  negotiatePan: _propTypes["default"].bool,
  onClose: _propTypes["default"].func,
  onCloseStart: _propTypes["default"].func,
  onOpen: _propTypes["default"].func,
  onOpenStart: _propTypes["default"].func,
  onDragStart: _propTypes["default"].func,
  openDrawerOffset: _propTypes["default"].oneOfType([_propTypes["default"].number, _propTypes["default"].func]),
  panThreshold: _propTypes["default"].number,
  panCloseMask: _propTypes["default"].number,
  panOpenMask: _propTypes["default"].number,
  side: _propTypes["default"].oneOf(['left', 'right', 'top', 'bottom']),
  styles: _propTypes["default"].object,
  tapToClose: _propTypes["default"].bool,
  tweenDuration: _propTypes["default"].number,
  tweenEasing: _propTypes["default"].string,
  tweenHandler: _propTypes["default"].func,
  type: _propTypes["default"].oneOf(['overlay', 'static', 'displace']),
  useInteractionManager: _propTypes["default"].bool,
  panStartCompensation: _propTypes["default"].bool,
  openDrawerThreshold: _propTypes["default"].any
};
Drawer.defaultProps = {
  open: null,
  initializeOpen: false,
  type: 'displace',
  closedDrawerOffset: 0,
  openDrawerOffset: 0,
  panThreshold: 0.25,
  panOpenMask: null,
  panCloseMask: null,
  tweenHandler: null,
  tweenDuration: 250,
  tweenEasing: 'linear',
  disabled: false,
  negotiatePan: false,
  captureGestures: 'open',
  acceptDoubleTap: false,
  acceptTap: false,
  acceptPan: true,
  acceptPanOnDrawer: true,
  tapToClose: false,
  styles: {},
  elevation: 0,
  onOpen: function onOpen() {},
  onClose: function onClose() {},
  side: 'left',
  useInteractionManager: false
};
Drawer.contextTypes = {
  drawer: _propTypes["default"].object
};
Drawer.childContextTypes = {
  drawer: _propTypes["default"].object
};

var styles = _reactNative.StyleSheet.create({
  overlay: {
    right: 0,
    left: 0,
    top: 0,
    bottom: 0,
    position: 'absolute',
    backgroundColor: 'transparent'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRldmljZVNjcmVlbiIsIkRpbWVuc2lvbnMiLCJnZXQiLCJET1VCTEVfVEFQX0lOVEVSVkFMIiwiVEFQX0RVUkFUSU9OIiwicHJvcHNXaG9tUmVxdWlyZVVwZGF0ZSIsIkRyYXdlciIsIl9sZW5ndGgiLCJfcHJldkxlbmd0aCIsIl9vZmZzZXRPcGVuIiwiX29mZnNldENsb3NlZCIsIl9vcGVuIiwiX3Bhbm5pbmciLCJfdHdlZW5QZW5kaW5nIiwiX2FjdGl2ZVR3ZWVuIiwiX2xhc3RQcmVzcyIsIl9wYW5TdGFydFRpbWUiLCJfc3luY0FmdGVyVXBkYXRlIiwiX2ludGVyYWN0aW9uSGFuZGxlIiwic3RhdGUiLCJ2aWV3cG9ydCIsImdldENoaWxkQ29udGV4dCIsImRyYXdlciIsImluaXRpYWxpemUiLCJwcm9wcyIsImZ1bGxMZW5ndGgiLCJnZXREZXZpY2VMZW5ndGgiLCJnZXRDbG9zZWRPZmZzZXQiLCJnZXRPcGVuT2Zmc2V0Iiwic3R5bGVzIiwiY29udGFpbmVyIiwiZmxleCIsImp1c3RpZnlDb250ZW50IiwiYWxpZ25JdGVtcyIsIm1haW4iLCJwb3NpdGlvbiIsImJvcmRlcldpZHRoIiwiaXNMZWZ0T3JSaWdodFNpZGUiLCJ0b3AiLCJsZWZ0IiwiaW5pdGlhbGl6ZU9wZW4iLCJvcGVuIiwic2lkZSIsInR5cGUiLCJzZXROYXRpdmVQcm9wcyIsInN0eWxlIiwic3R5bGVzaGVldCIsIlN0eWxlU2hlZXQiLCJjcmVhdGUiLCJyZXNwb25kZXIiLCJQYW5SZXNwb25kZXIiLCJvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyIiwib25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmUiLCJvbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXIiLCJvbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXJDYXB0dXJlIiwib25QYW5SZXNwb25kZXJNb3ZlIiwib25QYW5SZXNwb25kZXJSZWxlYXNlIiwib25QYW5SZXNwb25kZXJUZXJtaW5hdGUiLCJyZXN5bmMiLCJ1cGRhdGVQb3NpdGlvbiIsIm1haW5Qcm9wcyIsImRyYXdlclByb3BzIiwicmF0aW8iLCJnZXRPcGVuTGVuZ3RoIiwibWFpbk92ZXJsYXlQcm9wcyIsImRyYXdlck92ZXJsYXlQcm9wcyIsInR3ZWVuSGFuZGxlciIsInByb3BzRnJhZyIsIm1haW5PdmVybGF5IiwiZHJhd2VyT3ZlcmxheSIsImUiLCJnZXN0dXJlU3RhdGUiLCJzaG91bGRPcGVuRHJhd2VyIiwiZ2V0R2VzdHVyZURlbHRhIiwiY2xvc2UiLCJzaG91bGRDYXB0dXJlR2VzdHVyZXMiLCJwcm9jZXNzU2hvdWxkU2V0IiwibmVnb3RpYXRlUGFuIiwicHJvY2Vzc01vdmVTaG91bGRTZXQiLCJkZWx0YSIsImFjY2VwdFBhbiIsImlzUmlnaHRPckJvdHRvbVNpZGUiLCJsZW5ndGgiLCJNYXRoIiwibWluIiwibWF4IiwiZ2V0Q2xvc2VkTGVuZ3RoIiwicm91bmQiLCJvbkRyYWdTdGFydCIsIkRhdGUiLCJub3ciLCJwcm9jZXNzVGFwR2VzdHVyZXMiLCJhYnMiLCJpbk1hc2siLCJ0ZXN0UGFuUmVzcG9uZGVyTWFzayIsImR5IiwiZHgiLCJ0ZXJtaW5hdGVBY3RpdmVUd2VlbiIsImFjY2VwdFBhbk9uRHJhd2VyIiwiZGlzYWJsZWQiLCJkZWx0YU9wcG9zaXRlQXhpcyIsImdldEdlc3R1cmVEZWx0YU9wcG9zaXRlQXhpcyIsInN3aXBlVG9MZWZ0T3JUb3AiLCJzd2lwZVRvUmlnaHRPckJvdHRvbSIsInN3aXBlT3Bwb3NpdGVBeGlzIiwic3dpcGVJbkNsb3NlRGlyZWN0aW9uIiwiaXNMZWZ0T3JUb3BTaWRlIiwiYWNjZXB0VGFwIiwidGFwVG9DbG9zZSIsImFjY2VwdERvdWJsZVRhcCIsImdldFRpbWUiLCJ0aW1lRGVsdGEiLCJjb250ZXh0IiwiX2NoaWxkRHJhd2VyIiwicG9zMCIsIm5hdGl2ZUV2ZW50IiwicGFnZVgiLCJwYWdlWSIsImRlbHRhT3BlbiIsImRlbHRhQ2xvc2UiLCJnZXRPcGVuTWFzayIsImdldENsb3NlZE1hc2siLCJ0ZXJtaW5hdGUiLCJjYiIsInN0YXJ0IiwiZW5kIiwib25PcGVuU3RhcnQiLCJzZXRJbnRlcmFjdGlvbkhhbmRsZSIsImR1cmF0aW9uIiwidHdlZW5EdXJhdGlvbiIsImVhc2luZ1R5cGUiLCJ0d2VlbkVhc2luZyIsIm9uRnJhbWUiLCJ0d2VlblZhbHVlIiwib25FbmQiLCJhZGp1c3RGb3JDYXB0dXJlR2VzdHVyZXMiLCJvbk9wZW4iLCJjbGVhckludGVyYWN0aW9uSGFuZGxlIiwib25DbG9zZVN0YXJ0Iiwib25DbG9zZSIsInRvZ2dsZSIsImhhbmRsZVNldFZpZXdwb3J0IiwibGF5b3V0Iiwib2xkVmlld3BvcnQiLCJ3aWR0aCIsImhlaWdodCIsImRpZFJvdGF0aW9uQ2hhbmdlIiwic2V0U3RhdGUiLCJyZXF1aXJlc1Jlc3luYyIsIm5leHRQcm9wcyIsImkiLCJrZXkiLCJnZXRNYWluV2lkdGgiLCJnZXRNYWluSGVpZ2h0IiwiaXNUb3BPckJvdHRvbVNpZGUiLCJnZXREcmF3ZXJXaWR0aCIsImdldERyYXdlckhlaWdodCIsInBhbkNsb3NlTWFzayIsInBhbk9wZW5NYXNrIiwib3BlbkRyYXdlck9mZnNldCIsImNsb3NlZERyYXdlck9mZnNldCIsIkkxOG5NYW5hZ2VyIiwiaXNSVEwiLCJpbmNsdWRlcyIsIl9yZWdpc3RlckNoaWxkRHJhd2VyIiwib3BlbkRyYXdlclRocmVzaG9sZCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImNvbnNvbGUiLCJlcnJvciIsInBhblN0YXJ0Q29tcGVuc2F0aW9uIiwicmVsYXRpdmVEcmFnIiwiaGFzQWN0aXZlSGVhZGluZyIsInBhblRocmVzaG9sZCIsImNhcHR1cmVHZXN0dXJlcyIsInNob3VsZENhcHR1cmUiLCJwb2ludGVyRXZlbnRzIiwiSW50ZXJhY3Rpb25NYW5hZ2VyIiwidXNlSW50ZXJhY3Rpb25NYW5hZ2VyIiwiY3JlYXRlSW50ZXJhY3Rpb25IYW5kbGUiLCJmaXJzdCIsInJlbmRlck1haW4iLCJyZW5kZXJEcmF3ZXIiLCJzZWNvbmQiLCJwYW5IYW5kbGVycyIsImMiLCJjaGlsZHJlbiIsIm92ZXJsYXkiLCJlbGV2YXRpb24iLCJjb250ZW50IiwiQ29tcG9uZW50IiwidHdlZW5QcmVzZXRzIiwicGFyYWxsYXgiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJib29sIiwib25lT2YiLCJub2RlIiwib25lT2ZUeXBlIiwibnVtYmVyIiwiZnVuYyIsIm9iamVjdCIsInN0cmluZyIsImFueSIsImRlZmF1bHRQcm9wcyIsImNvbnRleHRUeXBlcyIsImNoaWxkQ29udGV4dFR5cGVzIiwicmlnaHQiLCJib3R0b20iLCJiYWNrZ3JvdW5kQ29sb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFFQSxJQUFJQSxZQUFZLEdBQUdDLHdCQUFXQyxHQUFYLENBQWUsUUFBZixDQUFuQjs7QUFDQSxJQUFNQyxtQkFBbUIsR0FBRyxHQUE1QjtBQUNBLElBQU1DLFlBQVksR0FBRyxHQUFyQjtBQUNBLElBQU1DLHNCQUFzQixHQUFHLENBQUMsb0JBQUQsRUFBdUIsa0JBQXZCLEVBQTJDLE1BQTNDLEVBQW1ELFFBQW5ELENBQS9COztJQUVxQkMsTTs7Ozs7Ozs7Ozs7Ozs7O1VBRW5CQyxPLEdBQVUsQztVQUNWQyxXLEdBQWMsQztVQUNkQyxXLEdBQWMsQztVQUNkQyxhLEdBQWdCLEM7VUFDaEJDLEssR0FBUSxLO1VBQ1JDLFEsR0FBVyxLO1VBQ1hDLGEsR0FBZ0IsSztVQUNoQkMsWSxHQUFlLEk7VUFDZkMsVSxHQUFhLEM7VUFDYkMsYSxHQUFnQixDO1VBQ2hCQyxnQixHQUFtQixLO1VBQ25CQyxrQixHQUFxQixJO1VBU3JCQyxLLEdBQVE7QUFDTkMsTUFBQUEsUUFBUSxFQUFFcEI7QUFESixLOztVQTZFUnFCLGUsR0FBa0I7QUFBQSxhQUFPO0FBQUVDLFFBQUFBLE1BQU07QUFBUixPQUFQO0FBQUEsSzs7VUFpQ2xCQyxVLEdBQWEsVUFBQ0MsS0FBRCxFQUFXO0FBQ3RCLFVBQUlDLFVBQVUsR0FBRyxNQUFLQyxlQUFMLEVBQWpCOztBQUNBLFlBQUtoQixhQUFMLEdBQXFCLE1BQUtpQixlQUFMLENBQXFCSCxLQUFyQixFQUE0QixNQUFLTCxLQUFMLENBQVdDLFFBQXZDLENBQXJCO0FBQ0EsWUFBS1gsV0FBTCxHQUFtQixNQUFLbUIsYUFBTCxDQUFtQkosS0FBbkIsRUFBMEIsTUFBS0wsS0FBTCxDQUFXQyxRQUFyQyxDQUFuQjtBQUVBLFlBQUtaLFdBQUwsR0FBbUIsTUFBS0QsT0FBeEI7QUFFQSxVQUFJc0IsTUFBTSxHQUFHO0FBQ1hDLFFBQUFBLFNBQVMsRUFBRTtBQUNUQyxVQUFBQSxJQUFJLEVBQUUsQ0FERztBQUVUQyxVQUFBQSxjQUFjLEVBQUUsUUFGUDtBQUdUQyxVQUFBQSxVQUFVLEVBQUU7QUFISDtBQURBLE9BQWI7QUFRQUosTUFBQUEsTUFBTSxDQUFDSyxJQUFQLEdBQWMsMEJBQWM7QUFDMUJDLFFBQUFBLFFBQVEsRUFBRSxVQURnQjtBQUUxQkMsUUFBQUEsV0FBVyxFQUFFO0FBRmEsT0FBZCxFQUdYLE1BQUtDLGlCQUFMLEtBQTJCO0FBQUNDLFFBQUFBLEdBQUcsRUFBRTtBQUFOLE9BQTNCLEdBQXNDO0FBQUNDLFFBQUFBLElBQUksRUFBRTtBQUFQLE9BSDNCLEVBR3NDLE1BQUtmLEtBQUwsQ0FBV0ssTUFBWCxDQUFrQkssSUFIeEQsQ0FBZDtBQUtBTCxNQUFBQSxNQUFNLENBQUNQLE1BQVAsR0FBZ0IsMEJBQWM7QUFDNUJhLFFBQUFBLFFBQVEsRUFBRSxVQURrQjtBQUU1QkMsUUFBQUEsV0FBVyxFQUFDO0FBRmdCLE9BQWQsRUFHYixNQUFLQyxpQkFBTCxLQUEyQjtBQUFDQyxRQUFBQSxHQUFHLEVBQUU7QUFBTixPQUEzQixHQUFzQztBQUFDQyxRQUFBQSxJQUFJLEVBQUU7QUFBUCxPQUh6QixFQUdvQyxNQUFLZixLQUFMLENBQVdLLE1BQVgsQ0FBa0JQLE1BSHRELENBQWhCOztBQUtBLFVBQUlFLEtBQUssQ0FBQ2dCLGNBQU4sSUFBd0JoQixLQUFLLENBQUNpQixJQUFsQyxFQUF3QztBQUN0QyxjQUFLOUIsS0FBTCxHQUFhLElBQWI7QUFDQSxjQUFLSixPQUFMLEdBQWVrQixVQUFVLEdBQUcsTUFBS2hCLFdBQWpDO0FBQ0FvQixRQUFBQSxNQUFNLENBQUNLLElBQVAsQ0FBWSxNQUFLVixLQUFMLENBQVdrQixJQUF2QixJQUErQixDQUEvQjtBQUNBYixRQUFBQSxNQUFNLENBQUNQLE1BQVAsQ0FBYyxNQUFLRSxLQUFMLENBQVdrQixJQUF6QixJQUFpQyxDQUFqQztBQUNBLFlBQUlsQixLQUFLLENBQUNtQixJQUFOLEtBQWUsUUFBbkIsRUFBNkJkLE1BQU0sQ0FBQ0ssSUFBUCxDQUFZLE1BQUtWLEtBQUwsQ0FBV2tCLElBQXZCLElBQStCakIsVUFBVSxHQUFHLE1BQUtoQixXQUFqRDtBQUM3QixZQUFJZSxLQUFLLENBQUNtQixJQUFOLEtBQWUsVUFBbkIsRUFBK0JkLE1BQU0sQ0FBQ0ssSUFBUCxDQUFZLE1BQUtWLEtBQUwsQ0FBV2tCLElBQXZCLElBQStCakIsVUFBVSxHQUFHLE1BQUtoQixXQUFqRDtBQUNoQyxPQVBELE1BT087QUFDTCxjQUFLRSxLQUFMLEdBQWEsS0FBYjtBQUNBLGNBQUtKLE9BQUwsR0FBZSxNQUFLRyxhQUFwQjtBQUNBbUIsUUFBQUEsTUFBTSxDQUFDSyxJQUFQLENBQVksTUFBS1YsS0FBTCxDQUFXa0IsSUFBdkIsSUFBK0IsTUFBS2hDLGFBQXBDO0FBQ0EsWUFBSWMsS0FBSyxDQUFDbUIsSUFBTixLQUFlLFFBQW5CLEVBQTZCZCxNQUFNLENBQUNQLE1BQVAsQ0FBYyxNQUFLRSxLQUFMLENBQVdrQixJQUF6QixJQUFpQyxDQUFqQztBQUM3QixZQUFJbEIsS0FBSyxDQUFDbUIsSUFBTixLQUFlLFNBQW5CLEVBQThCZCxNQUFNLENBQUNQLE1BQVAsQ0FBYyxNQUFLRSxLQUFMLENBQVdrQixJQUF6QixJQUFpQyxNQUFLaEMsYUFBTCxHQUFxQixNQUFLRCxXQUExQixHQUF3Q2dCLFVBQXpFO0FBQzlCLFlBQUlELEtBQUssQ0FBQ21CLElBQU4sS0FBZSxVQUFuQixFQUErQmQsTUFBTSxDQUFDUCxNQUFQLENBQWMsTUFBS0UsS0FBTCxDQUFXa0IsSUFBekIsSUFBaUMsQ0FBRWpCLFVBQUYsR0FBZSxNQUFLZixhQUFwQixHQUFvQyxNQUFLRCxXQUExRTtBQUNoQzs7QUFFRCxVQUFJLE1BQUt5QixJQUFULEVBQWU7QUFDYixjQUFLWixNQUFMLENBQVlzQixjQUFaLENBQTJCO0FBQUVDLFVBQUFBLEtBQUssRUFBRTtBQUFDTixZQUFBQSxJQUFJLEVBQUVWLE1BQU0sQ0FBQ1AsTUFBUCxDQUFjaUI7QUFBckI7QUFBVCxTQUEzQjs7QUFDQSxjQUFLTCxJQUFMLENBQVVVLGNBQVYsQ0FBeUI7QUFBRUMsVUFBQUEsS0FBSyxFQUFFO0FBQUNOLFlBQUFBLElBQUksRUFBRVYsTUFBTSxDQUFDSyxJQUFQLENBQVlLO0FBQW5CO0FBQVQsU0FBekI7QUFDRCxPQUhELE1BR087QUFDTCxjQUFLTyxVQUFMLEdBQWtCQyx3QkFBV0MsTUFBWCxDQUFrQm5CLE1BQWxCLENBQWxCO0FBQ0EsY0FBS29CLFNBQUwsR0FBaUJDLDBCQUFhRixNQUFiLENBQW9CO0FBQ25DRyxVQUFBQSw0QkFBNEIsRUFBRSxNQUFLQSw0QkFEQTtBQUVuQ0MsVUFBQUEsbUNBQW1DLEVBQUUsTUFBS0EsbUNBRlA7QUFHbkNDLFVBQUFBLDJCQUEyQixFQUFFLE1BQUtBLDJCQUhDO0FBSW5DQyxVQUFBQSxrQ0FBa0MsRUFBRSxNQUFLQSxrQ0FKTjtBQUtuQ0MsVUFBQUEsa0JBQWtCLEVBQUUsTUFBS0Esa0JBTFU7QUFNbkNDLFVBQUFBLHFCQUFxQixFQUFFLE1BQUtBLHFCQU5PO0FBTzFDQyxVQUFBQSx1QkFBdUIsRUFBRSxNQUFLQTtBQVBZLFNBQXBCLENBQWpCO0FBU0Q7O0FBRUQsWUFBS0MsTUFBTCxDQUFZLElBQVosRUFBa0JsQyxLQUFsQjtBQUNELEs7O1VBRURtQyxjLEdBQWlCLFlBQU07QUFDckIsVUFBSUMsU0FBUyxHQUFHLEVBQWhCO0FBQ0EsVUFBSUMsV0FBVyxHQUFHLEVBQWxCOztBQUNBLFVBQUlDLEtBQUssR0FBRyxDQUFDLE1BQUt2RCxPQUFMLEdBQWUsTUFBS0csYUFBckIsS0FBdUMsTUFBS3FELGFBQUwsS0FBdUIsTUFBS3JELGFBQW5FLENBQVo7O0FBRUEsY0FBUSxNQUFLYyxLQUFMLENBQVdtQixJQUFuQjtBQUNFLGFBQUssU0FBTDtBQUNFa0IsVUFBQUEsV0FBVyxDQUFDLE1BQUtyQyxLQUFMLENBQVdrQixJQUFaLENBQVgsR0FBK0IsQ0FBQyxNQUFLaEIsZUFBTCxFQUFELEdBQTBCLE1BQUtqQixXQUEvQixHQUE2QyxNQUFLRixPQUFqRjtBQUNBcUQsVUFBQUEsU0FBUyxDQUFDLE1BQUtwQyxLQUFMLENBQVdrQixJQUFaLENBQVQsR0FBNkIsTUFBS2hDLGFBQWxDO0FBQ0E7O0FBQ0YsYUFBSyxRQUFMO0FBQ0VrRCxVQUFBQSxTQUFTLENBQUMsTUFBS3BDLEtBQUwsQ0FBV2tCLElBQVosQ0FBVCxHQUE2QixNQUFLbkMsT0FBbEM7QUFDQXNELFVBQUFBLFdBQVcsQ0FBQyxNQUFLckMsS0FBTCxDQUFXa0IsSUFBWixDQUFYLEdBQStCLENBQS9CO0FBQ0E7O0FBQ0YsYUFBSyxVQUFMO0FBQ0VrQixVQUFBQSxTQUFTLENBQUMsTUFBS3BDLEtBQUwsQ0FBV2tCLElBQVosQ0FBVCxHQUE2QixNQUFLbkMsT0FBbEM7QUFDQXNELFVBQUFBLFdBQVcsQ0FBQyxNQUFLckMsS0FBTCxDQUFXa0IsSUFBWixDQUFYLEdBQStCLENBQUMsTUFBS2hCLGVBQUwsRUFBRCxHQUEwQixNQUFLbkIsT0FBL0IsR0FBeUMsTUFBS0UsV0FBN0U7QUFDQTtBQVpKOztBQWVBLFVBQUl1RCxnQkFBZ0IsR0FBRyxJQUF2QjtBQUNBLFVBQUlDLGtCQUFrQixHQUFHLElBQXpCOztBQUNBLFVBQUksTUFBS3pDLEtBQUwsQ0FBVzBDLFlBQWYsRUFBNkI7QUFDM0IsWUFBSUMsU0FBUyxHQUFHLE1BQUszQyxLQUFMLENBQVcwQyxZQUFYLENBQXdCSixLQUF4QixFQUErQixNQUFLdEMsS0FBTCxDQUFXa0IsSUFBMUMsQ0FBaEI7O0FBQ0FrQixRQUFBQSxTQUFTLEdBQUcsMEJBQWNBLFNBQWQsRUFBeUJPLFNBQVMsQ0FBQ2pDLElBQW5DLENBQVo7QUFDQTJCLFFBQUFBLFdBQVcsR0FBRywwQkFBY0EsV0FBZCxFQUEyQk0sU0FBUyxDQUFDN0MsTUFBckMsQ0FBZDtBQUNBMEMsUUFBQUEsZ0JBQWdCLEdBQUdHLFNBQVMsQ0FBQ0MsV0FBN0I7QUFDQUgsUUFBQUEsa0JBQWtCLEdBQUdFLFNBQVMsQ0FBQ0UsYUFBL0I7QUFDRDs7QUFDRCxVQUFJLE1BQUtuQyxJQUFMLElBQWEsTUFBS1osTUFBbEIsSUFBNEIsTUFBSzhDLFdBQWpDLElBQWdELE1BQUtDLGFBQXpELEVBQXdFO0FBQ3RFLGNBQUsvQyxNQUFMLENBQVlzQixjQUFaLENBQTJCO0FBQUNDLFVBQUFBLEtBQUssRUFBRWdCO0FBQVIsU0FBM0I7O0FBQ0EsY0FBSzNCLElBQUwsQ0FBVVUsY0FBVixDQUF5QjtBQUFDQyxVQUFBQSxLQUFLLEVBQUVlO0FBQVIsU0FBekI7O0FBQ0EsWUFBSUksZ0JBQUosRUFBc0IsTUFBS0ksV0FBTCxDQUFpQnhCLGNBQWpCLENBQWdDO0FBQUNDLFVBQUFBLEtBQUssRUFBRW1CO0FBQVIsU0FBaEM7QUFDdEIsWUFBSUMsa0JBQUosRUFBd0IsTUFBS0ksYUFBTCxDQUFtQnpCLGNBQW5CLENBQWtDO0FBQUNDLFVBQUFBLEtBQUssRUFBRW9CO0FBQVIsU0FBbEM7QUFDekI7QUFDRixLOztVQVFEUix1QixHQUEwQixVQUFDYSxDQUFELEVBQUlDLFlBQUosRUFBcUI7QUFDN0MsWUFBSzNELFFBQUwsR0FBZ0IsS0FBaEI7QUFDQSxZQUFLNEQsZ0JBQUwsQ0FBc0IsTUFBS0MsZUFBTCxDQUFxQkYsWUFBckIsQ0FBdEIsSUFBNEQsTUFBSzlCLElBQUwsRUFBNUQsR0FBMEUsTUFBS2lDLEtBQUwsRUFBMUU7QUFDRCxLOztVQUVEdEIsbUMsR0FBc0MsVUFBQ2tCLENBQUQsRUFBSUMsWUFBSixFQUFxQjtBQUN6RCxVQUFJLE1BQUtJLHFCQUFMLEVBQUosRUFBa0MsT0FBTyxNQUFLQyxnQkFBTCxDQUFzQk4sQ0FBdEIsRUFBeUJDLFlBQXpCLENBQVA7QUFDbEMsYUFBTyxLQUFQO0FBQ0QsSzs7VUFFRHBCLDRCLEdBQStCLFVBQUNtQixDQUFELEVBQUlDLFlBQUosRUFBcUI7QUFDbEQsVUFBSSxDQUFDLE1BQUtJLHFCQUFMLEVBQUwsRUFBbUMsT0FBTyxNQUFLQyxnQkFBTCxDQUFzQk4sQ0FBdEIsRUFBeUJDLFlBQXpCLENBQVA7QUFDbkMsYUFBTyxLQUFQO0FBQ0QsSzs7VUFFRGpCLGtDLEdBQXFDLFVBQUNnQixDQUFELEVBQUlDLFlBQUosRUFBcUI7QUFDeEQsVUFBSSxNQUFLSSxxQkFBTCxNQUFnQyxNQUFLbkQsS0FBTCxDQUFXcUQsWUFBL0MsRUFBNkQsT0FBTyxNQUFLQyxvQkFBTCxDQUEwQlIsQ0FBMUIsRUFBNkJDLFlBQTdCLENBQVA7QUFDN0QsYUFBTyxLQUFQO0FBQ0QsSzs7VUFFRGxCLDJCLEdBQThCLFVBQUNpQixDQUFELEVBQUlDLFlBQUosRUFBcUI7QUFDakQsVUFBSSxDQUFDLE1BQUtJLHFCQUFMLEVBQUQsSUFBaUMsTUFBS25ELEtBQUwsQ0FBV3FELFlBQWhELEVBQThELE9BQU8sTUFBS0Msb0JBQUwsQ0FBMEJSLENBQTFCLEVBQTZCQyxZQUE3QixDQUFQO0FBQzlELGFBQU8sS0FBUDtBQUNELEs7O1VBRURoQixrQixHQUFxQixVQUFDZSxDQUFELEVBQUlDLFlBQUosRUFBcUI7QUFDeEMsVUFBSVEsS0FBSyxHQUFHLE1BQUtOLGVBQUwsQ0FBcUJGLFlBQXJCLENBQVo7O0FBQ0EsVUFBSSxDQUFDLE1BQUsvQyxLQUFMLENBQVd3RCxTQUFoQixFQUEyQixPQUFPLEtBQVA7QUFHM0IsVUFBSSxNQUFLckUsS0FBTCxHQUFhb0UsS0FBSyxHQUFHLENBQXJCLEdBQXlCLE1BQUtFLG1CQUFMLEVBQTdCLEVBQXlELE9BQU8sS0FBUDtBQUV6REYsTUFBQUEsS0FBSyxHQUFHLE1BQUtFLG1CQUFMLEtBQTZCRixLQUFLLEdBQUcsQ0FBQyxDQUF0QyxHQUEwQ0EsS0FBbEQ7QUFDQSxVQUFJRyxNQUFNLEdBQUcsTUFBSzFFLFdBQUwsR0FBbUJ1RSxLQUFoQztBQUNBRyxNQUFBQSxNQUFNLEdBQUdDLElBQUksQ0FBQ0MsR0FBTCxDQUFTRixNQUFULEVBQWlCLE1BQUtuQixhQUFMLEVBQWpCLENBQVQ7QUFDQW1CLE1BQUFBLE1BQU0sR0FBR0MsSUFBSSxDQUFDRSxHQUFMLENBQVNILE1BQVQsRUFBaUIsTUFBS0ksZUFBTCxFQUFqQixDQUFUO0FBQ0FKLE1BQUFBLE1BQU0sR0FBR0MsSUFBSSxDQUFDSSxLQUFMLENBQVdMLE1BQU0sR0FBQyxDQUFsQixJQUFxQixDQUE5QjtBQUNBLFlBQUszRSxPQUFMLEdBQWUyRSxNQUFmOztBQUVBLFlBQUt2QixjQUFMOztBQUNBLFVBQUksQ0FBQyxNQUFLL0MsUUFBVixFQUFvQjtBQUNsQixjQUFLWSxLQUFMLENBQVdnRSxXQUFYLElBQTBCLE1BQUtoRSxLQUFMLENBQVdnRSxXQUFYLEVBQTFCO0FBQ0Q7O0FBQ0QsWUFBSzVFLFFBQUwsR0FBZ0IsSUFBaEI7QUFDRCxLOztVQUVENEMscUIsR0FBd0IsVUFBQ2MsQ0FBRCxFQUFJQyxZQUFKLEVBQXFCO0FBQzNDLFVBQUlRLEtBQUssR0FBRyxNQUFLTixlQUFMLENBQXFCRixZQUFyQixDQUFaOztBQUNBLFlBQUszRCxRQUFMLEdBQWdCLEtBQWhCO0FBQ0EsVUFBSTZFLElBQUksQ0FBQ0MsR0FBTCxLQUFhLE1BQUsxRSxhQUFsQixHQUFrQ1osWUFBdEMsRUFBb0QsTUFBS3VGLGtCQUFMO0FBQ3BELFVBQUlSLElBQUksQ0FBQ1MsR0FBTCxDQUFTYixLQUFULElBQWtCLEVBQWxCLElBQXdCLE1BQUtqRSxZQUFqQyxFQUErQztBQUUvQyxZQUFLMEQsZ0JBQUwsQ0FBc0JPLEtBQXRCLElBQStCLE1BQUt0QyxJQUFMLEVBQS9CLEdBQTZDLE1BQUtpQyxLQUFMLEVBQTdDOztBQUNBLFlBQUtmLGNBQUw7O0FBQ0EsWUFBS25ELFdBQUwsR0FBbUIsTUFBS0QsT0FBeEI7QUFDRCxLOztVQUVEcUUsZ0IsR0FBbUIsVUFBQ04sQ0FBRCxFQUFJQyxZQUFKLEVBQXFCO0FBQ3RDLFVBQUlzQixNQUFNLEdBQUcsTUFBS0Msb0JBQUwsQ0FBMEJ4QixDQUExQixFQUE2QkMsWUFBN0IsQ0FBYjs7QUFDQSxVQUFJLENBQUNzQixNQUFMLEVBQWEsT0FBTyxLQUFQO0FBRWIsVUFBSSxDQUFDLE1BQUtsRixLQUFOLElBQWV3RSxJQUFJLENBQUNTLEdBQUwsQ0FBU3JCLFlBQVksQ0FBQ3dCLEVBQXRCLEtBQTZCWixJQUFJLENBQUNTLEdBQUwsQ0FBU3JCLFlBQVksQ0FBQ3lCLEVBQXRCLENBQWhELEVBQTJFLE9BQU8sS0FBUDtBQUMzRSxZQUFLaEYsYUFBTCxHQUFxQnlFLElBQUksQ0FBQ0MsR0FBTCxFQUFyQjtBQUNBLFVBQUlHLE1BQU0sSUFBSSxNQUFLbEIscUJBQUwsRUFBZCxFQUE0QyxPQUFPLElBQVA7QUFDNUMsVUFBSSxNQUFLbkQsS0FBTCxDQUFXcUQsWUFBZixFQUE2QixPQUFPLEtBQVA7QUFDN0IsVUFBSSxDQUFDLE1BQUtyRCxLQUFMLENBQVd3RCxTQUFoQixFQUEyQixPQUFPLEtBQVA7O0FBQzNCLFlBQUtpQixvQkFBTDs7QUFDQSxhQUFPLElBQVA7QUFDRCxLOztVQUVEbkIsb0IsR0FBdUIsVUFBQ1IsQ0FBRCxFQUFJQyxZQUFKLEVBQXFCO0FBQzFDLFVBQUlzQixNQUFNLEdBQUcsTUFBS0Msb0JBQUwsQ0FBMEJ4QixDQUExQixFQUE2QkMsWUFBN0IsQ0FBYjs7QUFDQSxVQUFJLENBQUNzQixNQUFELEtBQVksQ0FBQyxNQUFLckUsS0FBTCxDQUFXMEUsaUJBQVosSUFBaUMsTUFBS3ZGLEtBQUwsS0FBZSxLQUE1RCxDQUFKLEVBQXlFLE9BQU8sS0FBUDtBQUN6RSxVQUFJLENBQUMsTUFBS2EsS0FBTCxDQUFXd0QsU0FBaEIsRUFBMkIsT0FBTyxLQUFQO0FBRTNCLFVBQUksQ0FBQyxNQUFLeEQsS0FBTCxDQUFXcUQsWUFBWixJQUE0QixNQUFLckQsS0FBTCxDQUFXMkUsUUFBdkMsSUFBbUQsQ0FBQyxNQUFLM0UsS0FBTCxDQUFXd0QsU0FBL0QsSUFBNEUsTUFBS3BFLFFBQXJGLEVBQStGLE9BQU8sS0FBUDs7QUFDL0YsVUFBSW1FLEtBQUssR0FBRyxNQUFLTixlQUFMLENBQXFCRixZQUFyQixDQUFaOztBQUNBLFVBQUk2QixpQkFBaUIsR0FBRyxNQUFLQywyQkFBTCxDQUFpQzlCLFlBQWpDLENBQXhCOztBQUNBLFVBQUkrQixnQkFBZ0IsR0FBSXZCLEtBQUssR0FBRyxDQUFULEdBQWMsSUFBZCxHQUFxQixLQUE1QztBQUNBLFVBQUl3QixvQkFBb0IsR0FBSXhCLEtBQUssR0FBRyxDQUFULEdBQWMsSUFBZCxHQUFxQixLQUFoRDtBQUNBLFVBQUl5QixpQkFBaUIsR0FBSXJCLElBQUksQ0FBQ1MsR0FBTCxDQUFTUSxpQkFBVCxLQUErQmpCLElBQUksQ0FBQ1MsR0FBTCxDQUFTYixLQUFULENBQWhDLEdBQW1ELElBQW5ELEdBQTBELEtBQWxGO0FBQ0EsVUFBSTBCLHFCQUFxQixHQUFJLE1BQUtDLGVBQUwsRUFBRCxHQUEyQkosZ0JBQTNCLEdBQThDQyxvQkFBMUU7O0FBQ0EsVUFBSUMsaUJBQWlCLElBQUssTUFBSzdGLEtBQUwsSUFBYyxDQUFDOEYscUJBQXJDLElBQWdFLENBQUMsTUFBSzlGLEtBQU4sSUFBZThGLHFCQUFuRixFQUEyRztBQUN6RyxlQUFPLEtBQVA7QUFDRDs7QUFFRCxZQUFLUixvQkFBTDs7QUFDQSxhQUFPLElBQVA7QUFDRCxLOztVQUVETixrQixHQUFxQixZQUFNO0FBQ3pCLFVBQUksTUFBSzdFLFlBQVQsRUFBdUIsT0FBTyxLQUFQOztBQUN2QixVQUFJLE1BQUtVLEtBQUwsQ0FBV21GLFNBQVgsSUFBeUIsTUFBS25GLEtBQUwsQ0FBV29GLFVBQVgsSUFBeUIsTUFBS2pHLEtBQTNELEVBQW1FO0FBQ2pFLGNBQUtBLEtBQUwsR0FBYSxNQUFLK0QsS0FBTCxFQUFiLEdBQTRCLE1BQUtqQyxJQUFMLEVBQTVCO0FBQ0EsZUFBTyxJQUFQO0FBQ0Q7O0FBQ0QsVUFBSSxNQUFLakIsS0FBTCxDQUFXcUYsZUFBZixFQUFnQztBQUM5QixZQUFJbkIsR0FBRyxHQUFHLElBQUlELElBQUosR0FBV3FCLE9BQVgsRUFBVjtBQUNBLFlBQUlDLFNBQVMsR0FBR3JCLEdBQUcsR0FBRyxNQUFLM0UsVUFBM0I7QUFDQSxjQUFLQSxVQUFMLEdBQWtCMkUsR0FBbEI7O0FBQ0EsWUFBSXFCLFNBQVMsR0FBRzVHLG1CQUFoQixFQUFxQztBQUNuQyxnQkFBS1EsS0FBTCxHQUFhLE1BQUsrRCxLQUFMLEVBQWIsR0FBNEIsTUFBS2pDLElBQUwsRUFBNUI7QUFDQSxpQkFBTyxJQUFQO0FBQ0Q7QUFDRjs7QUFDRCxhQUFPLEtBQVA7QUFDRCxLOztVQVNEcUQsb0IsR0FBdUIsVUFBQ3hCLENBQUQsRUFBSUMsWUFBSixFQUFxQjtBQUMxQyxVQUFJLE1BQUsvQyxLQUFMLENBQVcyRSxRQUFmLEVBQXlCLE9BQU8sS0FBUDtBQUl6QixVQUFJLE1BQUthLE9BQUwsQ0FBYTFGLE1BQWIsSUFBdUIsTUFBSzBGLE9BQUwsQ0FBYTFGLE1BQWIsQ0FBb0JYLEtBQS9DLEVBQXNELE9BQU8sS0FBUDtBQUN0RCxVQUFJLE1BQUtzRyxZQUFMLElBQXFCLE1BQUtBLFlBQUwsQ0FBa0J0RyxLQUEzQyxFQUFrRCxPQUFPLEtBQVA7QUFFbEQsVUFBSXVHLElBQUksR0FBRyxNQUFLN0UsaUJBQUwsS0FBMkJpQyxDQUFDLENBQUM2QyxXQUFGLENBQWNDLEtBQXpDLEdBQWlEOUMsQ0FBQyxDQUFDNkMsV0FBRixDQUFjRSxLQUExRTtBQUNBLFVBQUlDLFNBQVMsR0FBRyxNQUFLWixlQUFMLEtBQXlCLE1BQUtoRixlQUFMLEtBQXlCd0YsSUFBbEQsR0FBeURBLElBQXpFO0FBQ0EsVUFBSUssVUFBVSxHQUFHLE1BQUtiLGVBQUwsS0FBeUJRLElBQXpCLEdBQWdDLE1BQUt4RixlQUFMLEtBQXlCd0YsSUFBMUU7QUFFQSxVQUFLLE1BQUt2RyxLQUFMLElBQWMyRyxTQUFTLEdBQUcsTUFBS0UsV0FBTCxFQUEvQixFQUFvRCxPQUFPLEtBQVA7QUFDcEQsVUFBSyxDQUFDLE1BQUs3RyxLQUFOLElBQWU0RyxVQUFVLEdBQUcsTUFBS0UsYUFBTCxFQUFqQyxFQUF3RCxPQUFPLEtBQVA7QUFDeEQsYUFBTyxJQUFQO0FBQ0QsSzs7VUFFRHhCLG9CLEdBQXVCLFlBQU07QUFDM0IsVUFBSSxNQUFLbkYsWUFBVCxFQUF1QjtBQUNyQixjQUFLQSxZQUFMLENBQWtCNEcsU0FBbEI7O0FBQ0EsY0FBSzVHLFlBQUwsR0FBb0IsSUFBcEI7QUFDRDtBQUNGLEs7O1VBRUQyQixJLEdBQU8sVUFBQ0UsSUFBRCxFQUFPZ0YsRUFBUCxFQUFjO0FBQ25CLFVBQUlDLEtBQUssR0FBRyxNQUFLckgsT0FBakI7O0FBQ0EsVUFBSXNILEdBQUcsR0FBRyxNQUFLOUQsYUFBTCxFQUFWOztBQUVBLFVBQUksTUFBS2pELFlBQVQsRUFBdUI7QUFDdkIsVUFBSTZCLElBQUksS0FBSyxPQUFULElBQW9CaUYsS0FBSyxHQUFHQyxHQUFSLEtBQWdCLENBQXBDLElBQXlDLE1BQUtsSCxLQUFMLEtBQWUsSUFBNUQsRUFBa0U7QUFFbEUsWUFBS2EsS0FBTCxDQUFXc0csV0FBWCxJQUEwQixNQUFLdEcsS0FBTCxDQUFXc0csV0FBWCxFQUExQjs7QUFDQSxZQUFLQyxvQkFBTDs7QUFDQSxZQUFLakgsWUFBTCxHQUFvQix5QkFBTTtBQUN4QjhHLFFBQUFBLEtBQUssRUFBRSxNQUFLckgsT0FEWTtBQUV4QnNILFFBQUFBLEdBQUcsRUFBRSxNQUFLOUQsYUFBTCxFQUZtQjtBQUd4QmlFLFFBQUFBLFFBQVEsRUFBRSxNQUFLeEcsS0FBTCxDQUFXeUcsYUFIRztBQUl4QkMsUUFBQUEsVUFBVSxFQUFFLE1BQUsxRyxLQUFMLENBQVcyRyxXQUpDO0FBS3hCQyxRQUFBQSxPQUFPLEVBQUUsaUJBQUNDLFVBQUQsRUFBZ0I7QUFDOUIsZ0JBQUs5SCxPQUFMLEdBQWU0RSxJQUFJLENBQUNJLEtBQUwsQ0FBVzhDLFVBQVUsR0FBQyxDQUF0QixJQUF5QixDQUF4Qzs7QUFDTyxnQkFBSzFFLGNBQUw7QUFDRCxTQVJ1QjtBQVN4QjJFLFFBQUFBLEtBQUssRUFBRSxpQkFBTTtBQUNYLGdCQUFLeEgsWUFBTCxHQUFvQixJQUFwQjtBQUNBLGdCQUFLSCxLQUFMLEdBQWEsSUFBYjtBQUNBLGdCQUFLSCxXQUFMLEdBQW1CLE1BQUtELE9BQXhCOztBQUNBLGdCQUFLZ0ksd0JBQUw7O0FBQ0EsZ0JBQUsvRyxLQUFMLENBQVdnSCxNQUFYOztBQUNBLGdCQUFLQyxzQkFBTDs7QUFFQSxjQUFHLE9BQU85RixJQUFQLEtBQWdCLFVBQW5CLEVBQStCO0FBQzdCQSxZQUFBQSxJQUFJO0FBQ0wsV0FGRCxNQUVPZ0YsRUFBRSxJQUFJQSxFQUFFLEVBQVI7QUFFUjtBQXJCdUIsT0FBTixDQUFwQjtBQXVCRCxLOztVQUVEakQsSyxHQUFRLFVBQUMvQixJQUFELEVBQU9nRixFQUFQLEVBQWM7QUFDcEIsVUFBSUMsS0FBSyxHQUFHLE1BQUtySCxPQUFqQjs7QUFDQSxVQUFJc0gsR0FBRyxHQUFHLE1BQUt2QyxlQUFMLEVBQVY7O0FBRUEsVUFBSSxNQUFLeEUsWUFBVCxFQUF1QjtBQUN2QixVQUFJNkIsSUFBSSxLQUFLLE9BQVQsSUFBb0JpRixLQUFLLEdBQUdDLEdBQVIsS0FBZ0IsQ0FBcEMsSUFBeUMsTUFBS2xILEtBQUwsS0FBZSxLQUE1RCxFQUFtRTtBQUVuRSxZQUFLYSxLQUFMLENBQVdrSCxZQUFYLElBQTJCLE1BQUtsSCxLQUFMLENBQVdrSCxZQUFYLEVBQTNCOztBQUNBLFlBQUtYLG9CQUFMOztBQUNBLFlBQUtqSCxZQUFMLEdBQW9CLHlCQUFNO0FBQ3hCOEcsUUFBQUEsS0FBSyxFQUFMQSxLQUR3QjtBQUV4QkMsUUFBQUEsR0FBRyxFQUFIQSxHQUZ3QjtBQUd4QkssUUFBQUEsVUFBVSxFQUFFLE1BQUsxRyxLQUFMLENBQVcyRyxXQUhDO0FBSXhCSCxRQUFBQSxRQUFRLEVBQUUsTUFBS3hHLEtBQUwsQ0FBV3lHLGFBSkc7QUFLeEJHLFFBQUFBLE9BQU8sRUFBRSxpQkFBQ0MsVUFBRCxFQUFnQjtBQUM5QixnQkFBSzlILE9BQUwsR0FBZTRFLElBQUksQ0FBQ0ksS0FBTCxDQUFXOEMsVUFBVSxHQUFDLENBQXRCLElBQXlCLENBQXhDOztBQUNPLGdCQUFLMUUsY0FBTDtBQUNELFNBUnVCO0FBU3hCMkUsUUFBQUEsS0FBSyxFQUFFLGlCQUFNO0FBQ1gsZ0JBQUt4SCxZQUFMLEdBQW9CLElBQXBCO0FBQ0EsZ0JBQUtILEtBQUwsR0FBYSxLQUFiO0FBQ0EsZ0JBQUtILFdBQUwsR0FBbUIsTUFBS0QsT0FBeEI7O0FBQ0EsZ0JBQUtnSSx3QkFBTDs7QUFDQSxnQkFBSy9HLEtBQUwsQ0FBV21ILE9BQVg7O0FBQ0EsZ0JBQUtGLHNCQUFMOztBQUVBLGNBQUcsT0FBTzlGLElBQVAsS0FBZ0IsVUFBbkIsRUFBK0I7QUFDN0JBLFlBQUFBLElBQUk7QUFDTCxXQUZELE1BRU9nRixFQUFFLElBQUlBLEVBQUUsRUFBUjtBQUVSO0FBckJ1QixPQUFOLENBQXBCO0FBdUJELEs7O1VBb0JEaUIsTSxHQUFTLFlBQU07QUFDYixZQUFLakksS0FBTCxHQUFhLE1BQUsrRCxLQUFMLEVBQWIsR0FBNEIsTUFBS2pDLElBQUwsRUFBNUI7QUFDRCxLOztVQUVEb0csaUIsR0FBb0IsVUFBQ3ZFLENBQUQsRUFBTztBQUN6QixVQUFJbEQsUUFBUSxHQUFHa0QsQ0FBQyxDQUFDNkMsV0FBRixDQUFjMkIsTUFBN0I7QUFDQSxVQUFJQyxXQUFXLEdBQUcsTUFBSzVILEtBQUwsQ0FBV0MsUUFBN0I7QUFDQSxVQUFJQSxRQUFRLENBQUM0SCxLQUFULEtBQW1CRCxXQUFXLENBQUNDLEtBQS9CLElBQXdDNUgsUUFBUSxDQUFDNkgsTUFBVCxLQUFvQkYsV0FBVyxDQUFDRSxNQUE1RSxFQUFvRjtBQUNwRixVQUFJQyxpQkFBaUIsR0FBRzlILFFBQVEsQ0FBQzRILEtBQVQsS0FBbUJELFdBQVcsQ0FBQ0MsS0FBdkQ7O0FBQ0EsWUFBS3RGLE1BQUwsQ0FBWXRDLFFBQVosRUFBc0IsSUFBdEIsRUFBNEI4SCxpQkFBNUI7QUFDRCxLOztVQUVEeEYsTSxHQUFTLFVBQUN0QyxRQUFELEVBQVdJLEtBQVgsRUFBa0IwSCxpQkFBbEIsRUFBd0M7QUFDL0MsVUFBSUEsaUJBQUosRUFBdUIsTUFBS2pJLGdCQUFMLEdBQXdCLElBQXhCO0FBQ3ZCRyxNQUFBQSxRQUFRLEdBQUdBLFFBQVEsSUFBSSxNQUFLRCxLQUFMLENBQVdDLFFBQWxDO0FBQ0FJLE1BQUFBLEtBQUssR0FBR0EsS0FBSyxJQUFJLE1BQUtBLEtBQXRCO0FBQ0EsWUFBS2QsYUFBTCxHQUFxQixNQUFLaUIsZUFBTCxDQUFxQkgsS0FBckIsRUFBNEJKLFFBQTVCLENBQXJCO0FBQ0EsWUFBS1gsV0FBTCxHQUFtQixNQUFLbUIsYUFBTCxDQUFtQkosS0FBbkIsRUFBMEJKLFFBQTFCLENBQW5COztBQUNBLFlBQUsrSCxRQUFMLENBQWM7QUFBRS9ILFFBQUFBLFFBQVEsRUFBUkE7QUFBRixPQUFkO0FBQ0QsSzs7VUFFRGdJLGMsR0FBaUIsVUFBQ0MsU0FBRCxFQUFlO0FBQzlCLFdBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR2pKLHNCQUFzQixDQUFDNkUsTUFBM0MsRUFBbURvRSxDQUFDLEVBQXBELEVBQXdEO0FBQ3RELFlBQUlDLEdBQUcsR0FBR2xKLHNCQUFzQixDQUFDaUosQ0FBRCxDQUFoQztBQUNBLFlBQUksTUFBSzlILEtBQUwsQ0FBVytILEdBQVgsTUFBb0JGLFNBQVMsQ0FBQ0UsR0FBRCxDQUFqQyxFQUF3QyxPQUFPLElBQVA7QUFDekM7QUFDRixLOztVQUdEN0gsZSxHQUFrQjtBQUFBLFVBQUNOLFFBQUQsdUVBQVksTUFBS0QsS0FBTCxDQUFXQyxRQUF2QjtBQUFBLGFBQW9DLE1BQUtpQixpQkFBTCxLQUEyQmpCLFFBQVEsQ0FBQzRILEtBQXBDLEdBQTRDNUgsUUFBUSxDQUFDNkgsTUFBekY7QUFBQSxLOztVQUNsQmxGLGEsR0FBZ0I7QUFBQSxhQUFNLE1BQUtyQyxlQUFMLEtBQXlCLE1BQUtqQixXQUFwQztBQUFBLEs7O1VBQ2hCNkUsZSxHQUFrQjtBQUFBLGFBQU0sTUFBSzVFLGFBQVg7QUFBQSxLOztVQUNsQjhJLFksR0FBZSxZQUFvQztBQUFBLFVBQW5DcEksUUFBbUMsdUVBQXhCLE1BQUtELEtBQUwsQ0FBV0MsUUFBYTtBQUNqRCxhQUFPLE1BQUtpQixpQkFBTCxLQUEyQmpCLFFBQVEsQ0FBQzRILEtBQVQsR0FBaUIsTUFBS3RJLGFBQWpELEdBQWlFVSxRQUFRLENBQUM0SCxLQUFqRjtBQUNELEs7O1VBQ0RTLGEsR0FBZ0IsWUFBb0M7QUFBQSxVQUFuQ3JJLFFBQW1DLHVFQUF4QixNQUFLRCxLQUFMLENBQVdDLFFBQWE7QUFDbEQsYUFBTyxNQUFLc0ksaUJBQUwsS0FBMkJ0SSxRQUFRLENBQUM2SCxNQUFULEdBQWtCLE1BQUt2SSxhQUFsRCxHQUFrRVUsUUFBUSxDQUFDNkgsTUFBbEY7QUFDRCxLOztVQUNEVSxjLEdBQWlCLFlBQW9DO0FBQUEsVUFBbkN2SSxRQUFtQyx1RUFBeEIsTUFBS0QsS0FBTCxDQUFXQyxRQUFhO0FBQ25ELGFBQU8sTUFBS2lCLGlCQUFMLEtBQTJCakIsUUFBUSxDQUFDNEgsS0FBVCxHQUFpQixNQUFLdkksV0FBakQsR0FBK0RXLFFBQVEsQ0FBQzRILEtBQS9FO0FBQ0QsSzs7VUFDRFksZSxHQUFrQixZQUFvQztBQUFBLFVBQW5DeEksUUFBbUMsdUVBQXhCLE1BQUtELEtBQUwsQ0FBV0MsUUFBYTtBQUNwRCxhQUFPLE1BQUtzSSxpQkFBTCxLQUEyQnRJLFFBQVEsQ0FBQzZILE1BQVQsR0FBa0IsTUFBS3hJLFdBQWxELEdBQWdFVyxRQUFRLENBQUM2SCxNQUFoRjtBQUNELEs7O1VBQ0R6QixXLEdBQWMsWUFBb0M7QUFBQSxVQUFuQ3BHLFFBQW1DLHVFQUF4QixNQUFLRCxLQUFMLENBQVdDLFFBQWE7QUFDaEQsVUFBSSxNQUFLSSxLQUFMLENBQVdxSSxZQUFYLElBQTJCLE1BQUtySSxLQUFMLENBQVdxSSxZQUFYLEdBQTBCLENBQTFCLEtBQWdDLENBQS9ELEVBQWtFLE9BQU8sTUFBS3JJLEtBQUwsQ0FBV3FJLFlBQWxCO0FBQ2xFLFVBQUksTUFBS3JJLEtBQUwsQ0FBV3FJLFlBQWYsRUFBNkIsT0FBTyxNQUFLbkksZUFBTCxDQUFxQk4sUUFBckIsSUFBaUMsTUFBS0ksS0FBTCxDQUFXcUksWUFBbkQ7QUFDN0IsYUFBTzFFLElBQUksQ0FBQ0UsR0FBTCxDQUFTLElBQVQsRUFBZSxNQUFLNUUsV0FBcEIsQ0FBUDtBQUNELEs7O1VBQ0RnSCxhLEdBQWdCLFlBQU07QUFDcEIsVUFBSSxNQUFLakcsS0FBTCxDQUFXc0ksV0FBWCxJQUEwQixNQUFLdEksS0FBTCxDQUFXc0ksV0FBWCxHQUF5QixDQUF6QixLQUErQixDQUE3RCxFQUFnRSxPQUFPLE1BQUt0SSxLQUFMLENBQVdzSSxXQUFsQjtBQUNoRSxVQUFJLE1BQUt0SSxLQUFMLENBQVdzSSxXQUFmLEVBQTRCLE9BQU8sTUFBS3BJLGVBQUwsS0FBeUIsTUFBS0YsS0FBTCxDQUFXc0ksV0FBM0M7QUFDNUIsYUFBTzNFLElBQUksQ0FBQ0UsR0FBTCxDQUFTLElBQVQsRUFBZSxNQUFLM0UsYUFBcEIsQ0FBUDtBQUNELEs7O1VBQ0RrQixhLEdBQWdCLFVBQUNKLEtBQUQsRUFBUUosUUFBUixFQUFxQjtBQUNuQyxVQUFJLE9BQU9JLEtBQUssQ0FBQ3VJLGdCQUFiLEtBQWtDLFVBQXRDLEVBQWtELE9BQU92SSxLQUFLLENBQUN1SSxnQkFBTixDQUF1QjNJLFFBQXZCLENBQVA7QUFDbEQsYUFBT0ksS0FBSyxDQUFDdUksZ0JBQU4sR0FBeUIsQ0FBekIsSUFBOEJ2SSxLQUFLLENBQUN1SSxnQkFBTixHQUF5QixDQUF2RCxHQUEyRHZJLEtBQUssQ0FBQ3VJLGdCQUFqRSxHQUFvRnZJLEtBQUssQ0FBQ3VJLGdCQUFOLEdBQXlCLE1BQUtySSxlQUFMLENBQXFCTixRQUFyQixDQUFwSDtBQUNELEs7O1VBQ0RPLGUsR0FBa0IsVUFBQ0gsS0FBRCxFQUFRSixRQUFSLEVBQXFCO0FBQ3JDLFVBQUksT0FBT0ksS0FBSyxDQUFDd0ksa0JBQWIsS0FBb0MsVUFBeEMsRUFBb0QsT0FBT3hJLEtBQUssQ0FBQ3dJLGtCQUFOLENBQXlCNUksUUFBekIsQ0FBUDtBQUNwRCxhQUFPSSxLQUFLLENBQUN3SSxrQkFBTixHQUEyQixDQUEzQixJQUFnQ3hJLEtBQUssQ0FBQ3dJLGtCQUFOLEdBQTJCLENBQTNELEdBQStEeEksS0FBSyxDQUFDd0ksa0JBQXJFLEdBQTBGeEksS0FBSyxDQUFDd0ksa0JBQU4sR0FBMkIsTUFBS3RJLGVBQUwsQ0FBcUJOLFFBQXJCLENBQTVIO0FBQ0QsSzs7VUFDRHFELGUsR0FBa0IsVUFBQ0YsWUFBRDtBQUFBLGFBQWtCLE1BQUtsQyxpQkFBTCxLQUEyQmtDLFlBQVksQ0FBQ3lCLEVBQXhDLEdBQTZDekIsWUFBWSxDQUFDd0IsRUFBNUU7QUFBQSxLOztVQUNsQk0sMkIsR0FBOEIsVUFBQzlCLFlBQUQ7QUFBQSxhQUFrQixNQUFLbEMsaUJBQUwsS0FBMkJrQyxZQUFZLENBQUN3QixFQUF4QyxHQUE2Q3hCLFlBQVksQ0FBQ3lCLEVBQTVFO0FBQUEsSzs7VUFHOUIzRCxpQixHQUFvQixZQUFNO0FBQ3hCLFVBQUk0SCx5QkFBWUMsS0FBaEIsRUFBdUI7QUFDckIsZUFBTyxDQUFDLE9BQUQsRUFBVSxNQUFWLEVBQWtCQyxRQUFsQixDQUEyQixNQUFLM0ksS0FBTCxDQUFXa0IsSUFBdEMsQ0FBUDtBQUNELE9BRkQsTUFFTztBQUNMLGVBQU8sQ0FBQyxNQUFELEVBQVMsT0FBVCxFQUFrQnlILFFBQWxCLENBQTJCLE1BQUszSSxLQUFMLENBQVdrQixJQUF0QyxDQUFQO0FBQ0Q7QUFDRixLOztVQUNEZ0gsaUIsR0FBb0I7QUFBQSxhQUFNLENBQUMsS0FBRCxFQUFRLFFBQVIsRUFBa0JTLFFBQWxCLENBQTJCLE1BQUszSSxLQUFMLENBQVdrQixJQUF0QyxDQUFOO0FBQUEsSzs7VUFDcEJnRSxlLEdBQWtCLFlBQU07QUFDdEIsVUFBSWhFLElBQUksR0FBRyxNQUFYOztBQUNBLFVBQUl1SCx5QkFBWUMsS0FBaEIsRUFBdUI7QUFDckJ4SCxRQUFBQSxJQUFJLEdBQUcsT0FBUDtBQUNEOztBQUNELGFBQU8sQ0FBQ0EsSUFBRCxFQUFPLEtBQVAsRUFBY3lILFFBQWQsQ0FBdUIsTUFBSzNJLEtBQUwsQ0FBV2tCLElBQWxDLENBQVA7QUFDRCxLOztVQUNEdUMsbUIsR0FBc0IsWUFBTTtBQUMxQixVQUFJdkMsSUFBSSxHQUFHLE9BQVg7O0FBQ0EsVUFBSXVILHlCQUFZQyxLQUFoQixFQUF1QjtBQUNyQnhILFFBQUFBLElBQUksR0FBRyxNQUFQO0FBQ0Q7O0FBQ0QsYUFBTyxDQUFDQSxJQUFELEVBQU8sUUFBUCxFQUFpQnlILFFBQWpCLENBQTBCLE1BQUszSSxLQUFMLENBQVdrQixJQUFyQyxDQUFQO0FBQ0QsSzs7Ozs7Ozt5Q0E3Ym9CcEIsTSxFQUFRO0FBRzNCLFdBQUsyRixZQUFMLEdBQW9CM0YsTUFBcEI7QUFDRDs7O3lDQUVvQjtBQUNuQixVQUFJLEtBQUswRixPQUFMLENBQWExRixNQUFqQixFQUF5QixLQUFLMEYsT0FBTCxDQUFhMUYsTUFBYixDQUFvQjhJLG9CQUFwQixDQUF5QyxJQUF6QztBQUN6QixVQUFJLEtBQUs1SSxLQUFMLENBQVc2SSxtQkFBWCxJQUFrQ0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsWUFBL0QsRUFBNkVDLE9BQU8sQ0FBQ0MsS0FBUixDQUFjLGlGQUFkO0FBQzdFLFVBQUksS0FBS2xKLEtBQUwsQ0FBV21KLG9CQUFYLElBQW1DTCxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBWixLQUF5QixZQUFoRSxFQUE4RUMsT0FBTyxDQUFDQyxLQUFSLENBQWMsMERBQWQ7QUFDOUUsVUFBSSxLQUFLbEosS0FBTCxDQUFXb0osWUFBWCxJQUEyQk4sT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsWUFBeEQsRUFBc0VDLE9BQU8sQ0FBQ0MsS0FBUixDQUFjLGtEQUFkO0FBQ3RFLFdBQUtuSixVQUFMLENBQWdCLEtBQUtDLEtBQXJCO0FBQ0Q7Ozs4Q0FFeUI2SCxTLEVBQVc7QUFDbkMsVUFBSSxLQUFLRCxjQUFMLENBQW9CQyxTQUFwQixDQUFKLEVBQW9DLEtBQUszRixNQUFMLENBQVksSUFBWixFQUFrQjJGLFNBQWxCOztBQUVwQyxVQUFJQSxTQUFTLENBQUM1RyxJQUFWLEtBQW1CLElBQW5CLElBQTJCLEtBQUs5QixLQUFMLEtBQWUwSSxTQUFTLENBQUM1RyxJQUF4RCxFQUE4RDtBQUM1RCxhQUFLeEIsZ0JBQUwsR0FBd0IsSUFBeEI7QUFDQSxhQUFLTixLQUFMLEdBQWEwSSxTQUFTLENBQUM1RyxJQUF2QjtBQUNEO0FBQ0Y7Ozt5Q0FFb0I7QUFDbkIsVUFBSSxLQUFLeEIsZ0JBQVQsRUFBMkI7QUFDekIsYUFBS0EsZ0JBQUwsR0FBd0IsS0FBeEI7QUFDQSxhQUFLTixLQUFMLEdBQWEsS0FBSzhCLElBQUwsQ0FBVSxPQUFWLENBQWIsR0FBa0MsS0FBS2lDLEtBQUwsQ0FBVyxPQUFYLENBQWxDO0FBQ0Q7QUFDRjs7O3FDQW1HZ0JLLEssRUFBTztBQUN0QixVQUFJOEYsZ0JBQWdCLEdBQUcsS0FBS2xLLEtBQUwsR0FBYW9FLEtBQUssR0FBRyxDQUFyQixHQUF5QixLQUFLRSxtQkFBTCxFQUFoRDtBQUNBLFVBQUksQ0FBQzRGLGdCQUFMLEVBQXVCLE9BQU8sS0FBS2xLLEtBQVosQ0FBdkIsS0FDSyxPQUFPLEtBQUtBLEtBQUwsR0FBYXdFLElBQUksQ0FBQ1MsR0FBTCxDQUFTYixLQUFULElBQWtCLEtBQUtyRCxlQUFMLEtBQXlCLEtBQUtGLEtBQUwsQ0FBV3NKLFlBQTFFO0FBQ047Ozs0Q0E4R3VCO0FBQ3RCLFVBQUksS0FBS3RKLEtBQUwsQ0FBV3VKLGVBQVgsS0FBK0IsSUFBbkMsRUFBeUMsT0FBTyxJQUFQO0FBQ3pDLFVBQUksS0FBS3ZKLEtBQUwsQ0FBV3VKLGVBQVgsS0FBK0IsUUFBL0IsSUFBMkMsS0FBS3BLLEtBQUwsS0FBZSxLQUE5RCxFQUFxRSxPQUFPLElBQVA7QUFDckUsVUFBSSxLQUFLYSxLQUFMLENBQVd1SixlQUFYLEtBQStCLE1BQS9CLElBQXlDLEtBQUtwSyxLQUFMLEtBQWUsSUFBNUQsRUFBa0UsT0FBTyxJQUFQO0FBQ2xFLGFBQU8sS0FBUDtBQUNEOzs7K0NBOEYwQjtBQUN6QixVQUFJLENBQUMsS0FBS2EsS0FBTCxDQUFXdUosZUFBaEIsRUFBaUM7QUFDakMsVUFBSUMsYUFBYSxHQUFHLEtBQUtyRyxxQkFBTCxFQUFwQjs7QUFDQSxVQUFJLEtBQUtQLFdBQUwsSUFBb0IsS0FBS0MsYUFBN0IsRUFBNEM7QUFDMUMsYUFBS0QsV0FBTCxDQUFpQnhCLGNBQWpCLENBQWdDO0FBQUVxSSxVQUFBQSxhQUFhLEVBQUVELGFBQWEsSUFBSSxLQUFLckssS0FBdEIsR0FBOEIsTUFBOUIsR0FBdUM7QUFBeEQsU0FBaEM7QUFDQSxhQUFLMEQsYUFBTCxDQUFtQnpCLGNBQW5CLENBQWtDO0FBQUVxSSxVQUFBQSxhQUFhLEVBQUVELGFBQWEsSUFBSSxDQUFDLEtBQUtySyxLQUF2QixHQUErQixNQUEvQixHQUF3QztBQUF6RCxTQUFsQztBQUNEO0FBQ0Y7OzsyQ0FFc0I7QUFDckIsVUFBSSxLQUFLTyxrQkFBVCxFQUE2QmdLLGdDQUFtQnpDLHNCQUFuQixDQUEwQyxLQUFLdkgsa0JBQS9DO0FBQzdCLFVBQUksS0FBS00sS0FBTCxDQUFXMkoscUJBQWYsRUFBc0MsS0FBS2pLLGtCQUFMLEdBQTBCZ0ssZ0NBQW1CRSx1QkFBbkIsRUFBMUI7QUFDdkM7Ozs2Q0FFd0I7QUFDdkIsVUFBSSxLQUFLbEssa0JBQVQsRUFBNkJnSyxnQ0FBbUJ6QyxzQkFBbkIsQ0FBMEMsS0FBS3ZILGtCQUEvQztBQUM5Qjs7OzZCQTJGUTtBQUNQLFVBQUltSyxLQUFLLEdBQUcsS0FBSzdKLEtBQUwsQ0FBV21CLElBQVgsS0FBb0IsU0FBcEIsR0FBZ0MsS0FBSzJJLFVBQUwsRUFBaEMsR0FBb0QsS0FBS0MsWUFBTCxFQUFoRTtBQUNBLFVBQUlDLE1BQU0sR0FBRyxLQUFLaEssS0FBTCxDQUFXbUIsSUFBWCxLQUFvQixTQUFwQixHQUFnQyxLQUFLNEksWUFBTCxFQUFoQyxHQUFzRCxLQUFLRCxVQUFMLEVBQW5FO0FBRUEsYUFDRSxnQ0FBQyxpQkFBRDtBQUNFLFFBQUEsR0FBRyxFQUFDLGlCQUROO0FBRUUsUUFBQSxRQUFRLEVBQUUsS0FBS3pDLGlCQUZqQjtBQUdFLFFBQUEsS0FBSyxFQUFFLEtBQUsvRixVQUFMLENBQWdCaEI7QUFIekIsU0FLR3VKLEtBTEgsRUFNR0csTUFOSCxDQURGO0FBVUQ7OztpQ0FFWTtBQUFBOztBQUNYLGFBQ0UsZ0NBQUMsaUJBQUQsZ0NBQ00sS0FBS3ZJLFNBQUwsQ0FBZXdJLFdBRHJCO0FBRUUsUUFBQSxHQUFHLEVBQUMsTUFGTjtBQUdFLFFBQUEsR0FBRyxFQUFFLGFBQUFDLENBQUM7QUFBQSxpQkFBSSxNQUFJLENBQUN4SixJQUFMLEdBQVl3SixDQUFoQjtBQUFBLFNBSFI7QUFJRSxRQUFBLEtBQUssRUFBRSxDQUFDLEtBQUs1SSxVQUFMLENBQWdCWixJQUFqQixFQUF1QjtBQUFDK0csVUFBQUEsTUFBTSxFQUFFLEtBQUtRLGFBQUwsRUFBVDtBQUErQlQsVUFBQUEsS0FBSyxFQUFFLEtBQUtRLFlBQUw7QUFBdEMsU0FBdkI7QUFKVCxVQU1HLEtBQUtoSSxLQUFMLENBQVdtSyxRQU5kLEVBT0UsZ0NBQUMsaUJBQUQ7QUFDRSxRQUFBLGFBQWEsRUFBRyxLQUFLaEwsS0FBTCxJQUFjLEtBQUtnRSxxQkFBTCxFQUFkLEdBQTZDLE1BQTdDLEdBQXNELE1BRHhFO0FBRUUsUUFBQSxHQUFHLEVBQUUsYUFBQStHLENBQUM7QUFBQSxpQkFBSSxNQUFJLENBQUN0SCxXQUFMLEdBQW1Cc0gsQ0FBdkI7QUFBQSxTQUZSO0FBR0UsUUFBQSxLQUFLLEVBQUUsQ0FBQzdKLE1BQU0sQ0FBQytKLE9BQVIsRUFBaUIsS0FBS3BLLEtBQUwsQ0FBV0ssTUFBWCxJQUFxQixLQUFLTCxLQUFMLENBQVdLLE1BQVgsQ0FBa0J1QyxXQUF4RDtBQUhULFFBUEYsQ0FERjtBQWVEOzs7bUNBRWM7QUFBQTs7QUFDYixhQUNFLGdDQUFDLGlCQUFELGdDQUNNLEtBQUtuQixTQUFMLENBQWV3SSxXQURyQjtBQUVFLFFBQUEsR0FBRyxFQUFDLFFBRk47QUFHRSxRQUFBLEdBQUcsRUFBRSxhQUFBQyxDQUFDO0FBQUEsaUJBQUksTUFBSSxDQUFDcEssTUFBTCxHQUFjb0ssQ0FBbEI7QUFBQSxTQUhSO0FBSUUsUUFBQSxTQUFTLEVBQUUsS0FBS2xLLEtBQUwsQ0FBV3FLLFNBSnhCO0FBS0UsUUFBQSxLQUFLLEVBQUUsQ0FBQyxLQUFLL0ksVUFBTCxDQUFnQnhCLE1BQWpCLEVBQXlCO0FBQUMySCxVQUFBQSxNQUFNLEVBQUUsS0FBS1csZUFBTCxFQUFUO0FBQWlDWixVQUFBQSxLQUFLLEVBQUUsS0FBS1csY0FBTDtBQUF4QyxTQUF6QjtBQUxULFVBT0csS0FBS25JLEtBQUwsQ0FBV3NLLE9BUGQsRUFRRSxnQ0FBQyxpQkFBRDtBQUNFLFFBQUEsYUFBYSxFQUFHLENBQUMsS0FBS25MLEtBQU4sSUFBZSxLQUFLZ0UscUJBQUwsRUFBZixHQUE4QyxNQUE5QyxHQUF1RCxNQUR6RTtBQUVFLFFBQUEsR0FBRyxFQUFFLGFBQUErRyxDQUFDO0FBQUEsaUJBQUksTUFBSSxDQUFDckgsYUFBTCxHQUFxQnFILENBQXpCO0FBQUEsU0FGUjtBQUdFLFFBQUEsS0FBSyxFQUFFLENBQUM3SixNQUFNLENBQUMrSixPQUFSLEVBQWlCLEtBQUtwSyxLQUFMLENBQVdLLE1BQVgsSUFBcUIsS0FBS0wsS0FBTCxDQUFXSyxNQUFYLENBQWtCd0MsYUFBeEQ7QUFIVCxRQVJGLENBREY7QUFnQkQ7OztFQXhsQmlDMEgsZ0I7OztBQUFmekwsTSxDQWVaMEwsWSxHQUFlO0FBQ3BCQyxFQUFBQSxRQUFRLEVBQUUsa0JBQUNuSSxLQUFELEVBQTBCO0FBQUEsUUFBbEJwQixJQUFrQix1RUFBWCxNQUFXO0FBQ2xDLFFBQUlwQixNQUFNLHdDQUFNb0IsSUFBTixFQUFjLENBQUMsR0FBRCxJQUFRLElBQUlvQixLQUFaLENBQWQsQ0FBVjtBQUNBLFdBQU87QUFBRXhDLE1BQUFBLE1BQU0sRUFBTkE7QUFBRixLQUFQO0FBQ0Q7QUFKbUIsQztBQWZIaEIsTSxDQTBCWjRMLFMsR0FBWTtBQUNqQnJGLEVBQUFBLGVBQWUsRUFBRXNGLHNCQUFVQyxJQURWO0FBRWpCcEgsRUFBQUEsU0FBUyxFQUFFbUgsc0JBQVVDLElBRko7QUFHakJ6RixFQUFBQSxTQUFTLEVBQUV3RixzQkFBVUMsSUFISjtBQUlqQmxHLEVBQUFBLGlCQUFpQixFQUFFaUcsc0JBQVVDLElBSlo7QUFLakJyQixFQUFBQSxlQUFlLEVBQUVvQixzQkFBVUUsS0FBVixDQUFnQixDQUFDLElBQUQsRUFBTyxLQUFQLEVBQWMsTUFBZCxFQUFzQixRQUF0QixDQUFoQixDQUxBO0FBTWpCVixFQUFBQSxRQUFRLEVBQUVRLHNCQUFVRyxJQU5IO0FBT2pCdEMsRUFBQUEsa0JBQWtCLEVBQUVtQyxzQkFBVUksU0FBVixDQUFvQixDQUFDSixzQkFBVUssTUFBWCxFQUFtQkwsc0JBQVVNLElBQTdCLENBQXBCLENBUEg7QUFRakJYLEVBQUFBLE9BQU8sRUFBRUssc0JBQVVHLElBUkY7QUFTakJuRyxFQUFBQSxRQUFRLEVBQUVnRyxzQkFBVUMsSUFUSDtBQVVqQlAsRUFBQUEsU0FBUyxFQUFFTSxzQkFBVUssTUFWSjtBQVdqQmhLLEVBQUFBLGNBQWMsRUFBRTJKLHNCQUFVQyxJQVhUO0FBWWpCM0osRUFBQUEsSUFBSSxFQUFFMEosc0JBQVVDLElBWkM7QUFhakJ2SCxFQUFBQSxZQUFZLEVBQUVzSCxzQkFBVUMsSUFiUDtBQWNqQnpELEVBQUFBLE9BQU8sRUFBRXdELHNCQUFVTSxJQWRGO0FBZWpCL0QsRUFBQUEsWUFBWSxFQUFFeUQsc0JBQVVNLElBZlA7QUFnQmpCakUsRUFBQUEsTUFBTSxFQUFFMkQsc0JBQVVNLElBaEJEO0FBaUJqQjNFLEVBQUFBLFdBQVcsRUFBRXFFLHNCQUFVTSxJQWpCTjtBQWtCakJqSCxFQUFBQSxXQUFXLEVBQUUyRyxzQkFBVU0sSUFsQk47QUFtQmpCMUMsRUFBQUEsZ0JBQWdCLEVBQUVvQyxzQkFBVUksU0FBVixDQUFvQixDQUFDSixzQkFBVUssTUFBWCxFQUFtQkwsc0JBQVVNLElBQTdCLENBQXBCLENBbkJEO0FBb0JqQjNCLEVBQUFBLFlBQVksRUFBRXFCLHNCQUFVSyxNQXBCUDtBQXFCakIzQyxFQUFBQSxZQUFZLEVBQUVzQyxzQkFBVUssTUFyQlA7QUFzQmpCMUMsRUFBQUEsV0FBVyxFQUFFcUMsc0JBQVVLLE1BdEJOO0FBdUJqQjlKLEVBQUFBLElBQUksRUFBRXlKLHNCQUFVRSxLQUFWLENBQWdCLENBQUMsTUFBRCxFQUFTLE9BQVQsRUFBa0IsS0FBbEIsRUFBeUIsUUFBekIsQ0FBaEIsQ0F2Qlc7QUF3QmpCeEssRUFBQUEsTUFBTSxFQUFFc0ssc0JBQVVPLE1BeEJEO0FBeUJqQjlGLEVBQUFBLFVBQVUsRUFBRXVGLHNCQUFVQyxJQXpCTDtBQTBCakJuRSxFQUFBQSxhQUFhLEVBQUVrRSxzQkFBVUssTUExQlI7QUEyQmpCckUsRUFBQUEsV0FBVyxFQUFFZ0Usc0JBQVVRLE1BM0JOO0FBNEJqQnpJLEVBQUFBLFlBQVksRUFBRWlJLHNCQUFVTSxJQTVCUDtBQTZCakI5SixFQUFBQSxJQUFJLEVBQUV3SixzQkFBVUUsS0FBVixDQUFnQixDQUFDLFNBQUQsRUFBWSxRQUFaLEVBQXNCLFVBQXRCLENBQWhCLENBN0JXO0FBOEJqQmxCLEVBQUFBLHFCQUFxQixFQUFFZ0Isc0JBQVVDLElBOUJoQjtBQWlDakJ6QixFQUFBQSxvQkFBb0IsRUFBRXdCLHNCQUFVQyxJQWpDZjtBQWtDakIvQixFQUFBQSxtQkFBbUIsRUFBRThCLHNCQUFVUztBQWxDZCxDO0FBMUJBdE0sTSxDQStEWnVNLFksR0FBZTtBQUNwQnBLLEVBQUFBLElBQUksRUFBRSxJQURjO0FBRXBCRCxFQUFBQSxjQUFjLEVBQUUsS0FGSTtBQUlwQkcsRUFBQUEsSUFBSSxFQUFFLFVBSmM7QUFLcEJxSCxFQUFBQSxrQkFBa0IsRUFBRSxDQUxBO0FBTXBCRCxFQUFBQSxnQkFBZ0IsRUFBRSxDQU5FO0FBT3BCZSxFQUFBQSxZQUFZLEVBQUUsSUFQTTtBQVFwQmhCLEVBQUFBLFdBQVcsRUFBRSxJQVJPO0FBU3BCRCxFQUFBQSxZQUFZLEVBQUUsSUFUTTtBQVdwQjNGLEVBQUFBLFlBQVksRUFBRSxJQVhNO0FBWXBCK0QsRUFBQUEsYUFBYSxFQUFFLEdBWks7QUFhcEJFLEVBQUFBLFdBQVcsRUFBRSxRQWJPO0FBZXBCaEMsRUFBQUEsUUFBUSxFQUFFLEtBZlU7QUFnQnBCdEIsRUFBQUEsWUFBWSxFQUFFLEtBaEJNO0FBaUJwQmtHLEVBQUFBLGVBQWUsRUFBRSxNQWpCRztBQWtCcEJsRSxFQUFBQSxlQUFlLEVBQUUsS0FsQkc7QUFtQnBCRixFQUFBQSxTQUFTLEVBQUUsS0FuQlM7QUFvQnBCM0IsRUFBQUEsU0FBUyxFQUFFLElBcEJTO0FBcUJwQmtCLEVBQUFBLGlCQUFpQixFQUFFLElBckJDO0FBc0JwQlUsRUFBQUEsVUFBVSxFQUFFLEtBdEJRO0FBd0JwQi9FLEVBQUFBLE1BQU0sRUFBRSxFQXhCWTtBQXlCcEJnSyxFQUFBQSxTQUFTLEVBQUUsQ0F6QlM7QUEwQnBCckQsRUFBQUEsTUFBTSxFQUFFLGtCQUFNLENBQUUsQ0ExQkk7QUEyQnBCRyxFQUFBQSxPQUFPLEVBQUUsbUJBQU0sQ0FBRSxDQTNCRztBQTRCcEJqRyxFQUFBQSxJQUFJLEVBQUUsTUE1QmM7QUE4QnBCeUksRUFBQUEscUJBQXFCLEVBQUU7QUE5QkgsQztBQS9ESDdLLE0sQ0FpR1p3TSxZLEdBQWU7QUFBRXhMLEVBQUFBLE1BQU0sRUFBRTZLLHNCQUFVTztBQUFwQixDO0FBakdIcE0sTSxDQWtHWnlNLGlCLEdBQW9CO0FBQUV6TCxFQUFBQSxNQUFNLEVBQUU2SyxzQkFBVU87QUFBcEIsQzs7QUF5ZjdCLElBQU03SyxNQUFNLEdBQUdrQix3QkFBV0MsTUFBWCxDQUFrQjtBQUMvQjRJLEVBQUFBLE9BQU8sRUFBRTtBQUNQb0IsSUFBQUEsS0FBSyxFQUFFLENBREE7QUFFUHpLLElBQUFBLElBQUksRUFBRSxDQUZDO0FBR1BELElBQUFBLEdBQUcsRUFBRSxDQUhFO0FBSVAySyxJQUFBQSxNQUFNLEVBQUUsQ0FKRDtBQUtQOUssSUFBQUEsUUFBUSxFQUFFLFVBTEg7QUFNUCtLLElBQUFBLGVBQWUsRUFBRTtBQU5WO0FBRHNCLENBQWxCLENBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgUGFuUmVzcG9uZGVyLCBWaWV3LCBTdHlsZVNoZWV0LCBEaW1lbnNpb25zLCBJbnRlcmFjdGlvbk1hbmFnZXIsIEkxOG5NYW5hZ2VyIH0gZnJvbSAncmVhY3QtbmF0aXZlJ1xuXG5pbXBvcnQgdHdlZW4gZnJvbSAnLi90d2VlbmVyJ1xuXG5sZXQgZGV2aWNlU2NyZWVuID0gRGltZW5zaW9ucy5nZXQoJ3dpbmRvdycpXG5jb25zdCBET1VCTEVfVEFQX0lOVEVSVkFMID0gNTAwXG5jb25zdCBUQVBfRFVSQVRJT04gPSAyNTBcbmNvbnN0IHByb3BzV2hvbVJlcXVpcmVVcGRhdGUgPSBbJ2Nsb3NlZERyYXdlck9mZnNldCcsICdvcGVuRHJhd2VyT2Zmc2V0JywgJ3R5cGUnLCAnc3R5bGVzJ11cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJhd2VyIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICBfbGVuZ3RoID0gMDtcbiAgX3ByZXZMZW5ndGggPSAwO1xuICBfb2Zmc2V0T3BlbiA9IDA7XG4gIF9vZmZzZXRDbG9zZWQgPSAwO1xuICBfb3BlbiA9IGZhbHNlO1xuICBfcGFubmluZyA9IGZhbHNlO1xuICBfdHdlZW5QZW5kaW5nID0gZmFsc2U7XG4gIF9hY3RpdmVUd2VlbiA9IG51bGw7XG4gIF9sYXN0UHJlc3MgPSAwO1xuICBfcGFuU3RhcnRUaW1lID0gMDtcbiAgX3N5bmNBZnRlclVwZGF0ZSA9IGZhbHNlO1xuICBfaW50ZXJhY3Rpb25IYW5kbGUgPSBudWxsO1xuXG4gIHN0YXRpYyB0d2VlblByZXNldHMgPSB7XG4gICAgcGFyYWxsYXg6IChyYXRpbywgc2lkZSA9ICdsZWZ0JykgPT4ge1xuICAgICAgbGV0IGRyYXdlciA9IHsgW3NpZGVdIDogLTE1MCAqICgxIC0gcmF0aW8pfVxuICAgICAgcmV0dXJuIHsgZHJhd2VyIH1cbiAgICB9XG4gIH07XG5cbiAgc3RhdGUgPSB7XG4gICAgdmlld3BvcnQ6IGRldmljZVNjcmVlblxuICB9O1xuXG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgYWNjZXB0RG91YmxlVGFwOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBhY2NlcHRQYW46IFByb3BUeXBlcy5ib29sLFxuICAgIGFjY2VwdFRhcDogUHJvcFR5cGVzLmJvb2wsXG4gICAgYWNjZXB0UGFuT25EcmF3ZXI6IFByb3BUeXBlcy5ib29sLFxuICAgIGNhcHR1cmVHZXN0dXJlczogUHJvcFR5cGVzLm9uZU9mKFt0cnVlLCBmYWxzZSwgJ29wZW4nLCAnY2xvc2VkJ10pLFxuICAgIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbiAgICBjbG9zZWREcmF3ZXJPZmZzZXQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5udW1iZXIsIFByb3BUeXBlcy5mdW5jXSksXG4gICAgY29udGVudDogUHJvcFR5cGVzLm5vZGUsXG4gICAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIGVsZXZhdGlvbjogUHJvcFR5cGVzLm51bWJlcixcbiAgICBpbml0aWFsaXplT3BlbjogUHJvcFR5cGVzLmJvb2wsXG4gICAgb3BlbjogUHJvcFR5cGVzLmJvb2wsXG4gICAgbmVnb3RpYXRlUGFuOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBvbkNsb3NlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvbkNsb3NlU3RhcnQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uT3BlbjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25PcGVuU3RhcnQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uRHJhZ1N0YXJ0OiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvcGVuRHJhd2VyT2Zmc2V0OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMubnVtYmVyLCBQcm9wVHlwZXMuZnVuY10pLFxuICAgIHBhblRocmVzaG9sZDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBwYW5DbG9zZU1hc2s6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgcGFuT3Blbk1hc2s6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgc2lkZTogUHJvcFR5cGVzLm9uZU9mKFsnbGVmdCcsICdyaWdodCcsICd0b3AnLCAnYm90dG9tJ10pLFxuICAgIHN0eWxlczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB0YXBUb0Nsb3NlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICB0d2VlbkR1cmF0aW9uOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIHR3ZWVuRWFzaW5nOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHR3ZWVuSGFuZGxlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgdHlwZTogUHJvcFR5cGVzLm9uZU9mKFsnb3ZlcmxheScsICdzdGF0aWMnLCAnZGlzcGxhY2UnXSksXG4gICAgdXNlSW50ZXJhY3Rpb25NYW5hZ2VyOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8vIGRlcHJlY2F0ZWRcbiAgICBwYW5TdGFydENvbXBlbnNhdGlvbjogUHJvcFR5cGVzLmJvb2wsXG4gICAgb3BlbkRyYXdlclRocmVzaG9sZDogUHJvcFR5cGVzLmFueSxcbiAgfTtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIG9wZW46IG51bGwsXG4gICAgaW5pdGlhbGl6ZU9wZW46IGZhbHNlLFxuXG4gICAgdHlwZTogJ2Rpc3BsYWNlJyxcbiAgICBjbG9zZWREcmF3ZXJPZmZzZXQ6IDAsXG4gICAgb3BlbkRyYXdlck9mZnNldDogMCxcbiAgICBwYW5UaHJlc2hvbGQ6IDAuMjUsIC8vIEBUT0RPIGNvbnNpZGVyIHJlbmFtZSB0byBwYW5UaHJlc2hvbGRcbiAgICBwYW5PcGVuTWFzazogbnVsbCwgLy8gZGVmYXVsdHMgdG8gY2xvc2VkRHJhd2VyT2Zmc2V0XG4gICAgcGFuQ2xvc2VNYXNrOiBudWxsLCAvLyBkZWZhdWx0cyB0byBvcGVuRHJhd2VyT2Zmc2V0XG5cbiAgICB0d2VlbkhhbmRsZXI6IG51bGwsXG4gICAgdHdlZW5EdXJhdGlvbjogMjUwLFxuICAgIHR3ZWVuRWFzaW5nOiAnbGluZWFyJyxcblxuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICBuZWdvdGlhdGVQYW46IGZhbHNlLFxuICAgIGNhcHR1cmVHZXN0dXJlczogJ29wZW4nLFxuICAgIGFjY2VwdERvdWJsZVRhcDogZmFsc2UsXG4gICAgYWNjZXB0VGFwOiBmYWxzZSxcbiAgICBhY2NlcHRQYW46IHRydWUsXG4gICAgYWNjZXB0UGFuT25EcmF3ZXI6IHRydWUsXG4gICAgdGFwVG9DbG9zZTogZmFsc2UsXG5cbiAgICBzdHlsZXM6IHt9LFxuICAgIGVsZXZhdGlvbjogMCxcbiAgICBvbk9wZW46ICgpID0+IHt9LFxuICAgIG9uQ2xvc2U6ICgpID0+IHt9LFxuICAgIHNpZGU6ICdsZWZ0JyxcblxuICAgIHVzZUludGVyYWN0aW9uTWFuYWdlcjogZmFsc2UsXG4gIH07XG5cbiAgLyoqKiBDT05URVhUICoqKi9cbiAgc3RhdGljIGNvbnRleHRUeXBlcyA9IHsgZHJhd2VyOiBQcm9wVHlwZXMub2JqZWN0IH07XG4gIHN0YXRpYyBjaGlsZENvbnRleHRUeXBlcyA9IHsgZHJhd2VyOiBQcm9wVHlwZXMub2JqZWN0IH07XG4gIGdldENoaWxkQ29udGV4dCA9ICgpID0+ICh7IGRyYXdlcjogdGhpcyB9KTtcbiAgLyoqKiBFTkQgQ09OVEVYVCAqKiovXG5cbiAgX3JlZ2lzdGVyQ2hpbGREcmF3ZXIoZHJhd2VyKSB7XG4gICAgLy8gU3RvcmUgY2hpbGQgZHJhd2VyIGZvciBnZXN0dXJlIGRpc2FtYmlndWF0aW9uIHdpdGggbXVsdGkgZHJhd2VyXG4gICAgLy8gQFRPRE8gbWFrZSBjbGVhbmVyLCBnZW5lcmFsaXplIHRvIHdvcmsgd2l0aCAzKyBkcmF3ZXJzLCBwcm9wIHRvIGRpc2FibGUvY29uZmlndXJlXG4gICAgdGhpcy5fY2hpbGREcmF3ZXIgPSBkcmF3ZXJcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBpZiAodGhpcy5jb250ZXh0LmRyYXdlcikgdGhpcy5jb250ZXh0LmRyYXdlci5fcmVnaXN0ZXJDaGlsZERyYXdlcih0aGlzKVxuICAgIGlmICh0aGlzLnByb3BzLm9wZW5EcmF3ZXJUaHJlc2hvbGQgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgY29uc29sZS5lcnJvcigncmVhY3QtbmF0aXZlLWRyYXdlcjogb3BlbkRyYXdlclRocmVzaG9sZCBpcyBvYnNvbGV0ZS4gVXNlIHBhblRocmVzaG9sZCBpbnN0ZWFkLicpXG4gICAgaWYgKHRoaXMucHJvcHMucGFuU3RhcnRDb21wZW5zYXRpb24gJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgY29uc29sZS5lcnJvcigncmVhY3QtbmF0aXZlLWRyYXdlcjogcGFuU3RhcnRDb21wZW5zYXRpb24gaXMgZGVwcmVjYXRlZC4nKVxuICAgIGlmICh0aGlzLnByb3BzLnJlbGF0aXZlRHJhZyAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBjb25zb2xlLmVycm9yKCdyZWFjdC1uYXRpdmUtZHJhd2VyOiByZWxhdGl2ZURyYWcgaXMgZGVwcmVjYXRlZC4nKVxuICAgIHRoaXMuaW5pdGlhbGl6ZSh0aGlzLnByb3BzKVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICBpZiAodGhpcy5yZXF1aXJlc1Jlc3luYyhuZXh0UHJvcHMpKSB0aGlzLnJlc3luYyhudWxsLCBuZXh0UHJvcHMpXG5cbiAgICBpZiAobmV4dFByb3BzLm9wZW4gIT09IG51bGwgJiYgdGhpcy5fb3BlbiAhPT0gbmV4dFByb3BzLm9wZW4pIHtcbiAgICAgIHRoaXMuX3N5bmNBZnRlclVwZGF0ZSA9IHRydWVcbiAgICAgIHRoaXMuX29wZW4gPSBuZXh0UHJvcHMub3BlblxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICBpZiAodGhpcy5fc3luY0FmdGVyVXBkYXRlKSB7XG4gICAgICB0aGlzLl9zeW5jQWZ0ZXJVcGRhdGUgPSBmYWxzZVxuICAgICAgdGhpcy5fb3BlbiA/IHRoaXMub3BlbignZm9yY2UnKSA6IHRoaXMuY2xvc2UoJ2ZvcmNlJylcbiAgICB9XG4gIH1cblxuICBpbml0aWFsaXplID0gKHByb3BzKSA9PiB7XG4gICAgbGV0IGZ1bGxMZW5ndGggPSB0aGlzLmdldERldmljZUxlbmd0aCgpO1xuICAgIHRoaXMuX29mZnNldENsb3NlZCA9IHRoaXMuZ2V0Q2xvc2VkT2Zmc2V0KHByb3BzLCB0aGlzLnN0YXRlLnZpZXdwb3J0KVxuICAgIHRoaXMuX29mZnNldE9wZW4gPSB0aGlzLmdldE9wZW5PZmZzZXQocHJvcHMsIHRoaXMuc3RhdGUudmlld3BvcnQpXG4gICAgLy8gYWRkIGZ1bmN0aW9uIG9wdGlvbnNcbiAgICB0aGlzLl9wcmV2TGVuZ3RoID0gdGhpcy5fbGVuZ3RoXG5cbiAgICBsZXQgc3R5bGVzID0ge1xuICAgICAgY29udGFpbmVyOiB7XG4gICAgICAgIGZsZXg6IDEsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICB9LFxuICAgIH1cblxuICAgIHN0eWxlcy5tYWluID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIGJvcmRlcldpZHRoOiAwLFxuICAgIH0sIHRoaXMuaXNMZWZ0T3JSaWdodFNpZGUoKSA/IHt0b3A6IDB9IDoge2xlZnQ6IDB9LCB0aGlzLnByb3BzLnN0eWxlcy5tYWluKVxuXG4gICAgc3R5bGVzLmRyYXdlciA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBib3JkZXJXaWR0aDowLFxuICAgIH0sIHRoaXMuaXNMZWZ0T3JSaWdodFNpZGUoKSA/IHt0b3A6IDB9IDoge2xlZnQ6IDB9LCB0aGlzLnByb3BzLnN0eWxlcy5kcmF3ZXIpXG5cbiAgICBpZiAocHJvcHMuaW5pdGlhbGl6ZU9wZW4gfHwgcHJvcHMub3BlbikgeyAvLyBvcGVuXG4gICAgICB0aGlzLl9vcGVuID0gdHJ1ZVxuICAgICAgdGhpcy5fbGVuZ3RoID0gZnVsbExlbmd0aCAtIHRoaXMuX29mZnNldE9wZW5cbiAgICAgIHN0eWxlcy5tYWluW3RoaXMucHJvcHMuc2lkZV0gPSAwXG4gICAgICBzdHlsZXMuZHJhd2VyW3RoaXMucHJvcHMuc2lkZV0gPSAwXG4gICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ3N0YXRpYycpIHN0eWxlcy5tYWluW3RoaXMucHJvcHMuc2lkZV0gPSBmdWxsTGVuZ3RoIC0gdGhpcy5fb2Zmc2V0T3BlblxuICAgICAgaWYgKHByb3BzLnR5cGUgPT09ICdkaXNwbGFjZScpIHN0eWxlcy5tYWluW3RoaXMucHJvcHMuc2lkZV0gPSBmdWxsTGVuZ3RoIC0gdGhpcy5fb2Zmc2V0T3BlblxuICAgIH0gZWxzZSB7IC8vIGNsb3NlZFxuICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlXG4gICAgICB0aGlzLl9sZW5ndGggPSB0aGlzLl9vZmZzZXRDbG9zZWRcbiAgICAgIHN0eWxlcy5tYWluW3RoaXMucHJvcHMuc2lkZV0gPSB0aGlzLl9vZmZzZXRDbG9zZWRcbiAgICAgIGlmIChwcm9wcy50eXBlID09PSAnc3RhdGljJykgc3R5bGVzLmRyYXdlclt0aGlzLnByb3BzLnNpZGVdID0gMFxuICAgICAgaWYgKHByb3BzLnR5cGUgPT09ICdvdmVybGF5Jykgc3R5bGVzLmRyYXdlclt0aGlzLnByb3BzLnNpZGVdID0gdGhpcy5fb2Zmc2V0Q2xvc2VkICsgdGhpcy5fb2Zmc2V0T3BlbiAtIGZ1bGxMZW5ndGhcbiAgICAgIGlmIChwcm9wcy50eXBlID09PSAnZGlzcGxhY2UnKSBzdHlsZXMuZHJhd2VyW3RoaXMucHJvcHMuc2lkZV0gPSAtIGZ1bGxMZW5ndGggKyB0aGlzLl9vZmZzZXRDbG9zZWQgKyB0aGlzLl9vZmZzZXRPcGVuXG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWFpbikge1xuICAgICAgdGhpcy5kcmF3ZXIuc2V0TmF0aXZlUHJvcHMoeyBzdHlsZToge2xlZnQ6IHN0eWxlcy5kcmF3ZXIubGVmdH19KVxuICAgICAgdGhpcy5tYWluLnNldE5hdGl2ZVByb3BzKHsgc3R5bGU6IHtsZWZ0OiBzdHlsZXMubWFpbi5sZWZ0fX0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3R5bGVzaGVldCA9IFN0eWxlU2hlZXQuY3JlYXRlKHN0eWxlcylcbiAgICAgIHRoaXMucmVzcG9uZGVyID0gUGFuUmVzcG9uZGVyLmNyZWF0ZSh7XG4gICAgICAgIG9uU3RhcnRTaG91bGRTZXRQYW5SZXNwb25kZXI6IHRoaXMub25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlcixcbiAgICAgICAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmU6IHRoaXMub25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmUsXG4gICAgICAgIG9uTW92ZVNob3VsZFNldFBhblJlc3BvbmRlcjogdGhpcy5vbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXIsXG4gICAgICAgIG9uTW92ZVNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmU6IHRoaXMub25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZSxcbiAgICAgICAgb25QYW5SZXNwb25kZXJNb3ZlOiB0aGlzLm9uUGFuUmVzcG9uZGVyTW92ZSxcbiAgICAgICAgb25QYW5SZXNwb25kZXJSZWxlYXNlOiB0aGlzLm9uUGFuUmVzcG9uZGVyUmVsZWFzZSxcblx0b25QYW5SZXNwb25kZXJUZXJtaW5hdGU6IHRoaXMub25QYW5SZXNwb25kZXJUZXJtaW5hdGVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5yZXN5bmMobnVsbCwgcHJvcHMpXG4gIH07XG5cbiAgdXBkYXRlUG9zaXRpb24gPSAoKSA9PiB7XG4gICAgbGV0IG1haW5Qcm9wcyA9IHt9XG4gICAgbGV0IGRyYXdlclByb3BzID0ge31cbiAgICBsZXQgcmF0aW8gPSAodGhpcy5fbGVuZ3RoIC0gdGhpcy5fb2Zmc2V0Q2xvc2VkKSAvICh0aGlzLmdldE9wZW5MZW5ndGgoKSAtIHRoaXMuX29mZnNldENsb3NlZClcblxuICAgIHN3aXRjaCAodGhpcy5wcm9wcy50eXBlKSB7XG4gICAgICBjYXNlICdvdmVybGF5JzpcbiAgICAgICAgZHJhd2VyUHJvcHNbdGhpcy5wcm9wcy5zaWRlXSA9IC10aGlzLmdldERldmljZUxlbmd0aCgpICsgdGhpcy5fb2Zmc2V0T3BlbiArIHRoaXMuX2xlbmd0aFxuICAgICAgICBtYWluUHJvcHNbdGhpcy5wcm9wcy5zaWRlXSA9IHRoaXMuX29mZnNldENsb3NlZFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3RhdGljJzpcbiAgICAgICAgbWFpblByb3BzW3RoaXMucHJvcHMuc2lkZV0gPSB0aGlzLl9sZW5ndGhcbiAgICAgICAgZHJhd2VyUHJvcHNbdGhpcy5wcm9wcy5zaWRlXSA9IDBcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2Rpc3BsYWNlJzpcbiAgICAgICAgbWFpblByb3BzW3RoaXMucHJvcHMuc2lkZV0gPSB0aGlzLl9sZW5ndGhcbiAgICAgICAgZHJhd2VyUHJvcHNbdGhpcy5wcm9wcy5zaWRlXSA9IC10aGlzLmdldERldmljZUxlbmd0aCgpICsgdGhpcy5fbGVuZ3RoICsgdGhpcy5fb2Zmc2V0T3BlblxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGxldCBtYWluT3ZlcmxheVByb3BzID0gbnVsbFxuICAgIGxldCBkcmF3ZXJPdmVybGF5UHJvcHMgPSBudWxsXG4gICAgaWYgKHRoaXMucHJvcHMudHdlZW5IYW5kbGVyKSB7XG4gICAgICBsZXQgcHJvcHNGcmFnID0gdGhpcy5wcm9wcy50d2VlbkhhbmRsZXIocmF0aW8sIHRoaXMucHJvcHMuc2lkZSlcbiAgICAgIG1haW5Qcm9wcyA9IE9iamVjdC5hc3NpZ24obWFpblByb3BzLCBwcm9wc0ZyYWcubWFpbilcbiAgICAgIGRyYXdlclByb3BzID0gT2JqZWN0LmFzc2lnbihkcmF3ZXJQcm9wcywgcHJvcHNGcmFnLmRyYXdlcilcbiAgICAgIG1haW5PdmVybGF5UHJvcHMgPSBwcm9wc0ZyYWcubWFpbk92ZXJsYXlcbiAgICAgIGRyYXdlck92ZXJsYXlQcm9wcyA9IHByb3BzRnJhZy5kcmF3ZXJPdmVybGF5XG4gICAgfVxuICAgIGlmICh0aGlzLm1haW4gJiYgdGhpcy5kcmF3ZXIgJiYgdGhpcy5tYWluT3ZlcmxheSAmJiB0aGlzLmRyYXdlck92ZXJsYXkpIHtcbiAgICAgIHRoaXMuZHJhd2VyLnNldE5hdGl2ZVByb3BzKHtzdHlsZTogZHJhd2VyUHJvcHN9KVxuICAgICAgdGhpcy5tYWluLnNldE5hdGl2ZVByb3BzKHtzdHlsZTogbWFpblByb3BzfSlcbiAgICAgIGlmIChtYWluT3ZlcmxheVByb3BzKSB0aGlzLm1haW5PdmVybGF5LnNldE5hdGl2ZVByb3BzKHtzdHlsZTogbWFpbk92ZXJsYXlQcm9wc30pXG4gICAgICBpZiAoZHJhd2VyT3ZlcmxheVByb3BzKSB0aGlzLmRyYXdlck92ZXJsYXkuc2V0TmF0aXZlUHJvcHMoe3N0eWxlOiBkcmF3ZXJPdmVybGF5UHJvcHN9KVxuICAgIH1cbiAgfTtcblxuICBzaG91bGRPcGVuRHJhd2VyKGRlbHRhKSB7XG4gICAgbGV0IGhhc0FjdGl2ZUhlYWRpbmcgPSB0aGlzLl9vcGVuIF4gZGVsdGEgPiAwIF4gdGhpcy5pc1JpZ2h0T3JCb3R0b21TaWRlKClcbiAgICBpZiAoIWhhc0FjdGl2ZUhlYWRpbmcpIHJldHVybiB0aGlzLl9vcGVuXG4gICAgZWxzZSByZXR1cm4gdGhpcy5fb3BlbiBeIE1hdGguYWJzKGRlbHRhKSA+IHRoaXMuZ2V0RGV2aWNlTGVuZ3RoKCkgKiB0aGlzLnByb3BzLnBhblRocmVzaG9sZFxuICB9XG5cbiAgb25QYW5SZXNwb25kZXJUZXJtaW5hdGUgPSAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7XG4gICAgdGhpcy5fcGFubmluZyA9IGZhbHNlXG4gICAgdGhpcy5zaG91bGRPcGVuRHJhd2VyKHRoaXMuZ2V0R2VzdHVyZURlbHRhKGdlc3R1cmVTdGF0ZSkpID8gdGhpcy5vcGVuKCkgOiB0aGlzLmNsb3NlKClcbiAgfTtcblxuICBvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZSA9IChlLCBnZXN0dXJlU3RhdGUpID0+IHtcbiAgICBpZiAodGhpcy5zaG91bGRDYXB0dXJlR2VzdHVyZXMoKSkgcmV0dXJuIHRoaXMucHJvY2Vzc1Nob3VsZFNldChlLCBnZXN0dXJlU3RhdGUpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH07XG5cbiAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlciA9IChlLCBnZXN0dXJlU3RhdGUpID0+IHtcbiAgICBpZiAoIXRoaXMuc2hvdWxkQ2FwdHVyZUdlc3R1cmVzKCkpIHJldHVybiB0aGlzLnByb2Nlc3NTaG91bGRTZXQoZSwgZ2VzdHVyZVN0YXRlKVxuICAgIHJldHVybiBmYWxzZVxuICB9O1xuXG4gIG9uTW92ZVNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmUgPSAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7XG4gICAgaWYgKHRoaXMuc2hvdWxkQ2FwdHVyZUdlc3R1cmVzKCkgJiYgdGhpcy5wcm9wcy5uZWdvdGlhdGVQYW4pIHJldHVybiB0aGlzLnByb2Nlc3NNb3ZlU2hvdWxkU2V0KGUsIGdlc3R1cmVTdGF0ZSlcbiAgICByZXR1cm4gZmFsc2VcbiAgfTtcblxuICBvbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXIgPSAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7XG4gICAgaWYgKCF0aGlzLnNob3VsZENhcHR1cmVHZXN0dXJlcygpICYmIHRoaXMucHJvcHMubmVnb3RpYXRlUGFuKSByZXR1cm4gdGhpcy5wcm9jZXNzTW92ZVNob3VsZFNldChlLCBnZXN0dXJlU3RhdGUpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH07XG5cbiAgb25QYW5SZXNwb25kZXJNb3ZlID0gKGUsIGdlc3R1cmVTdGF0ZSkgPT4ge1xuICAgIGxldCBkZWx0YSA9IHRoaXMuZ2V0R2VzdHVyZURlbHRhKGdlc3R1cmVTdGF0ZSk7XG4gICAgaWYgKCF0aGlzLnByb3BzLmFjY2VwdFBhbikgcmV0dXJuIGZhbHNlXG5cbiAgICAvL0RvIG5vdGhpbmcgaWYgd2UgYXJlIHBhbm5pbmcgdGhlIHdyb25nIHdheVxuICAgIGlmICh0aGlzLl9vcGVuIF4gZGVsdGEgPCAwIF4gdGhpcy5pc1JpZ2h0T3JCb3R0b21TaWRlKCkpIHJldHVybiBmYWxzZVxuXG4gICAgZGVsdGEgPSB0aGlzLmlzUmlnaHRPckJvdHRvbVNpZGUoKSA/IGRlbHRhICogLTEgOiBkZWx0YVxuICAgIGxldCBsZW5ndGggPSB0aGlzLl9wcmV2TGVuZ3RoICsgZGVsdGFcbiAgICBsZW5ndGggPSBNYXRoLm1pbihsZW5ndGgsIHRoaXMuZ2V0T3Blbkxlbmd0aCgpKVxuICAgIGxlbmd0aCA9IE1hdGgubWF4KGxlbmd0aCwgdGhpcy5nZXRDbG9zZWRMZW5ndGgoKSlcbiAgICBsZW5ndGggPSBNYXRoLnJvdW5kKGxlbmd0aCoyKS8yXG4gICAgdGhpcy5fbGVuZ3RoID0gbGVuZ3RoXG5cbiAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKClcbiAgICBpZiAoIXRoaXMuX3Bhbm5pbmcpIHtcbiAgICAgIHRoaXMucHJvcHMub25EcmFnU3RhcnQgJiYgdGhpcy5wcm9wcy5vbkRyYWdTdGFydCgpO1xuICAgIH1cbiAgICB0aGlzLl9wYW5uaW5nID0gdHJ1ZVxuICB9O1xuXG4gIG9uUGFuUmVzcG9uZGVyUmVsZWFzZSA9IChlLCBnZXN0dXJlU3RhdGUpID0+IHtcbiAgICBsZXQgZGVsdGEgPSB0aGlzLmdldEdlc3R1cmVEZWx0YShnZXN0dXJlU3RhdGUpO1xuICAgIHRoaXMuX3Bhbm5pbmcgPSBmYWxzZVxuICAgIGlmIChEYXRlLm5vdygpIC0gdGhpcy5fcGFuU3RhcnRUaW1lIDwgVEFQX0RVUkFUSU9OKSB0aGlzLnByb2Nlc3NUYXBHZXN0dXJlcygpXG4gICAgaWYgKE1hdGguYWJzKGRlbHRhKSA8IDUwICYmIHRoaXMuX2FjdGl2ZVR3ZWVuKSByZXR1cm5cblxuICAgIHRoaXMuc2hvdWxkT3BlbkRyYXdlcihkZWx0YSkgPyB0aGlzLm9wZW4oKSA6IHRoaXMuY2xvc2UoKVxuICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKVxuICAgIHRoaXMuX3ByZXZMZW5ndGggPSB0aGlzLl9sZW5ndGhcbiAgfTtcblxuICBwcm9jZXNzU2hvdWxkU2V0ID0gKGUsIGdlc3R1cmVTdGF0ZSkgPT4ge1xuICAgIGxldCBpbk1hc2sgPSB0aGlzLnRlc3RQYW5SZXNwb25kZXJNYXNrKGUsIGdlc3R1cmVTdGF0ZSlcbiAgICBpZiAoIWluTWFzaykgcmV0dXJuIGZhbHNlXG4gICAgLy8gc2tpcCBnZXN0dXJlIHByb2Nlc3MgaWYgd2UgaGF2ZSBtb3N0bHkgdmVydGljYWwgc3dpcGVcbiAgICBpZiAoIXRoaXMuX29wZW4gJiYgTWF0aC5hYnMoZ2VzdHVyZVN0YXRlLmR5KSA+PSBNYXRoLmFicyhnZXN0dXJlU3RhdGUuZHgpKSByZXR1cm4gZmFsc2VcbiAgICB0aGlzLl9wYW5TdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgaWYgKGluTWFzayAmJiB0aGlzLnNob3VsZENhcHR1cmVHZXN0dXJlcygpKSByZXR1cm4gdHJ1ZVxuICAgIGlmICh0aGlzLnByb3BzLm5lZ290aWF0ZVBhbikgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCF0aGlzLnByb3BzLmFjY2VwdFBhbikgcmV0dXJuIGZhbHNlXG4gICAgdGhpcy50ZXJtaW5hdGVBY3RpdmVUd2VlbigpXG4gICAgcmV0dXJuIHRydWVcbiAgfTtcblxuICBwcm9jZXNzTW92ZVNob3VsZFNldCA9IChlLCBnZXN0dXJlU3RhdGUpID0+IHtcbiAgICBsZXQgaW5NYXNrID0gdGhpcy50ZXN0UGFuUmVzcG9uZGVyTWFzayhlLCBnZXN0dXJlU3RhdGUpXG4gICAgaWYgKCFpbk1hc2sgJiYgKCF0aGlzLnByb3BzLmFjY2VwdFBhbk9uRHJhd2VyIHx8IHRoaXMuX29wZW4gPT09IGZhbHNlICkpIHJldHVybiBmYWxzZVxuICAgIGlmICghdGhpcy5wcm9wcy5hY2NlcHRQYW4pIHJldHVybiBmYWxzZVxuXG4gICAgaWYgKCF0aGlzLnByb3BzLm5lZ290aWF0ZVBhbiB8fCB0aGlzLnByb3BzLmRpc2FibGVkIHx8ICF0aGlzLnByb3BzLmFjY2VwdFBhbiB8fCB0aGlzLl9wYW5uaW5nKSByZXR1cm4gZmFsc2VcbiAgICBsZXQgZGVsdGEgPSB0aGlzLmdldEdlc3R1cmVEZWx0YShnZXN0dXJlU3RhdGUpXG4gICAgbGV0IGRlbHRhT3Bwb3NpdGVBeGlzID0gdGhpcy5nZXRHZXN0dXJlRGVsdGFPcHBvc2l0ZUF4aXMoZ2VzdHVyZVN0YXRlKVxuICAgIGxldCBzd2lwZVRvTGVmdE9yVG9wID0gKGRlbHRhIDwgMCkgPyB0cnVlIDogZmFsc2VcbiAgICBsZXQgc3dpcGVUb1JpZ2h0T3JCb3R0b20gPSAoZGVsdGEgPiAwKSA/IHRydWUgOiBmYWxzZVxuICAgIGxldCBzd2lwZU9wcG9zaXRlQXhpcyA9IChNYXRoLmFicyhkZWx0YU9wcG9zaXRlQXhpcykgPj0gTWF0aC5hYnMoZGVsdGEpKSA/IHRydWUgOiBmYWxzZVxuICAgIGxldCBzd2lwZUluQ2xvc2VEaXJlY3Rpb24gPSAodGhpcy5pc0xlZnRPclRvcFNpZGUoKSkgPyBzd2lwZVRvTGVmdE9yVG9wIDogc3dpcGVUb1JpZ2h0T3JCb3R0b21cbiAgICBpZiAoc3dpcGVPcHBvc2l0ZUF4aXMgfHwgKHRoaXMuX29wZW4gJiYgIXN3aXBlSW5DbG9zZURpcmVjdGlvbikgfHwgKCF0aGlzLl9vcGVuICYmIHN3aXBlSW5DbG9zZURpcmVjdGlvbikpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHRoaXMudGVybWluYXRlQWN0aXZlVHdlZW4oKVxuICAgIHJldHVybiB0cnVlXG4gIH07XG5cbiAgcHJvY2Vzc1RhcEdlc3R1cmVzID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9hY3RpdmVUd2VlbikgcmV0dXJuIGZhbHNlIC8vIGRpc2FibGUgdGFwIGdlc3R1cmVzIGR1cmluZyB0d2VlblxuICAgIGlmICh0aGlzLnByb3BzLmFjY2VwdFRhcCB8fCAodGhpcy5wcm9wcy50YXBUb0Nsb3NlICYmIHRoaXMuX29wZW4pKSB7XG4gICAgICB0aGlzLl9vcGVuID8gdGhpcy5jbG9zZSgpIDogdGhpcy5vcGVuKClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLmFjY2VwdERvdWJsZVRhcCkge1xuICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpXG4gICAgICBsZXQgdGltZURlbHRhID0gbm93IC0gdGhpcy5fbGFzdFByZXNzXG4gICAgICB0aGlzLl9sYXN0UHJlc3MgPSBub3dcbiAgICAgIGlmICh0aW1lRGVsdGEgPCBET1VCTEVfVEFQX0lOVEVSVkFMKSB7XG4gICAgICAgIHRoaXMuX29wZW4gPyB0aGlzLmNsb3NlKCkgOiB0aGlzLm9wZW4oKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfTtcblxuICBzaG91bGRDYXB0dXJlR2VzdHVyZXMoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuY2FwdHVyZUdlc3R1cmVzID09PSB0cnVlKSByZXR1cm4gdHJ1ZVxuICAgIGlmICh0aGlzLnByb3BzLmNhcHR1cmVHZXN0dXJlcyA9PT0gJ2Nsb3NlZCcgJiYgdGhpcy5fb3BlbiA9PT0gZmFsc2UpIHJldHVybiB0cnVlXG4gICAgaWYgKHRoaXMucHJvcHMuY2FwdHVyZUdlc3R1cmVzID09PSAnb3BlbicgJiYgdGhpcy5fb3BlbiA9PT0gdHJ1ZSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHRlc3RQYW5SZXNwb25kZXJNYXNrID0gKGUsIGdlc3R1cmVTdGF0ZSkgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLmRpc2FibGVkKSByZXR1cm4gZmFsc2VcblxuICAgIC8vIERpc2FibGUgaWYgcGFyZW50IG9yIGNoaWxkIGRyYXdlciBleGlzdCBhbmQgYXJlIG9wZW5cbiAgICAvLyBAVE9ETyBtYWtlIGNsZWFuZXIsIGdlbmVyYWxpemUgdG8gd29yayB3aXRoIDMrIGRyYXdlcnMsIHByb3AgdG8gZGlzYWJsZS9jb25maWd1cmVcbiAgICBpZiAodGhpcy5jb250ZXh0LmRyYXdlciAmJiB0aGlzLmNvbnRleHQuZHJhd2VyLl9vcGVuKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy5fY2hpbGREcmF3ZXIgJiYgdGhpcy5fY2hpbGREcmF3ZXIuX29wZW4pIHJldHVybiBmYWxzZVxuXG4gICAgbGV0IHBvczAgPSB0aGlzLmlzTGVmdE9yUmlnaHRTaWRlKCkgPyBlLm5hdGl2ZUV2ZW50LnBhZ2VYIDogZS5uYXRpdmVFdmVudC5wYWdlWVxuICAgIGxldCBkZWx0YU9wZW4gPSB0aGlzLmlzTGVmdE9yVG9wU2lkZSgpID8gdGhpcy5nZXREZXZpY2VMZW5ndGgoKSAtIHBvczAgOiBwb3MwXG4gICAgbGV0IGRlbHRhQ2xvc2UgPSB0aGlzLmlzTGVmdE9yVG9wU2lkZSgpID8gcG9zMCA6IHRoaXMuZ2V0RGV2aWNlTGVuZ3RoKCkgLSBwb3MwXG5cbiAgICBpZiAoIHRoaXMuX29wZW4gJiYgZGVsdGFPcGVuID4gdGhpcy5nZXRPcGVuTWFzaygpICkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCAhdGhpcy5fb3BlbiAmJiBkZWx0YUNsb3NlID4gdGhpcy5nZXRDbG9zZWRNYXNrKCkgKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9O1xuXG4gIHRlcm1pbmF0ZUFjdGl2ZVR3ZWVuID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9hY3RpdmVUd2Vlbikge1xuICAgICAgdGhpcy5fYWN0aXZlVHdlZW4udGVybWluYXRlKClcbiAgICAgIHRoaXMuX2FjdGl2ZVR3ZWVuID0gbnVsbFxuICAgIH1cbiAgfTtcblxuICBvcGVuID0gKHR5cGUsIGNiKSA9PiB7XG4gICAgbGV0IHN0YXJ0ID0gdGhpcy5fbGVuZ3RoXG4gICAgbGV0IGVuZCA9IHRoaXMuZ2V0T3Blbkxlbmd0aCgpXG5cbiAgICBpZiAodGhpcy5fYWN0aXZlVHdlZW4pIHJldHVyblxuICAgIGlmICh0eXBlICE9PSAnZm9yY2UnICYmIHN0YXJ0IC0gZW5kID09PSAwICYmIHRoaXMuX29wZW4gPT09IHRydWUpIHJldHVybiAvLyBkbyBub3RoaW5nIGlmIHRoZSBkZWx0YSBpcyAwXG5cbiAgICB0aGlzLnByb3BzLm9uT3BlblN0YXJ0ICYmIHRoaXMucHJvcHMub25PcGVuU3RhcnQoKVxuICAgIHRoaXMuc2V0SW50ZXJhY3Rpb25IYW5kbGUoKVxuICAgIHRoaXMuX2FjdGl2ZVR3ZWVuID0gdHdlZW4oe1xuICAgICAgc3RhcnQ6IHRoaXMuX2xlbmd0aCxcbiAgICAgIGVuZDogdGhpcy5nZXRPcGVuTGVuZ3RoKCksXG4gICAgICBkdXJhdGlvbjogdGhpcy5wcm9wcy50d2VlbkR1cmF0aW9uLFxuICAgICAgZWFzaW5nVHlwZTogdGhpcy5wcm9wcy50d2VlbkVhc2luZyxcbiAgICAgIG9uRnJhbWU6ICh0d2VlblZhbHVlKSA9PiB7XG5cdHRoaXMuX2xlbmd0aCA9IE1hdGgucm91bmQodHdlZW5WYWx1ZSoyKS8yO1xuICAgICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKClcbiAgICAgIH0sXG4gICAgICBvbkVuZDogKCkgPT4ge1xuICAgICAgICB0aGlzLl9hY3RpdmVUd2VlbiA9IG51bGxcbiAgICAgICAgdGhpcy5fb3BlbiA9IHRydWVcbiAgICAgICAgdGhpcy5fcHJldkxlbmd0aCA9IHRoaXMuX2xlbmd0aFxuICAgICAgICB0aGlzLmFkanVzdEZvckNhcHR1cmVHZXN0dXJlcygpXG4gICAgICAgIHRoaXMucHJvcHMub25PcGVuKClcbiAgICAgICAgdGhpcy5jbGVhckludGVyYWN0aW9uSGFuZGxlKClcblxuICAgICAgICBpZih0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHR5cGUoKSAvLyB0aGlzIGlzIGFjdHVhbGx5IGEgY2FsbGJhY2tcbiAgICAgICAgfSBlbHNlIGNiICYmIGNiKClcblxuICAgICAgfVxuICAgIH0pXG4gIH07XG5cbiAgY2xvc2UgPSAodHlwZSwgY2IpID0+IHtcbiAgICBsZXQgc3RhcnQgPSB0aGlzLl9sZW5ndGhcbiAgICBsZXQgZW5kID0gdGhpcy5nZXRDbG9zZWRMZW5ndGgoKVxuXG4gICAgaWYgKHRoaXMuX2FjdGl2ZVR3ZWVuKSByZXR1cm5cbiAgICBpZiAodHlwZSAhPT0gJ2ZvcmNlJyAmJiBzdGFydCAtIGVuZCA9PT0gMCAmJiB0aGlzLl9vcGVuID09PSBmYWxzZSkgcmV0dXJuIC8vIGRvIG5vdGhpbmcgaWYgdGhlIGRlbHRhIGlzIDBcblxuICAgIHRoaXMucHJvcHMub25DbG9zZVN0YXJ0ICYmIHRoaXMucHJvcHMub25DbG9zZVN0YXJ0KClcbiAgICB0aGlzLnNldEludGVyYWN0aW9uSGFuZGxlKClcbiAgICB0aGlzLl9hY3RpdmVUd2VlbiA9IHR3ZWVuKHtcbiAgICAgIHN0YXJ0LFxuICAgICAgZW5kLFxuICAgICAgZWFzaW5nVHlwZTogdGhpcy5wcm9wcy50d2VlbkVhc2luZyxcbiAgICAgIGR1cmF0aW9uOiB0aGlzLnByb3BzLnR3ZWVuRHVyYXRpb24sXG4gICAgICBvbkZyYW1lOiAodHdlZW5WYWx1ZSkgPT4ge1xuXHR0aGlzLl9sZW5ndGggPSBNYXRoLnJvdW5kKHR3ZWVuVmFsdWUqMikvMjtcbiAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbigpXG4gICAgICB9LFxuICAgICAgb25FbmQ6ICgpID0+IHtcbiAgICAgICAgdGhpcy5fYWN0aXZlVHdlZW4gPSBudWxsXG4gICAgICAgIHRoaXMuX29wZW4gPSBmYWxzZVxuICAgICAgICB0aGlzLl9wcmV2TGVuZ3RoID0gdGhpcy5fbGVuZ3RoXG4gICAgICAgIHRoaXMuYWRqdXN0Rm9yQ2FwdHVyZUdlc3R1cmVzKClcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNsb3NlKClcbiAgICAgICAgdGhpcy5jbGVhckludGVyYWN0aW9uSGFuZGxlKClcblxuICAgICAgICBpZih0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHR5cGUoKSAvLyB0aGlzIGlzIGFjdHVhbGx5IGEgY2FsbGJhY2tcbiAgICAgICAgfSBlbHNlIGNiICYmIGNiKClcblxuICAgICAgfVxuICAgIH0pXG4gIH07XG5cbiAgYWRqdXN0Rm9yQ2FwdHVyZUdlc3R1cmVzKCkge1xuICAgIGlmICghdGhpcy5wcm9wcy5jYXB0dXJlR2VzdHVyZXMpIHJldHVyblxuICAgIGxldCBzaG91bGRDYXB0dXJlID0gdGhpcy5zaG91bGRDYXB0dXJlR2VzdHVyZXMoKVxuICAgIGlmICh0aGlzLm1haW5PdmVybGF5ICYmIHRoaXMuZHJhd2VyT3ZlcmxheSkge1xuICAgICAgdGhpcy5tYWluT3ZlcmxheS5zZXROYXRpdmVQcm9wcyh7IHBvaW50ZXJFdmVudHM6IHNob3VsZENhcHR1cmUgJiYgdGhpcy5fb3BlbiA/ICdhdXRvJyA6ICdub25lJyB9KVxuICAgICAgdGhpcy5kcmF3ZXJPdmVybGF5LnNldE5hdGl2ZVByb3BzKHsgcG9pbnRlckV2ZW50czogc2hvdWxkQ2FwdHVyZSAmJiAhdGhpcy5fb3BlbiA/ICdhdXRvJyA6ICdub25lJyB9KVxuICAgIH1cbiAgfVxuXG4gIHNldEludGVyYWN0aW9uSGFuZGxlKCkge1xuICAgIGlmICh0aGlzLl9pbnRlcmFjdGlvbkhhbmRsZSkgSW50ZXJhY3Rpb25NYW5hZ2VyLmNsZWFySW50ZXJhY3Rpb25IYW5kbGUodGhpcy5faW50ZXJhY3Rpb25IYW5kbGUpXG4gICAgaWYgKHRoaXMucHJvcHMudXNlSW50ZXJhY3Rpb25NYW5hZ2VyKSB0aGlzLl9pbnRlcmFjdGlvbkhhbmRsZSA9IEludGVyYWN0aW9uTWFuYWdlci5jcmVhdGVJbnRlcmFjdGlvbkhhbmRsZSgpXG4gIH1cblxuICBjbGVhckludGVyYWN0aW9uSGFuZGxlKCkge1xuICAgIGlmICh0aGlzLl9pbnRlcmFjdGlvbkhhbmRsZSkgSW50ZXJhY3Rpb25NYW5hZ2VyLmNsZWFySW50ZXJhY3Rpb25IYW5kbGUodGhpcy5faW50ZXJhY3Rpb25IYW5kbGUpXG4gIH1cblxuICB0b2dnbGUgPSAoKSA9PiB7XG4gICAgdGhpcy5fb3BlbiA/IHRoaXMuY2xvc2UoKSA6IHRoaXMub3BlbigpXG4gIH07XG5cbiAgaGFuZGxlU2V0Vmlld3BvcnQgPSAoZSkgPT4ge1xuICAgIGxldCB2aWV3cG9ydCA9IGUubmF0aXZlRXZlbnQubGF5b3V0XG4gICAgbGV0IG9sZFZpZXdwb3J0ID0gdGhpcy5zdGF0ZS52aWV3cG9ydFxuICAgIGlmICh2aWV3cG9ydC53aWR0aCA9PT0gb2xkVmlld3BvcnQud2lkdGggJiYgdmlld3BvcnQuaGVpZ2h0ID09PSBvbGRWaWV3cG9ydC5oZWlnaHQpIHJldHVyblxuICAgIGxldCBkaWRSb3RhdGlvbkNoYW5nZSA9IHZpZXdwb3J0LndpZHRoICE9PSBvbGRWaWV3cG9ydC53aWR0aFxuICAgIHRoaXMucmVzeW5jKHZpZXdwb3J0LCBudWxsLCBkaWRSb3RhdGlvbkNoYW5nZSlcbiAgfTtcblxuICByZXN5bmMgPSAodmlld3BvcnQsIHByb3BzLCBkaWRSb3RhdGlvbkNoYW5nZSkgPT4ge1xuICAgIGlmIChkaWRSb3RhdGlvbkNoYW5nZSkgdGhpcy5fc3luY0FmdGVyVXBkYXRlID0gdHJ1ZVxuICAgIHZpZXdwb3J0ID0gdmlld3BvcnQgfHwgdGhpcy5zdGF0ZS52aWV3cG9ydFxuICAgIHByb3BzID0gcHJvcHMgfHwgdGhpcy5wcm9wc1xuICAgIHRoaXMuX29mZnNldENsb3NlZCA9IHRoaXMuZ2V0Q2xvc2VkT2Zmc2V0KHByb3BzLCB2aWV3cG9ydClcbiAgICB0aGlzLl9vZmZzZXRPcGVuID0gdGhpcy5nZXRPcGVuT2Zmc2V0KHByb3BzLCB2aWV3cG9ydClcbiAgICB0aGlzLnNldFN0YXRlKHsgdmlld3BvcnQgfSlcbiAgfTtcblxuICByZXF1aXJlc1Jlc3luYyA9IChuZXh0UHJvcHMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzV2hvbVJlcXVpcmVVcGRhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBrZXkgPSBwcm9wc1dob21SZXF1aXJlVXBkYXRlW2ldXG4gICAgICBpZiAodGhpcy5wcm9wc1trZXldICE9PSBuZXh0UHJvcHNba2V5XSkgcmV0dXJuIHRydWVcbiAgICB9XG4gIH07XG5cbiAgLyoqKiBEWU5BTUlDIEdFVFRFUlMgKioqL1xuICBnZXREZXZpY2VMZW5ndGggPSAodmlld3BvcnQgPSB0aGlzLnN0YXRlLnZpZXdwb3J0KSA9PiB0aGlzLmlzTGVmdE9yUmlnaHRTaWRlKCkgPyB2aWV3cG9ydC53aWR0aCA6IHZpZXdwb3J0LmhlaWdodDtcbiAgZ2V0T3Blbkxlbmd0aCA9ICgpID0+IHRoaXMuZ2V0RGV2aWNlTGVuZ3RoKCkgLSB0aGlzLl9vZmZzZXRPcGVuO1xuICBnZXRDbG9zZWRMZW5ndGggPSAoKSA9PiB0aGlzLl9vZmZzZXRDbG9zZWQ7XG4gIGdldE1haW5XaWR0aCA9ICh2aWV3cG9ydCA9IHRoaXMuc3RhdGUudmlld3BvcnQpID0+IHtcbiAgICByZXR1cm4gdGhpcy5pc0xlZnRPclJpZ2h0U2lkZSgpID8gdmlld3BvcnQud2lkdGggLSB0aGlzLl9vZmZzZXRDbG9zZWQgOiB2aWV3cG9ydC53aWR0aDtcbiAgfTtcbiAgZ2V0TWFpbkhlaWdodCA9ICh2aWV3cG9ydCA9IHRoaXMuc3RhdGUudmlld3BvcnQpID0+IHtcbiAgICByZXR1cm4gdGhpcy5pc1RvcE9yQm90dG9tU2lkZSgpID8gdmlld3BvcnQuaGVpZ2h0IC0gdGhpcy5fb2Zmc2V0Q2xvc2VkIDogdmlld3BvcnQuaGVpZ2h0O1xuICB9O1xuICBnZXREcmF3ZXJXaWR0aCA9ICh2aWV3cG9ydCA9IHRoaXMuc3RhdGUudmlld3BvcnQpID0+IHtcbiAgICByZXR1cm4gdGhpcy5pc0xlZnRPclJpZ2h0U2lkZSgpID8gdmlld3BvcnQud2lkdGggLSB0aGlzLl9vZmZzZXRPcGVuIDogdmlld3BvcnQud2lkdGg7XG4gIH07XG4gIGdldERyYXdlckhlaWdodCA9ICh2aWV3cG9ydCA9IHRoaXMuc3RhdGUudmlld3BvcnQpID0+IHtcbiAgICByZXR1cm4gdGhpcy5pc1RvcE9yQm90dG9tU2lkZSgpID8gdmlld3BvcnQuaGVpZ2h0IC0gdGhpcy5fb2Zmc2V0T3BlbiA6IHZpZXdwb3J0LmhlaWdodDtcbiAgfTtcbiAgZ2V0T3Blbk1hc2sgPSAodmlld3BvcnQgPSB0aGlzLnN0YXRlLnZpZXdwb3J0KSA9PiB7XG4gICAgaWYgKHRoaXMucHJvcHMucGFuQ2xvc2VNYXNrICYmIHRoaXMucHJvcHMucGFuQ2xvc2VNYXNrICUgMSA9PT0gMCkgcmV0dXJuIHRoaXMucHJvcHMucGFuQ2xvc2VNYXNrXG4gICAgaWYgKHRoaXMucHJvcHMucGFuQ2xvc2VNYXNrKSByZXR1cm4gdGhpcy5nZXREZXZpY2VMZW5ndGgodmlld3BvcnQpICogdGhpcy5wcm9wcy5wYW5DbG9zZU1hc2tcbiAgICByZXR1cm4gTWF0aC5tYXgoMC4wNSwgdGhpcy5fb2Zmc2V0T3BlbilcbiAgfTtcbiAgZ2V0Q2xvc2VkTWFzayA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5wcm9wcy5wYW5PcGVuTWFzayAmJiB0aGlzLnByb3BzLnBhbk9wZW5NYXNrICUgMSA9PT0gMCkgcmV0dXJuIHRoaXMucHJvcHMucGFuT3Blbk1hc2tcbiAgICBpZiAodGhpcy5wcm9wcy5wYW5PcGVuTWFzaykgcmV0dXJuIHRoaXMuZ2V0RGV2aWNlTGVuZ3RoKCkgKiB0aGlzLnByb3BzLnBhbk9wZW5NYXNrXG4gICAgcmV0dXJuIE1hdGgubWF4KDAuMDUsIHRoaXMuX29mZnNldENsb3NlZClcbiAgfTtcbiAgZ2V0T3Blbk9mZnNldCA9IChwcm9wcywgdmlld3BvcnQpID0+IHtcbiAgICBpZiAodHlwZW9mIHByb3BzLm9wZW5EcmF3ZXJPZmZzZXQgPT09ICdmdW5jdGlvbicpIHJldHVybiBwcm9wcy5vcGVuRHJhd2VyT2Zmc2V0KHZpZXdwb3J0KVxuICAgIHJldHVybiBwcm9wcy5vcGVuRHJhd2VyT2Zmc2V0ID4gMSB8fCBwcm9wcy5vcGVuRHJhd2VyT2Zmc2V0IDwgMCA/IHByb3BzLm9wZW5EcmF3ZXJPZmZzZXQgOiBwcm9wcy5vcGVuRHJhd2VyT2Zmc2V0ICogdGhpcy5nZXREZXZpY2VMZW5ndGgodmlld3BvcnQpXG4gIH07XG4gIGdldENsb3NlZE9mZnNldCA9IChwcm9wcywgdmlld3BvcnQpID0+IHtcbiAgICBpZiAodHlwZW9mIHByb3BzLmNsb3NlZERyYXdlck9mZnNldCA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHByb3BzLmNsb3NlZERyYXdlck9mZnNldCh2aWV3cG9ydClcbiAgICByZXR1cm4gcHJvcHMuY2xvc2VkRHJhd2VyT2Zmc2V0ID4gMSB8fCBwcm9wcy5jbG9zZWREcmF3ZXJPZmZzZXQgPCAwID8gcHJvcHMuY2xvc2VkRHJhd2VyT2Zmc2V0IDogcHJvcHMuY2xvc2VkRHJhd2VyT2Zmc2V0ICogdGhpcy5nZXREZXZpY2VMZW5ndGgodmlld3BvcnQpXG4gIH07XG4gIGdldEdlc3R1cmVEZWx0YSA9IChnZXN0dXJlU3RhdGUpID0+IHRoaXMuaXNMZWZ0T3JSaWdodFNpZGUoKSA/IGdlc3R1cmVTdGF0ZS5keCA6IGdlc3R1cmVTdGF0ZS5keTtcbiAgZ2V0R2VzdHVyZURlbHRhT3Bwb3NpdGVBeGlzID0gKGdlc3R1cmVTdGF0ZSkgPT4gdGhpcy5pc0xlZnRPclJpZ2h0U2lkZSgpID8gZ2VzdHVyZVN0YXRlLmR5IDogZ2VzdHVyZVN0YXRlLmR4O1xuICAvKioqIEVORCBEWU5BTUlDIEdFVFRFUlMgKioqL1xuXG4gIGlzTGVmdE9yUmlnaHRTaWRlID0gKCkgPT4ge1xuICAgIGlmIChJMThuTWFuYWdlci5pc1JUTCkge1xuICAgICAgcmV0dXJuIFtcInJpZ2h0XCIsIFwibGVmdFwiXS5pbmNsdWRlcyh0aGlzLnByb3BzLnNpZGUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXCJsZWZ0XCIsIFwicmlnaHRcIl0uaW5jbHVkZXModGhpcy5wcm9wcy5zaWRlKVxuICAgIH1cbiAgfVxuICBpc1RvcE9yQm90dG9tU2lkZSA9ICgpID0+IFtcInRvcFwiLCBcImJvdHRvbVwiXS5pbmNsdWRlcyh0aGlzLnByb3BzLnNpZGUpO1xuICBpc0xlZnRPclRvcFNpZGUgPSAoKSA9PiB7XG4gICAgbGV0IHNpZGUgPSBcImxlZnRcIjtcbiAgICBpZiAoSTE4bk1hbmFnZXIuaXNSVEwpIHtcbiAgICAgIHNpZGUgPSBcInJpZ2h0XCI7XG4gICAgfVxuICAgIHJldHVybiBbc2lkZSwgXCJ0b3BcIl0uaW5jbHVkZXModGhpcy5wcm9wcy5zaWRlKTtcbiAgfVxuICBpc1JpZ2h0T3JCb3R0b21TaWRlID0gKCkgPT4ge1xuICAgIGxldCBzaWRlID0gXCJyaWdodFwiXG4gICAgaWYgKEkxOG5NYW5hZ2VyLmlzUlRMKSB7XG4gICAgICBzaWRlID0gXCJsZWZ0XCJcbiAgICB9XG4gICAgcmV0dXJuIFtzaWRlLCBcImJvdHRvbVwiXS5pbmNsdWRlcyh0aGlzLnByb3BzLnNpZGUpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBmaXJzdCA9IHRoaXMucHJvcHMudHlwZSA9PT0gJ292ZXJsYXknID8gdGhpcy5yZW5kZXJNYWluKCkgOiB0aGlzLnJlbmRlckRyYXdlcigpXG4gICAgbGV0IHNlY29uZCA9IHRoaXMucHJvcHMudHlwZSA9PT0gJ292ZXJsYXknID8gdGhpcy5yZW5kZXJEcmF3ZXIoKSA6IHRoaXMucmVuZGVyTWFpbigpXG5cbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXdcbiAgICAgICAga2V5PVwiZHJhd2VyQ29udGFpbmVyXCJcbiAgICAgICAgb25MYXlvdXQ9e3RoaXMuaGFuZGxlU2V0Vmlld3BvcnR9XG4gICAgICAgIHN0eWxlPXt0aGlzLnN0eWxlc2hlZXQuY29udGFpbmVyfVxuICAgICAgICA+XG4gICAgICAgIHtmaXJzdH1cbiAgICAgICAge3NlY29uZH1cbiAgICAgIDwvVmlldz5cbiAgICApXG4gIH1cblxuICByZW5kZXJNYWluKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Vmlld1xuICAgICAgICB7Li4udGhpcy5yZXNwb25kZXIucGFuSGFuZGxlcnN9XG4gICAgICAgIGtleT1cIm1haW5cIlxuICAgICAgICByZWY9e2MgPT4gdGhpcy5tYWluID0gY31cbiAgICAgICAgc3R5bGU9e1t0aGlzLnN0eWxlc2hlZXQubWFpbiwge2hlaWdodDogdGhpcy5nZXRNYWluSGVpZ2h0KCksIHdpZHRoOiB0aGlzLmdldE1haW5XaWR0aCgpfV19XG4gICAgICAgID5cbiAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgIDxWaWV3XG4gICAgICAgICAgcG9pbnRlckV2ZW50cz17IHRoaXMuX29wZW4gJiYgdGhpcy5zaG91bGRDYXB0dXJlR2VzdHVyZXMoKSA/ICdhdXRvJyA6ICdub25lJyB9XG4gICAgICAgICAgcmVmPXtjID0+IHRoaXMubWFpbk92ZXJsYXkgPSBjfVxuICAgICAgICAgIHN0eWxlPXtbc3R5bGVzLm92ZXJsYXksIHRoaXMucHJvcHMuc3R5bGVzICYmIHRoaXMucHJvcHMuc3R5bGVzLm1haW5PdmVybGF5XX1cbiAgICAgICAgICAvPlxuICAgICAgPC9WaWV3PlxuICAgIClcbiAgfVxuXG4gIHJlbmRlckRyYXdlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXdcbiAgICAgICAgey4uLnRoaXMucmVzcG9uZGVyLnBhbkhhbmRsZXJzfVxuICAgICAgICBrZXk9XCJkcmF3ZXJcIlxuICAgICAgICByZWY9e2MgPT4gdGhpcy5kcmF3ZXIgPSBjfVxuICAgICAgICBlbGV2YXRpb249e3RoaXMucHJvcHMuZWxldmF0aW9ufVxuICAgICAgICBzdHlsZT17W3RoaXMuc3R5bGVzaGVldC5kcmF3ZXIsIHtoZWlnaHQ6IHRoaXMuZ2V0RHJhd2VySGVpZ2h0KCksIHdpZHRoOiB0aGlzLmdldERyYXdlcldpZHRoKCl9XX1cbiAgICAgICAgPlxuICAgICAgICB7dGhpcy5wcm9wcy5jb250ZW50fVxuICAgICAgICA8Vmlld1xuICAgICAgICAgIHBvaW50ZXJFdmVudHM9eyAhdGhpcy5fb3BlbiAmJiB0aGlzLnNob3VsZENhcHR1cmVHZXN0dXJlcygpID8gJ2F1dG8nIDogJ25vbmUnIH1cbiAgICAgICAgICByZWY9e2MgPT4gdGhpcy5kcmF3ZXJPdmVybGF5ID0gY31cbiAgICAgICAgICBzdHlsZT17W3N0eWxlcy5vdmVybGF5LCB0aGlzLnByb3BzLnN0eWxlcyAmJiB0aGlzLnByb3BzLnN0eWxlcy5kcmF3ZXJPdmVybGF5XX1cbiAgICAgICAgICAvPlxuICAgICAgPC9WaWV3PlxuICAgIClcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIG92ZXJsYXk6IHtcbiAgICByaWdodDogMCxcbiAgICBsZWZ0OiAwLFxuICAgIHRvcDogMCxcbiAgICBib3R0b206IDAsXG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnXG4gIH1cbn0pXG4iXX0=