7df08318643eaa975cfc8a418a5ed0df
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var DeprecatedEdgeInsetsPropType = require('../../DeprecatedPropTypes/DeprecatedEdgeInsetsPropType');

var React = require('react');

var PropTypes = require('prop-types');

var Touchable = require('./Touchable');

var View = require('../View/View');

var createReactClass = require('create-react-class');

var ensurePositiveDelayProps = require('./ensurePositiveDelayProps');

var _require = require('../../DeprecatedPropTypes/DeprecatedViewAccessibility'),
    DeprecatedAccessibilityRoles = _require.DeprecatedAccessibilityRoles;

var PRESS_RETENTION_OFFSET = {
  top: 20,
  left: 20,
  right: 20,
  bottom: 30
};
var OVERRIDE_PROPS = ['accessibilityLabel', 'accessibilityHint', 'accessibilityIgnoresInvertColors', 'accessibilityRole', 'accessibilityStates', 'accessibilityState', 'accessibilityActions', 'onAccessibilityAction', 'hitSlop', 'nativeID', 'onBlur', 'onFocus', 'onLayout', 'testID'];
var TouchableWithoutFeedback = createReactClass({
  displayName: 'TouchableWithoutFeedback',
  mixins: [Touchable.Mixin],
  propTypes: {
    accessible: PropTypes.bool,
    accessibilityLabel: PropTypes.node,
    accessibilityHint: PropTypes.string,
    accessibilityIgnoresInvertColors: PropTypes.bool,
    accessibilityRole: PropTypes.oneOf(DeprecatedAccessibilityRoles),
    accessibilityStates: PropTypes.array,
    accessibilityState: PropTypes.object,
    accessibilityActions: PropTypes.array,
    onAccessibilityAction: PropTypes.func,
    onFocus: PropTypes.func,
    onBlur: PropTypes.func,
    disabled: PropTypes.bool,
    onPress: PropTypes.func,
    onPressIn: PropTypes.func,
    onPressOut: PropTypes.func,
    onLayout: PropTypes.func,
    touchSoundDisabled: PropTypes.bool,
    onLongPress: PropTypes.func,
    nativeID: PropTypes.string,
    testID: PropTypes.string,
    delayPressIn: PropTypes.number,
    delayPressOut: PropTypes.number,
    delayLongPress: PropTypes.number,
    pressRetentionOffset: DeprecatedEdgeInsetsPropType,
    hitSlop: DeprecatedEdgeInsetsPropType
  },
  getInitialState: function getInitialState() {
    return this.touchableGetInitialState();
  },
  componentDidMount: function componentDidMount() {
    ensurePositiveDelayProps(this.props);
  },
  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {
    ensurePositiveDelayProps(nextProps);
  },
  touchableHandlePress: function touchableHandlePress(e) {
    this.props.onPress && this.props.onPress(e);
  },
  touchableHandleActivePressIn: function touchableHandleActivePressIn(e) {
    this.props.onPressIn && this.props.onPressIn(e);
  },
  touchableHandleActivePressOut: function touchableHandleActivePressOut(e) {
    this.props.onPressOut && this.props.onPressOut(e);
  },
  touchableHandleLongPress: function touchableHandleLongPress(e) {
    this.props.onLongPress && this.props.onLongPress(e);
  },
  touchableGetPressRectOffset: function touchableGetPressRectOffset() {
    return this.props.pressRetentionOffset || PRESS_RETENTION_OFFSET;
  },
  touchableGetHitSlop: function touchableGetHitSlop() {
    return this.props.hitSlop;
  },
  touchableGetHighlightDelayMS: function touchableGetHighlightDelayMS() {
    return this.props.delayPressIn || 0;
  },
  touchableGetLongPressDelayMS: function touchableGetLongPressDelayMS() {
    return this.props.delayLongPress === 0 ? 0 : this.props.delayLongPress || 500;
  },
  touchableGetPressOutDelayMS: function touchableGetPressOutDelayMS() {
    return this.props.delayPressOut || 0;
  },
  render: function render() {
    var child = React.Children.only(this.props.children);
    var children = child.props.children;

    if (Touchable.TOUCH_TARGET_DEBUG && child.type === View) {
      children = React.Children.toArray(children);
      children.push(Touchable.renderDebugView({
        color: 'red',
        hitSlop: this.props.hitSlop
      }));
    }

    var overrides = {};

    for (var _iterator = OVERRIDE_PROPS, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[typeof Symbol === "function" ? Symbol.iterator : "@@iterator"]();;) {
      var _ref;

      if (_isArray) {
        if (_i >= _iterator.length) break;
        _ref = _iterator[_i++];
      } else {
        _i = _iterator.next();
        if (_i.done) break;
        _ref = _i.value;
      }

      var _prop = _ref;

      if (this.props[_prop] !== undefined) {
        overrides[_prop] = this.props[_prop];
      }
    }

    return React.cloneElement(child, _objectSpread({}, overrides, {
      accessible: this.props.accessible !== false,
      focusable: this.props.focusable !== false && this.props.onPress !== undefined,
      onClick: this.touchableHandlePress,
      onStartShouldSetResponder: this.touchableHandleStartShouldSetResponder,
      onResponderTerminationRequest: this.touchableHandleResponderTerminationRequest,
      onResponderGrant: this.touchableHandleResponderGrant,
      onResponderMove: this.touchableHandleResponderMove,
      onResponderRelease: this.touchableHandleResponderRelease,
      onResponderTerminate: this.touchableHandleResponderTerminate,
      children: children
    }));
  }
});
module.exports = TouchableWithoutFeedback;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjay5qcyJdLCJuYW1lcyI6WyJEZXByZWNhdGVkRWRnZUluc2V0c1Byb3BUeXBlIiwicmVxdWlyZSIsIlJlYWN0IiwiUHJvcFR5cGVzIiwiVG91Y2hhYmxlIiwiVmlldyIsImNyZWF0ZVJlYWN0Q2xhc3MiLCJlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMiLCJEZXByZWNhdGVkQWNjZXNzaWJpbGl0eVJvbGVzIiwiUFJFU1NfUkVURU5USU9OX09GRlNFVCIsInRvcCIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsIk9WRVJSSURFX1BST1BTIiwiVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIiwiZGlzcGxheU5hbWUiLCJtaXhpbnMiLCJNaXhpbiIsInByb3BUeXBlcyIsImFjY2Vzc2libGUiLCJib29sIiwiYWNjZXNzaWJpbGl0eUxhYmVsIiwibm9kZSIsImFjY2Vzc2liaWxpdHlIaW50Iiwic3RyaW5nIiwiYWNjZXNzaWJpbGl0eUlnbm9yZXNJbnZlcnRDb2xvcnMiLCJhY2Nlc3NpYmlsaXR5Um9sZSIsIm9uZU9mIiwiYWNjZXNzaWJpbGl0eVN0YXRlcyIsImFycmF5IiwiYWNjZXNzaWJpbGl0eVN0YXRlIiwib2JqZWN0IiwiYWNjZXNzaWJpbGl0eUFjdGlvbnMiLCJvbkFjY2Vzc2liaWxpdHlBY3Rpb24iLCJmdW5jIiwib25Gb2N1cyIsIm9uQmx1ciIsImRpc2FibGVkIiwib25QcmVzcyIsIm9uUHJlc3NJbiIsIm9uUHJlc3NPdXQiLCJvbkxheW91dCIsInRvdWNoU291bmREaXNhYmxlZCIsIm9uTG9uZ1ByZXNzIiwibmF0aXZlSUQiLCJ0ZXN0SUQiLCJkZWxheVByZXNzSW4iLCJudW1iZXIiLCJkZWxheVByZXNzT3V0IiwiZGVsYXlMb25nUHJlc3MiLCJwcmVzc1JldGVudGlvbk9mZnNldCIsImhpdFNsb3AiLCJnZXRJbml0aWFsU3RhdGUiLCJ0b3VjaGFibGVHZXRJbml0aWFsU3RhdGUiLCJjb21wb25lbnREaWRNb3VudCIsInByb3BzIiwiVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0UHJvcHMiLCJ0b3VjaGFibGVIYW5kbGVQcmVzcyIsImUiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQiLCJ0b3VjaGFibGVIYW5kbGVMb25nUHJlc3MiLCJ0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQiLCJ0b3VjaGFibGVHZXRIaXRTbG9wIiwidG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUyIsInRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMiLCJ0b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMiLCJyZW5kZXIiLCJjaGlsZCIsIkNoaWxkcmVuIiwib25seSIsImNoaWxkcmVuIiwiVE9VQ0hfVEFSR0VUX0RFQlVHIiwidHlwZSIsInRvQXJyYXkiLCJwdXNoIiwicmVuZGVyRGVidWdWaWV3IiwiY29sb3IiLCJvdmVycmlkZXMiLCJwcm9wIiwidW5kZWZpbmVkIiwiY2xvbmVFbGVtZW50IiwiZm9jdXNhYmxlIiwib25DbGljayIsIm9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIiLCJ0b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlciIsIm9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0IiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0Iiwib25SZXNwb25kZXJHcmFudCIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlckdyYW50Iiwib25SZXNwb25kZXJNb3ZlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZSIsIm9uUmVzcG9uZGVyUmVsZWFzZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2UiLCJvblJlc3BvbmRlclRlcm1pbmF0ZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVB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QUNDLE9BQVAsR0FBaUJwRix3QkFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBEZXByZWNhdGVkRWRnZUluc2V0c1Byb3BUeXBlID0gcmVxdWlyZSgnLi4vLi4vRGVwcmVjYXRlZFByb3BUeXBlcy9EZXByZWNhdGVkRWRnZUluc2V0c1Byb3BUeXBlJyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5jb25zdCBUb3VjaGFibGUgPSByZXF1aXJlKCcuL1RvdWNoYWJsZScpO1xuY29uc3QgVmlldyA9IHJlcXVpcmUoJy4uL1ZpZXcvVmlldycpO1xuXG5jb25zdCBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG5jb25zdCBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMgPSByZXF1aXJlKCcuL2Vuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcycpO1xuXG5jb25zdCB7XG4gIERlcHJlY2F0ZWRBY2Nlc3NpYmlsaXR5Um9sZXMsXG59ID0gcmVxdWlyZSgnLi4vLi4vRGVwcmVjYXRlZFByb3BUeXBlcy9EZXByZWNhdGVkVmlld0FjY2Vzc2liaWxpdHknKTtcblxuaW1wb3J0IHR5cGUge1xuICBTeW50aGV0aWNFdmVudCxcbiAgTGF5b3V0RXZlbnQsXG4gIFByZXNzRXZlbnQsXG59IGZyb20gJy4uLy4uL1R5cGVzL0NvcmVFdmVudFR5cGVzJztcbmltcG9ydCB0eXBlIHtFZGdlSW5zZXRzUHJvcH0gZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9FZGdlSW5zZXRzUHJvcFR5cGUnO1xuaW1wb3J0IHR5cGUge1xuICBBY2Nlc3NpYmlsaXR5Um9sZSxcbiAgQWNjZXNzaWJpbGl0eVN0YXRlcyxcbiAgQWNjZXNzaWJpbGl0eVN0YXRlLFxuICBBY2Nlc3NpYmlsaXR5QWN0aW9uSW5mbyxcbiAgQWNjZXNzaWJpbGl0eUFjdGlvbkV2ZW50LFxufSBmcm9tICcuLi9WaWV3L1ZpZXdBY2Nlc3NpYmlsaXR5JztcblxudHlwZSBUYXJnZXRFdmVudCA9IFN5bnRoZXRpY0V2ZW50PFxuICAkUmVhZE9ubHk8e3xcbiAgICB0YXJnZXQ6IG51bWJlcixcbiAgfH0+LFxuPjtcblxudHlwZSBCbHVyRXZlbnQgPSBUYXJnZXRFdmVudDtcbnR5cGUgRm9jdXNFdmVudCA9IFRhcmdldEV2ZW50O1xuXG5jb25zdCBQUkVTU19SRVRFTlRJT05fT0ZGU0VUID0ge3RvcDogMjAsIGxlZnQ6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMzB9O1xuXG5jb25zdCBPVkVSUklERV9QUk9QUyA9IFtcbiAgJ2FjY2Vzc2liaWxpdHlMYWJlbCcsXG4gICdhY2Nlc3NpYmlsaXR5SGludCcsXG4gICdhY2Nlc3NpYmlsaXR5SWdub3Jlc0ludmVydENvbG9ycycsXG4gICdhY2Nlc3NpYmlsaXR5Um9sZScsXG4gICdhY2Nlc3NpYmlsaXR5U3RhdGVzJyxcbiAgJ2FjY2Vzc2liaWxpdHlTdGF0ZScsXG4gICdhY2Nlc3NpYmlsaXR5QWN0aW9ucycsXG4gICdvbkFjY2Vzc2liaWxpdHlBY3Rpb24nLFxuICAnaGl0U2xvcCcsXG4gICduYXRpdmVJRCcsXG4gICdvbkJsdXInLFxuICAnb25Gb2N1cycsXG4gICdvbkxheW91dCcsXG4gICd0ZXN0SUQnLFxuXTtcblxuZXhwb3J0IHR5cGUgUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgYWNjZXNzaWJsZT86ID9ib29sZWFuLFxuICBhY2Nlc3NpYmlsaXR5TGFiZWw/OiA/U3RyaW5naXNoLFxuICBhY2Nlc3NpYmlsaXR5SGludD86ID9TdHJpbmdpc2gsXG4gIGFjY2Vzc2liaWxpdHlJZ25vcmVzSW52ZXJ0Q29sb3JzPzogP2Jvb2xlYW4sXG4gIGFjY2Vzc2liaWxpdHlSb2xlPzogP0FjY2Vzc2liaWxpdHlSb2xlLFxuICBhY2Nlc3NpYmlsaXR5U3RhdGVzPzogP0FjY2Vzc2liaWxpdHlTdGF0ZXMsXG4gIGFjY2Vzc2liaWxpdHlTdGF0ZT86ID9BY2Nlc3NpYmlsaXR5U3RhdGUsXG4gIGFjY2Vzc2liaWxpdHlBY3Rpb25zPzogPyRSZWFkT25seUFycmF5PEFjY2Vzc2liaWxpdHlBY3Rpb25JbmZvPixcbiAgY2hpbGRyZW4/OiA/UmVhY3QuTm9kZSxcbiAgZGVsYXlMb25nUHJlc3M/OiA/bnVtYmVyLFxuICBkZWxheVByZXNzSW4/OiA/bnVtYmVyLFxuICBkZWxheVByZXNzT3V0PzogP251bWJlcixcbiAgZGlzYWJsZWQ/OiA/Ym9vbGVhbixcbiAgaGl0U2xvcD86ID9FZGdlSW5zZXRzUHJvcCxcbiAgbmF0aXZlSUQ/OiA/c3RyaW5nLFxuICB0b3VjaFNvdW5kRGlzYWJsZWQ/OiA/Ym9vbGVhbixcbiAgb25CbHVyPzogPyhlOiBCbHVyRXZlbnQpID0+IHZvaWQsXG4gIG9uRm9jdXM/OiA/KGU6IEZvY3VzRXZlbnQpID0+IHZvaWQsXG4gIG9uTGF5b3V0PzogPyhldmVudDogTGF5b3V0RXZlbnQpID0+IG1peGVkLFxuICBvbkxvbmdQcmVzcz86ID8oZXZlbnQ6IFByZXNzRXZlbnQpID0+IG1peGVkLFxuICBvblByZXNzPzogPyhldmVudDogUHJlc3NFdmVudCkgPT4gbWl4ZWQsXG4gIG9uUHJlc3NJbj86ID8oZXZlbnQ6IFByZXNzRXZlbnQpID0+IG1peGVkLFxuICBvblByZXNzT3V0PzogPyhldmVudDogUHJlc3NFdmVudCkgPT4gbWl4ZWQsXG4gIG9uQWNjZXNzaWJpbGl0eUFjdGlvbj86ID8oZXZlbnQ6IEFjY2Vzc2liaWxpdHlBY3Rpb25FdmVudCkgPT4gdm9pZCxcbiAgcHJlc3NSZXRlbnRpb25PZmZzZXQ/OiA/RWRnZUluc2V0c1Byb3AsXG4gIHJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uPzogP2Jvb2xlYW4sXG4gIHRlc3RJRD86ID9zdHJpbmcsXG58fT47XG5cbi8qKlxuICogRG8gbm90IHVzZSB1bmxlc3MgeW91IGhhdmUgYSB2ZXJ5IGdvb2QgcmVhc29uLiBBbGwgZWxlbWVudHMgdGhhdFxuICogcmVzcG9uZCB0byBwcmVzcyBzaG91bGQgaGF2ZSBhIHZpc3VhbCBmZWVkYmFjayB3aGVuIHRvdWNoZWQuXG4gKlxuICogVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIHN1cHBvcnRzIG9ubHkgb25lIGNoaWxkLlxuICogSWYgeW91IHdpc2ggdG8gaGF2ZSBzZXZlcmFsIGNoaWxkIGNvbXBvbmVudHMsIHdyYXAgdGhlbSBpbiBhIFZpZXcuXG4gKi9cbmNvbnN0IFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayA9ICgoY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrJyxcbiAgbWl4aW5zOiBbVG91Y2hhYmxlLk1peGluXSxcblxuICBwcm9wVHlwZXM6IHtcbiAgICBhY2Nlc3NpYmxlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IFByb3BUeXBlcy5ub2RlLFxuICAgIGFjY2Vzc2liaWxpdHlIaW50OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGFjY2Vzc2liaWxpdHlJZ25vcmVzSW52ZXJ0Q29sb3JzOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBhY2Nlc3NpYmlsaXR5Um9sZTogUHJvcFR5cGVzLm9uZU9mKERlcHJlY2F0ZWRBY2Nlc3NpYmlsaXR5Um9sZXMpLFxuICAgIGFjY2Vzc2liaWxpdHlTdGF0ZXM6IFByb3BUeXBlcy5hcnJheSxcbiAgICBhY2Nlc3NpYmlsaXR5U3RhdGU6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgYWNjZXNzaWJpbGl0eUFjdGlvbnM6IFByb3BUeXBlcy5hcnJheSxcbiAgICBvbkFjY2Vzc2liaWxpdHlBY3Rpb246IFByb3BUeXBlcy5mdW5jLFxuICAgIC8qKlxuICAgICAqIFdoZW4gYGFjY2Vzc2libGVgIGlzIHRydWUgKHdoaWNoIGlzIHRoZSBkZWZhdWx0KSB0aGlzIG1heSBiZSBjYWxsZWQgd2hlblxuICAgICAqIHRoZSBPUy1zcGVjaWZpYyBjb25jZXB0IG9mIFwiZm9jdXNcIiBvY2N1cnMuIFNvbWUgcGxhdGZvcm1zIG1heSBub3QgaGF2ZVxuICAgICAqIHRoZSBjb25jZXB0IG9mIGZvY3VzLlxuICAgICAqL1xuICAgIG9uRm9jdXM6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8qKlxuICAgICAqIFdoZW4gYGFjY2Vzc2libGVgIGlzIHRydWUgKHdoaWNoIGlzIHRoZSBkZWZhdWx0KSB0aGlzIG1heSBiZSBjYWxsZWQgd2hlblxuICAgICAqIHRoZSBPUy1zcGVjaWZpYyBjb25jZXB0IG9mIFwiYmx1clwiIG9jY3VycywgbWVhbmluZyB0aGUgZWxlbWVudCBsb3N0IGZvY3VzLlxuICAgICAqIFNvbWUgcGxhdGZvcm1zIG1heSBub3QgaGF2ZSB0aGUgY29uY2VwdCBvZiBibHVyLlxuICAgICAqL1xuICAgIG9uQmx1cjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgZGlzYWJsZSBhbGwgaW50ZXJhY3Rpb25zIGZvciB0aGlzIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIHRvdWNoIGlzIHJlbGVhc2VkLCBidXQgbm90IGlmIGNhbmNlbGxlZCAoZS5nLiBieSBhIHNjcm9sbFxuICAgICAqIHRoYXQgc3RlYWxzIHRoZSByZXNwb25kZXIgbG9jaykuXG4gICAgICovXG4gICAgb25QcmVzczogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGFzIHNvb24gYXMgdGhlIHRvdWNoYWJsZSBlbGVtZW50IGlzIHByZXNzZWQgYW5kIGludm9rZWQgZXZlbiBiZWZvcmUgb25QcmVzcy5cbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgd2hlbiBtYWtpbmcgbmV0d29yayByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBvblByZXNzSW46IFByb3BUeXBlcy5mdW5jLFxuICAgIC8qKlxuICAgICAqIENhbGxlZCBhcyBzb29uIGFzIHRoZSB0b3VjaCBpcyByZWxlYXNlZCBldmVuIGJlZm9yZSBvblByZXNzLlxuICAgICAqL1xuICAgIG9uUHJlc3NPdXQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8qKlxuICAgICAqIEludm9rZWQgb24gbW91bnQgYW5kIGxheW91dCBjaGFuZ2VzIHdpdGhcbiAgICAgKlxuICAgICAqICAgYHtuYXRpdmVFdmVudDoge2xheW91dDoge3gsIHksIHdpZHRoLCBoZWlnaHR9fX1gXG4gICAgICovXG4gICAgb25MYXlvdXQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8qKlxuICAgICAqIElmIHRydWUsIGRvZXNuJ3QgcGxheSBzeXN0ZW0gc291bmQgb24gdG91Y2ggKEFuZHJvaWQgT25seSlcbiAgICAgKiovXG4gICAgdG91Y2hTb3VuZERpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIG9uTG9uZ1ByZXNzOiBQcm9wVHlwZXMuZnVuYyxcblxuICAgIG5hdGl2ZUlEOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHRlc3RJRDogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIERlbGF5IGluIG1zLCBmcm9tIHRoZSBzdGFydCBvZiB0aGUgdG91Y2gsIGJlZm9yZSBvblByZXNzSW4gaXMgY2FsbGVkLlxuICAgICAqL1xuICAgIGRlbGF5UHJlc3NJbjogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBEZWxheSBpbiBtcywgZnJvbSB0aGUgcmVsZWFzZSBvZiB0aGUgdG91Y2gsIGJlZm9yZSBvblByZXNzT3V0IGlzIGNhbGxlZC5cbiAgICAgKi9cbiAgICBkZWxheVByZXNzT3V0OiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIC8qKlxuICAgICAqIERlbGF5IGluIG1zLCBmcm9tIG9uUHJlc3NJbiwgYmVmb3JlIG9uTG9uZ1ByZXNzIGlzIGNhbGxlZC5cbiAgICAgKi9cbiAgICBkZWxheUxvbmdQcmVzczogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBzY3JvbGwgdmlldyBpcyBkaXNhYmxlZCwgdGhpcyBkZWZpbmVzIGhvdyBmYXIgeW91ciB0b3VjaCBtYXlcbiAgICAgKiBtb3ZlIG9mZiBvZiB0aGUgYnV0dG9uLCBiZWZvcmUgZGVhY3RpdmF0aW5nIHRoZSBidXR0b24uIE9uY2UgZGVhY3RpdmF0ZWQsXG4gICAgICogdHJ5IG1vdmluZyBpdCBiYWNrIGFuZCB5b3UnbGwgc2VlIHRoYXQgdGhlIGJ1dHRvbiBpcyBvbmNlIGFnYWluXG4gICAgICogcmVhY3RpdmF0ZWQhIE1vdmUgaXQgYmFjayBhbmQgZm9ydGggc2V2ZXJhbCB0aW1lcyB3aGlsZSB0aGUgc2Nyb2xsIHZpZXdcbiAgICAgKiBpcyBkaXNhYmxlZC4gRW5zdXJlIHlvdSBwYXNzIGluIGEgY29uc3RhbnQgdG8gcmVkdWNlIG1lbW9yeSBhbGxvY2F0aW9ucy5cbiAgICAgKi9cbiAgICBwcmVzc1JldGVudGlvbk9mZnNldDogRGVwcmVjYXRlZEVkZ2VJbnNldHNQcm9wVHlwZSxcbiAgICAvKipcbiAgICAgKiBUaGlzIGRlZmluZXMgaG93IGZhciB5b3VyIHRvdWNoIGNhbiBzdGFydCBhd2F5IGZyb20gdGhlIGJ1dHRvbi4gVGhpcyBpc1xuICAgICAqIGFkZGVkIHRvIGBwcmVzc1JldGVudGlvbk9mZnNldGAgd2hlbiBtb3Zpbmcgb2ZmIG9mIHRoZSBidXR0b24uXG4gICAgICogKiogTk9URSAqKlxuICAgICAqIFRoZSB0b3VjaCBhcmVhIG5ldmVyIGV4dGVuZHMgcGFzdCB0aGUgcGFyZW50IHZpZXcgYm91bmRzIGFuZCB0aGUgWi1pbmRleFxuICAgICAqIG9mIHNpYmxpbmcgdmlld3MgYWx3YXlzIHRha2VzIHByZWNlZGVuY2UgaWYgYSB0b3VjaCBoaXRzIHR3byBvdmVybGFwcGluZ1xuICAgICAqIHZpZXdzLlxuICAgICAqL1xuICAgIGhpdFNsb3A6IERlcHJlY2F0ZWRFZGdlSW5zZXRzUHJvcFR5cGUsXG4gIH0sXG5cbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b3VjaGFibGVHZXRJbml0aWFsU3RhdGUoKTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgZW5zdXJlUG9zaXRpdmVEZWxheVByb3BzKHRoaXMucHJvcHMpO1xuICB9LFxuXG4gIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXh0UHJvcHM6IE9iamVjdCkge1xuICAgIGVuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcyhuZXh0UHJvcHMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBgVG91Y2hhYmxlLk1peGluYCBzZWxmIGNhbGxiYWNrcy4gVGhlIG1peGluIHdpbGwgaW52b2tlIHRoZXNlIGlmIHRoZXkgYXJlXG4gICAqIGRlZmluZWQgb24geW91ciBjb21wb25lbnQuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVQcmVzczogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25QcmVzcyAmJiB0aGlzLnByb3BzLm9uUHJlc3MoZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbjogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25QcmVzc0luICYmIHRoaXMucHJvcHMub25QcmVzc0luKGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0OiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vblByZXNzT3V0ICYmIHRoaXMucHJvcHMub25QcmVzc091dChlKTtcbiAgfSxcblxuICB0b3VjaGFibGVIYW5kbGVMb25nUHJlc3M6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLm9uTG9uZ1ByZXNzICYmIHRoaXMucHJvcHMub25Mb25nUHJlc3MoZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0OiBmdW5jdGlvbigpOiB0eXBlb2YgUFJFU1NfUkVURU5USU9OX09GRlNFVCB7XG4gICAgLy8gJEZsb3dGaXhNZSBJbnZhbGlkIHByb3AgdXNhZ2VcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5wcmVzc1JldGVudGlvbk9mZnNldCB8fCBQUkVTU19SRVRFTlRJT05fT0ZGU0VUO1xuICB9LFxuXG4gIHRvdWNoYWJsZUdldEhpdFNsb3A6IGZ1bmN0aW9uKCk6ID9PYmplY3Qge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmhpdFNsb3A7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUzogZnVuY3Rpb24oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kZWxheVByZXNzSW4gfHwgMDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRMb25nUHJlc3NEZWxheU1TOiBmdW5jdGlvbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRlbGF5TG9uZ1ByZXNzID09PSAwXG4gICAgICA/IDBcbiAgICAgIDogdGhpcy5wcm9wcy5kZWxheUxvbmdQcmVzcyB8fCA1MDA7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TOiBmdW5jdGlvbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRlbGF5UHJlc3NPdXQgfHwgMDtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCk6IFJlYWN0LkVsZW1lbnQ8YW55PiB7XG4gICAgLy8gTm90ZShhdmlrKTogcmVtb3ZlIGR5bmFtaWMgdHlwZWNhc3Qgb25jZSBGbG93IGhhcyBiZWVuIHVwZ3JhZGVkXG4gICAgLy8gJEZsb3dGaXhNZSg+PTAuNDEuMClcbiAgICBjb25zdCBjaGlsZCA9IFJlYWN0LkNoaWxkcmVuLm9ubHkodGhpcy5wcm9wcy5jaGlsZHJlbik7XG4gICAgbGV0IGNoaWxkcmVuID0gY2hpbGQucHJvcHMuY2hpbGRyZW47XG4gICAgaWYgKFRvdWNoYWJsZS5UT1VDSF9UQVJHRVRfREVCVUcgJiYgY2hpbGQudHlwZSA9PT0gVmlldykge1xuICAgICAgY2hpbGRyZW4gPSBSZWFjdC5DaGlsZHJlbi50b0FycmF5KGNoaWxkcmVuKTtcbiAgICAgIGNoaWxkcmVuLnB1c2goXG4gICAgICAgIFRvdWNoYWJsZS5yZW5kZXJEZWJ1Z1ZpZXcoe2NvbG9yOiAncmVkJywgaGl0U2xvcDogdGhpcy5wcm9wcy5oaXRTbG9wfSksXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IG92ZXJyaWRlcyA9IHt9O1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPVkVSUklERV9QUk9QUykge1xuICAgICAgaWYgKHRoaXMucHJvcHNbcHJvcF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvdmVycmlkZXNbcHJvcF0gPSB0aGlzLnByb3BzW3Byb3BdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAoUmVhY3Q6IGFueSkuY2xvbmVFbGVtZW50KGNoaWxkLCB7XG4gICAgICAuLi5vdmVycmlkZXMsXG4gICAgICBhY2Nlc3NpYmxlOiB0aGlzLnByb3BzLmFjY2Vzc2libGUgIT09IGZhbHNlLFxuICAgICAgZm9jdXNhYmxlOlxuICAgICAgICB0aGlzLnByb3BzLmZvY3VzYWJsZSAhPT0gZmFsc2UgJiYgdGhpcy5wcm9wcy5vblByZXNzICE9PSB1bmRlZmluZWQsXG4gICAgICBvbkNsaWNrOiB0aGlzLnRvdWNoYWJsZUhhbmRsZVByZXNzLFxuICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcjogdGhpcy50b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlcixcbiAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0OiB0aGlzXG4gICAgICAgIC50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QsXG4gICAgICBvblJlc3BvbmRlckdyYW50OiB0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlckdyYW50LFxuICAgICAgb25SZXNwb25kZXJNb3ZlOiB0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUsXG4gICAgICBvblJlc3BvbmRlclJlbGVhc2U6IHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZSxcbiAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRlOiB0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZSxcbiAgICAgIGNoaWxkcmVuLFxuICAgIH0pO1xuICB9LFxufSk6IGFueSk6IFJlYWN0LkNvbXBvbmVudFR5cGU8UHJvcHM+KTtcblxubW9kdWxlLmV4cG9ydHMgPSBUb3VjaGFibGVXaXRob3V0RmVlZGJhY2s7XG4iXX0=