64dd93a251b81160a0a5bec614ddff0c
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var Animated = require('../../Animated/src/Animated');

var Easing = require('../../Animated/src/Easing');

var NativeMethodsMixin = require('../../Renderer/shims/NativeMethodsMixin');

var Platform = require('../../Utilities/Platform');

var React = require('react');

var PropTypes = require('prop-types');

var Touchable = require('./Touchable');

var TouchableWithoutFeedback = require('./TouchableWithoutFeedback');

var createReactClass = require('create-react-class');

var ensurePositiveDelayProps = require('./ensurePositiveDelayProps');

var flattenStyle = require('../../StyleSheet/flattenStyle');

var PRESS_RETENTION_OFFSET = {
  top: 20,
  left: 20,
  right: 20,
  bottom: 30
};
var TouchableOpacity = createReactClass({
  displayName: 'TouchableOpacity',
  mixins: [Touchable.Mixin.withoutDefaultFocusAndBlur, NativeMethodsMixin],
  propTypes: _objectSpread({}, TouchableWithoutFeedback.propTypes, {
    activeOpacity: PropTypes.number,
    hasTVPreferredFocus: PropTypes.bool,
    nextFocusDown: PropTypes.number,
    nextFocusForward: PropTypes.number,
    nextFocusLeft: PropTypes.number,
    nextFocusRight: PropTypes.number,
    nextFocusUp: PropTypes.number,
    tvParallaxProperties: PropTypes.object
  }),
  getDefaultProps: function getDefaultProps() {
    return {
      activeOpacity: 0.2
    };
  },
  getInitialState: function getInitialState() {
    return _objectSpread({}, this.touchableGetInitialState(), {
      anim: new Animated.Value(this._getChildStyleOpacityWithDefault())
    });
  },
  componentDidMount: function componentDidMount() {
    ensurePositiveDelayProps(this.props);
  },
  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {
    ensurePositiveDelayProps(nextProps);
  },
  componentDidUpdate: function componentDidUpdate(prevProps, prevState) {
    if (this.props.disabled !== prevProps.disabled) {
      this._opacityInactive(250);
    }
  },
  setOpacityTo: function setOpacityTo(value, duration) {
    Animated.timing(this.state.anim, {
      toValue: value,
      duration: duration,
      easing: Easing.inOut(Easing.quad),
      useNativeDriver: true
    }).start();
  },
  touchableHandleActivePressIn: function touchableHandleActivePressIn(e) {
    if (e.dispatchConfig.registrationName === 'onResponderGrant') {
      this._opacityActive(0);
    } else {
      this._opacityActive(150);
    }

    this.props.onPressIn && this.props.onPressIn(e);
  },
  touchableHandleActivePressOut: function touchableHandleActivePressOut(e) {
    this._opacityInactive(250);

    this.props.onPressOut && this.props.onPressOut(e);
  },
  touchableHandleFocus: function touchableHandleFocus(e) {
    if (Platform.isTV) {
      this._opacityActive(150);
    }

    this.props.onFocus && this.props.onFocus(e);
  },
  touchableHandleBlur: function touchableHandleBlur(e) {
    if (Platform.isTV) {
      this._opacityInactive(250);
    }

    this.props.onBlur && this.props.onBlur(e);
  },
  touchableHandlePress: function touchableHandlePress(e) {
    this.props.onPress && this.props.onPress(e);
  },
  touchableHandleLongPress: function touchableHandleLongPress(e) {
    this.props.onLongPress && this.props.onLongPress(e);
  },
  touchableGetPressRectOffset: function touchableGetPressRectOffset() {
    return this.props.pressRetentionOffset || PRESS_RETENTION_OFFSET;
  },
  touchableGetHitSlop: function touchableGetHitSlop() {
    return this.props.hitSlop;
  },
  touchableGetHighlightDelayMS: function touchableGetHighlightDelayMS() {
    return this.props.delayPressIn || 0;
  },
  touchableGetLongPressDelayMS: function touchableGetLongPressDelayMS() {
    return this.props.delayLongPress === 0 ? 0 : this.props.delayLongPress || 500;
  },
  touchableGetPressOutDelayMS: function touchableGetPressOutDelayMS() {
    return this.props.delayPressOut;
  },
  _opacityActive: function _opacityActive(duration) {
    this.setOpacityTo(this.props.activeOpacity, duration);
  },
  _opacityInactive: function _opacityInactive(duration) {
    this.setOpacityTo(this._getChildStyleOpacityWithDefault(), duration);
  },
  _getChildStyleOpacityWithDefault: function _getChildStyleOpacityWithDefault() {
    var childStyle = flattenStyle(this.props.style) || {};
    return childStyle.opacity == null ? 1 : childStyle.opacity;
  },
  render: function render() {
    return React.createElement(Animated.View, {
      accessible: this.props.accessible !== false,
      accessibilityLabel: this.props.accessibilityLabel,
      accessibilityHint: this.props.accessibilityHint,
      accessibilityRole: this.props.accessibilityRole,
      accessibilityStates: this.props.accessibilityStates,
      accessibilityState: this.props.accessibilityState,
      accessibilityActions: this.props.accessibilityActions,
      onAccessibilityAction: this.props.onAccessibilityAction,
      style: [this.props.style, {
        opacity: this.state.anim
      }],
      nativeID: this.props.nativeID,
      testID: this.props.testID,
      onLayout: this.props.onLayout,
      isTVSelectable: true,
      nextFocusDown: this.props.nextFocusDown,
      nextFocusForward: this.props.nextFocusForward,
      nextFocusLeft: this.props.nextFocusLeft,
      nextFocusRight: this.props.nextFocusRight,
      nextFocusUp: this.props.nextFocusUp,
      hasTVPreferredFocus: this.props.hasTVPreferredFocus,
      tvParallaxProperties: this.props.tvParallaxProperties,
      hitSlop: this.props.hitSlop,
      focusable: this.props.focusable !== false && this.props.onPress !== undefined,
      onClick: this.touchableHandlePress,
      onStartShouldSetResponder: this.touchableHandleStartShouldSetResponder,
      onResponderTerminationRequest: this.touchableHandleResponderTerminationRequest,
      onResponderGrant: this.touchableHandleResponderGrant,
      onResponderMove: this.touchableHandleResponderMove,
      onResponderRelease: this.touchableHandleResponderRelease,
      onResponderTerminate: this.touchableHandleResponderTerminate
    }, this.props.children, Touchable.renderDebugView({
      color: 'cyan',
      hitSlop: this.props.hitSlop
    }));
  }
});
module.exports = TouchableOpacity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZU9wYWNpdHkuanMiXSwibmFtZXMiOlsiQW5pbWF0ZWQiLCJyZXF1aXJlIiwiRWFzaW5nIiwiTmF0aXZlTWV0aG9kc01peGluIiwiUGxhdGZvcm0iLCJSZWFjdCIsIlByb3BUeXBlcyIsIlRvdWNoYWJsZSIsIlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayIsImNyZWF0ZVJlYWN0Q2xhc3MiLCJlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMiLCJmbGF0dGVuU3R5bGUiLCJQUkVTU19SRVRFTlRJT05fT0ZGU0VUIiwidG9wIiwibGVmdCIsInJpZ2h0IiwiYm90dG9tIiwiVG91Y2hhYmxlT3BhY2l0eSIsImRpc3BsYXlOYW1lIiwibWl4aW5zIiwiTWl4aW4iLCJ3aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1ciIsInByb3BUeXBlcyIsImFjdGl2ZU9wYWNpdHkiLCJudW1iZXIiLCJoYXNUVlByZWZlcnJlZEZvY3VzIiwiYm9vbCIsIm5leHRGb2N1c0Rvd24iLCJuZXh0Rm9jdXNGb3J3YXJkIiwibmV4dEZvY3VzTGVmdCIsIm5leHRGb2N1c1JpZ2h0IiwibmV4dEZvY3VzVXAiLCJ0dlBhcmFsbGF4UHJvcGVydGllcyIsIm9iamVjdCIsImdldERlZmF1bHRQcm9wcyIsImdldEluaXRpYWxTdGF0ZSIsInRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSIsImFuaW0iLCJWYWx1ZSIsIl9nZXRDaGlsZFN0eWxlT3BhY2l0eVdpdGhEZWZhdWx0IiwiY29tcG9uZW50RGlkTW91bnQiLCJwcm9wcyIsIlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIiwibmV4dFByb3BzIiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwicHJldlN0YXRlIiwiZGlzYWJsZWQiLCJfb3BhY2l0eUluYWN0aXZlIiwic2V0T3BhY2l0eVRvIiwidmFsdWUiLCJkdXJhdGlvbiIsInRpbWluZyIsInN0YXRlIiwidG9WYWx1ZSIsImVhc2luZyIsImluT3V0IiwicXVhZCIsInVzZU5hdGl2ZURyaXZlciIsInN0YXJ0IiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbiIsImUiLCJkaXNwYXRjaENvbmZpZyIsInJlZ2lzdHJhdGlvbk5hbWUiLCJfb3BhY2l0eUFjdGl2ZSIsIm9uUHJlc3NJbiIsInRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0Iiwib25QcmVzc091dCIsInRvdWNoYWJsZUhhbmRsZUZvY3VzIiwiaXNUViIsIm9uRm9jdXMiLCJ0b3VjaGFibGVIYW5kbGVCbHVyIiwib25CbHVyIiwidG91Y2hhYmxlSGFuZGxlUHJlc3MiLCJvblByZXNzIiwidG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzIiwib25Mb25nUHJlc3MiLCJ0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQiLCJwcmVzc1JldGVudGlvbk9mZnNldCIsInRvdWNoYWJsZUdldEhpdFNsb3AiLCJoaXRTbG9wIiwidG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUyIsImRlbGF5UHJlc3NJbiIsInRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMiLCJkZWxheUxvbmdQcmVzcyIsInRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUyIsImRlbGF5UHJlc3NPdXQiLCJjaGlsZFN0eWxlIiwic3R5bGUiLCJvcGFjaXR5IiwicmVuZGVyIiwiYWNjZXNzaWJsZSIsImFjY2Vzc2liaWxpdHlMYWJlbCIsImFjY2Vzc2liaWxpdHlIaW50IiwiYWNjZXNzaWJpbGl0eVJvbGUiLCJhY2Nlc3NpYmlsaXR5U3RhdGVzIiwiYWNjZXNzaWJpbGl0eVN0YXRlIiwiYWNjZXNzaWJpbGl0eUFjdGlvbnMiLCJvbkFjY2Vzc2liaWxpdHlBY3Rpb24iLCJuYXRpdmVJRCIsInRlc3RJRCIsIm9uTGF5b3V0IiwiZm9jdXNhYmxlIiwidW5kZWZpbmVkIiwidG91Y2hhYmxlSGFuZGxlU3RhcnRTaG91bGRTZXRSZXNwb25kZXIiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudCIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlIiwiY2hpbGRyZW4iLCJyZW5kZXJEZWJ1Z1ZpZXciLCJjb2xvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOzs7Ozs7Ozs7O0FBRUEsSUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsNkJBQUQsQ0FBeEI7O0FBQ0EsSUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsMkJBQUQsQ0FBdEI7O0FBQ0EsSUFBTUUsa0JBQWtCLEdBQUdGLE9BQU8sQ0FBQyx5Q0FBRCxDQUFsQzs7QUFDQSxJQUFNRyxRQUFRLEdBQUdILE9BQU8sQ0FBQywwQkFBRCxDQUF4Qjs7QUFDQSxJQUFNSSxLQUFLLEdBQUdKLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLElBQU1LLFNBQVMsR0FBR0wsT0FBTyxDQUFDLFlBQUQsQ0FBekI7O0FBQ0EsSUFBTU0sU0FBUyxHQUFHTixPQUFPLENBQUMsYUFBRCxDQUF6Qjs7QUFDQSxJQUFNTyx3QkFBd0IsR0FBR1AsT0FBTyxDQUFDLDRCQUFELENBQXhDOztBQUVBLElBQU1RLGdCQUFnQixHQUFHUixPQUFPLENBQUMsb0JBQUQsQ0FBaEM7O0FBQ0EsSUFBTVMsd0JBQXdCLEdBQUdULE9BQU8sQ0FBQyw0QkFBRCxDQUF4Qzs7QUFDQSxJQUFNVSxZQUFZLEdBQUdWLE9BQU8sQ0FBQywrQkFBRCxDQUE1Qjs7QUFPQSxJQUFNVyxzQkFBc0IsR0FBRztBQUFDQyxFQUFBQSxHQUFHLEVBQUUsRUFBTjtBQUFVQyxFQUFBQSxJQUFJLEVBQUUsRUFBaEI7QUFBb0JDLEVBQUFBLEtBQUssRUFBRSxFQUEzQjtBQUErQkMsRUFBQUEsTUFBTSxFQUFFO0FBQXZDLENBQS9CO0FBMkdBLElBQU1DLGdCQUFnQixHQUFLUixnQkFBZ0IsQ0FBQztBQUMxQ1MsRUFBQUEsV0FBVyxF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LENBQVd1QyxPQXJCdEI7QUFzQkUsTUFBQSxTQUFTLEVBQ1AsS0FBS3ZDLEtBQUwsQ0FBVzZELFNBQVgsS0FBeUIsS0FBekIsSUFBa0MsS0FBSzdELEtBQUwsQ0FBV2lDLE9BQVgsS0FBdUI2QixTQXZCN0Q7QUF5QkUsTUFBQSxPQUFPLEVBQUUsS0FBSzlCLG9CQXpCaEI7QUEwQkUsTUFBQSx5QkFBeUIsRUFBRSxLQUFLK0Isc0NBMUJsQztBQTJCRSxNQUFBLDZCQUE2QixFQUMzQixLQUFLQywwQ0E1QlQ7QUE4QkUsTUFBQSxnQkFBZ0IsRUFBRSxLQUFLQyw2QkE5QnpCO0FBK0JFLE1BQUEsZUFBZSxFQUFFLEtBQUtDLDRCQS9CeEI7QUFnQ0UsTUFBQSxrQkFBa0IsRUFBRSxLQUFLQywrQkFoQzNCO0FBaUNFLE1BQUEsb0JBQW9CLEVBQUUsS0FBS0M7QUFqQzdCLE9Ba0NHLEtBQUtwRSxLQUFMLENBQVdxRSxRQWxDZCxFQW1DR3ZHLFNBQVMsQ0FBQ3dHLGVBQVYsQ0FBMEI7QUFDekJDLE1BQUFBLEtBQUssRUFBRSxNQURrQjtBQUV6QmhDLE1BQUFBLE9BQU8sRUFBRSxLQUFLdkMsS0FBTCxDQUFXdUM7QUFGSyxLQUExQixDQW5DSCxDQURGO0FBMENEO0FBbk55QyxDQUFELENBQTNDO0FBc05BaUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCakcsZ0JBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvd1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgQW5pbWF0ZWQgPSByZXF1aXJlKCcuLi8uLi9BbmltYXRlZC9zcmMvQW5pbWF0ZWQnKTtcbmNvbnN0IEVhc2luZyA9IHJlcXVpcmUoJy4uLy4uL0FuaW1hdGVkL3NyYy9FYXNpbmcnKTtcbmNvbnN0IE5hdGl2ZU1ldGhvZHNNaXhpbiA9IHJlcXVpcmUoJy4uLy4uL1JlbmRlcmVyL3NoaW1zL05hdGl2ZU1ldGhvZHNNaXhpbicpO1xuY29uc3QgUGxhdGZvcm0gPSByZXF1aXJlKCcuLi8uLi9VdGlsaXRpZXMvUGxhdGZvcm0nKTtcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbmNvbnN0IFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbmNvbnN0IFRvdWNoYWJsZSA9IHJlcXVpcmUoJy4vVG91Y2hhYmxlJyk7XG5jb25zdCBUb3VjaGFibGVXaXRob3V0RmVlZGJhY2sgPSByZXF1aXJlKCcuL1RvdWNoYWJsZVdpdGhvdXRGZWVkYmFjaycpO1xuXG5jb25zdCBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG5jb25zdCBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMgPSByZXF1aXJlKCcuL2Vuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcycpO1xuY29uc3QgZmxhdHRlblN0eWxlID0gcmVxdWlyZSgnLi4vLi4vU3R5bGVTaGVldC9mbGF0dGVuU3R5bGUnKTtcblxuaW1wb3J0IHR5cGUge1Byb3BzIGFzIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFja1Byb3BzfSBmcm9tICcuL1RvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayc7XG5pbXBvcnQgdHlwZSB7Vmlld1N0eWxlUHJvcH0gZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0JztcbmltcG9ydCB0eXBlIHtUVlBhcmFsbGF4UHJvcGVydGllc1R5cGV9IGZyb20gJy4uL0FwcGxlVFYvVFZWaWV3UHJvcFR5cGVzJztcbmltcG9ydCB0eXBlIHtQcmVzc0V2ZW50fSBmcm9tICcuLi8uLi9UeXBlcy9Db3JlRXZlbnRUeXBlcyc7XG5cbmNvbnN0IFBSRVNTX1JFVEVOVElPTl9PRkZTRVQgPSB7dG9wOiAyMCwgbGVmdDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMH07XG5cbnR5cGUgVFZQcm9wcyA9ICRSZWFkT25seTx7fFxuICBoYXNUVlByZWZlcnJlZEZvY3VzPzogP2Jvb2xlYW4sXG4gIG5leHRGb2N1c0Rvd24/OiA/bnVtYmVyLFxuICBuZXh0Rm9jdXNGb3J3YXJkPzogP251bWJlcixcbiAgbmV4dEZvY3VzTGVmdD86ID9udW1iZXIsXG4gIG5leHRGb2N1c1JpZ2h0PzogP251bWJlcixcbiAgbmV4dEZvY3VzVXA/OiA/bnVtYmVyLFxuICB0dlBhcmFsbGF4UHJvcGVydGllcz86ID9UVlBhcmFsbGF4UHJvcGVydGllc1R5cGUsXG58fT47XG5cbnR5cGUgUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLi4uVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrUHJvcHMsXG4gIC4uLlRWUHJvcHMsXG4gIGFjdGl2ZU9wYWNpdHk/OiA/bnVtYmVyLFxuICBzdHlsZT86ID9WaWV3U3R5bGVQcm9wLFxufH0+O1xuXG4vKipcbiAqIEEgd3JhcHBlciBmb3IgbWFraW5nIHZpZXdzIHJlc3BvbmQgcHJvcGVybHkgdG8gdG91Y2hlcy5cbiAqIE9uIHByZXNzIGRvd24sIHRoZSBvcGFjaXR5IG9mIHRoZSB3cmFwcGVkIHZpZXcgaXMgZGVjcmVhc2VkLCBkaW1taW5nIGl0LlxuICpcbiAqIE9wYWNpdHkgaXMgY29udHJvbGxlZCBieSB3cmFwcGluZyB0aGUgY2hpbGRyZW4gaW4gYW4gQW5pbWF0ZWQuVmlldywgd2hpY2ggaXNcbiAqIGFkZGVkIHRvIHRoZSB2aWV3IGhpZXJhcmNoeS4gIEJlIGF3YXJlIHRoYXQgdGhpcyBjYW4gYWZmZWN0IGxheW91dC5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYFxuICogcmVuZGVyQnV0dG9uOiBmdW5jdGlvbigpIHtcbiAqICAgcmV0dXJuIChcbiAqICAgICA8VG91Y2hhYmxlT3BhY2l0eSBvblByZXNzPXt0aGlzLl9vblByZXNzQnV0dG9ufT5cbiAqICAgICAgIDxJbWFnZVxuICogICAgICAgICBzdHlsZT17c3R5bGVzLmJ1dHRvbn1cbiAqICAgICAgICAgc291cmNlPXtyZXF1aXJlKCcuL215QnV0dG9uLnBuZycpfVxuICogICAgICAgLz5cbiAqICAgICA8L1RvdWNoYWJsZU9wYWNpdHk+XG4gKiAgICk7XG4gKiB9LFxuICogYGBgXG4gKiAjIyMgRXhhbXBsZVxuICpcbiAqIGBgYFJlYWN0TmF0aXZlV2ViUGxheWVyXG4gKiBpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG4gKiBpbXBvcnQge1xuICogICBBcHBSZWdpc3RyeSxcbiAqICAgU3R5bGVTaGVldCxcbiAqICAgVG91Y2hhYmxlT3BhY2l0eSxcbiAqICAgVGV4dCxcbiAqICAgVmlldyxcbiAqIH0gZnJvbSAncmVhY3QtbmF0aXZlJ1xuICpcbiAqIGNsYXNzIEFwcCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gKiAgICAgc3VwZXIocHJvcHMpXG4gKiAgICAgdGhpcy5zdGF0ZSA9IHsgY291bnQ6IDAgfVxuICogICB9XG4gKlxuICogICBvblByZXNzID0gKCkgPT4ge1xuICogICAgIHRoaXMuc2V0U3RhdGUoe1xuICogICAgICAgY291bnQ6IHRoaXMuc3RhdGUuY291bnQrMVxuICogICAgIH0pXG4gKiAgIH1cbiAqXG4gKiAgcmVuZGVyKCkge1xuICogICAgcmV0dXJuIChcbiAqICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxuICogICAgICAgIDxUb3VjaGFibGVPcGFjaXR5XG4gKiAgICAgICAgICBzdHlsZT17c3R5bGVzLmJ1dHRvbn1cbiAqICAgICAgICAgIG9uUHJlc3M9e3RoaXMub25QcmVzc31cbiAqICAgICAgICA+XG4gKiAgICAgICAgICA8VGV4dD4gVG91Y2ggSGVyZSA8L1RleHQ+XG4gKiAgICAgICAgPC9Ub3VjaGFibGVPcGFjaXR5PlxuICogICAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLmNvdW50Q29udGFpbmVyXX0+XG4gKiAgICAgICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy5jb3VudFRleHRdfT5cbiAqICAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5jb3VudCAhPT0gMCA/IHRoaXMuc3RhdGUuY291bnQ6IG51bGx9XG4gKiAgICAgICAgICAgPC9UZXh0PlxuICogICAgICAgICA8L1ZpZXc+XG4gKiAgICAgICA8L1ZpZXc+XG4gKiAgICAgKVxuICogICB9XG4gKiB9XG4gKlxuICogY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICogICBjb250YWluZXI6IHtcbiAqICAgICBmbGV4OiAxLFxuICogICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAqICAgICBwYWRkaW5nSG9yaXpvbnRhbDogMTBcbiAqICAgfSxcbiAqICAgYnV0dG9uOiB7XG4gKiAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gKiAgICAgYmFja2dyb3VuZENvbG9yOiAnI0RERERERCcsXG4gKiAgICAgcGFkZGluZzogMTBcbiAqICAgfSxcbiAqICAgY291bnRDb250YWluZXI6IHtcbiAqICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAqICAgICBwYWRkaW5nOiAxMFxuICogICB9LFxuICogICBjb3VudFRleHQ6IHtcbiAqICAgICBjb2xvcjogJyNGRjAwRkYnXG4gKiAgIH1cbiAqIH0pXG4gKlxuICogQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoJ0FwcCcsICgpID0+IEFwcClcbiAqIGBgYFxuICpcbiAqL1xuY29uc3QgVG91Y2hhYmxlT3BhY2l0eSA9ICgoY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnVG91Y2hhYmxlT3BhY2l0eScsXG4gIG1peGluczogW1RvdWNoYWJsZS5NaXhpbi53aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1ciwgTmF0aXZlTWV0aG9kc01peGluXSxcblxuICBwcm9wVHlwZXM6IHtcbiAgICAvKiAkRmxvd0ZpeE1lKD49MC44OS4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhblxuICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC44OSB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IsIGRlbGV0ZSB0aGlzXG4gICAgICogY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgLi4uVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrLnByb3BUeXBlcyxcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoYXQgdGhlIG9wYWNpdHkgb2YgdGhlIHdyYXBwZWQgdmlldyBzaG91bGQgYmUgd2hlbiB0b3VjaCBpc1xuICAgICAqIGFjdGl2ZS4gRGVmYXVsdHMgdG8gMC4yLlxuICAgICAqL1xuICAgIGFjdGl2ZU9wYWNpdHk6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgLyoqXG4gICAgICogVFYgcHJlZmVycmVkIGZvY3VzIChzZWUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIFZpZXcgY29tcG9uZW50KS5cbiAgICAgKi9cbiAgICBoYXNUVlByZWZlcnJlZEZvY3VzOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAvKipcbiAgICAgKiBUViBuZXh0IGZvY3VzIGRvd24gKHNlZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgVmlldyBjb21wb25lbnQpLlxuICAgICAqXG4gICAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICAgKi9cbiAgICBuZXh0Rm9jdXNEb3duOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIC8qKlxuICAgICAqIFRWIG5leHQgZm9jdXMgZm9yd2FyZCAoc2VlIGRvY3VtZW50YXRpb24gZm9yIHRoZSBWaWV3IGNvbXBvbmVudCkuXG4gICAgICpcbiAgICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgICAqL1xuICAgIG5leHRGb2N1c0ZvcndhcmQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgLyoqXG4gICAgICogVFYgbmV4dCBmb2N1cyBsZWZ0IChzZWUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIFZpZXcgY29tcG9uZW50KS5cbiAgICAgKlxuICAgICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAgICovXG4gICAgbmV4dEZvY3VzTGVmdDogUHJvcFR5cGVzLm51bWJlcixcbiAgICAvKipcbiAgICAgKiBUViBuZXh0IGZvY3VzIHJpZ2h0IChzZWUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIFZpZXcgY29tcG9uZW50KS5cbiAgICAgKlxuICAgICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAgICovXG4gICAgbmV4dEZvY3VzUmlnaHQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgLyoqXG4gICAgICogVFYgbmV4dCBmb2N1cyB1cCAoc2VlIGRvY3VtZW50YXRpb24gZm9yIHRoZSBWaWV3IGNvbXBvbmVudCkuXG4gICAgICpcbiAgICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgICAqL1xuICAgIG5leHRGb2N1c1VwOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIC8qKlxuICAgICAqIEFwcGxlIFRWIHBhcmFsbGF4IGVmZmVjdHNcbiAgICAgKi9cbiAgICB0dlBhcmFsbGF4UHJvcGVydGllczogUHJvcFR5cGVzLm9iamVjdCxcbiAgfSxcblxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhY3RpdmVPcGFjaXR5OiAwLjIsXG4gICAgfTtcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLnRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSgpLFxuICAgICAgYW5pbTogbmV3IEFuaW1hdGVkLlZhbHVlKHRoaXMuX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQoKSksXG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgZW5zdXJlUG9zaXRpdmVEZWxheVByb3BzKHRoaXMucHJvcHMpO1xuICB9LFxuXG4gIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXh0UHJvcHMpIHtcbiAgICBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMobmV4dFByb3BzKTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuZGlzYWJsZWQgIT09IHByZXZQcm9wcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5fb3BhY2l0eUluYWN0aXZlKDI1MCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBBbmltYXRlIHRoZSB0b3VjaGFibGUgdG8gYSBuZXcgb3BhY2l0eS5cbiAgICovXG4gIHNldE9wYWNpdHlUbzogZnVuY3Rpb24odmFsdWU6IG51bWJlciwgZHVyYXRpb246IG51bWJlcikge1xuICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLnN0YXRlLmFuaW0sIHtcbiAgICAgIHRvVmFsdWU6IHZhbHVlLFxuICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgZWFzaW5nOiBFYXNpbmcuaW5PdXQoRWFzaW5nLnF1YWQpLFxuICAgICAgdXNlTmF0aXZlRHJpdmVyOiB0cnVlLFxuICAgIH0pLnN0YXJ0KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGBUb3VjaGFibGUuTWl4aW5gIHNlbGYgY2FsbGJhY2tzLiBUaGUgbWl4aW4gd2lsbCBpbnZva2UgdGhlc2UgaWYgdGhleSBhcmVcbiAgICogZGVmaW5lZCBvbiB5b3VyIGNvbXBvbmVudC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW46IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICBpZiAoZS5kaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lID09PSAnb25SZXNwb25kZXJHcmFudCcpIHtcbiAgICAgIHRoaXMuX29wYWNpdHlBY3RpdmUoMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX29wYWNpdHlBY3RpdmUoMTUwKTtcbiAgICB9XG4gICAgdGhpcy5wcm9wcy5vblByZXNzSW4gJiYgdGhpcy5wcm9wcy5vblByZXNzSW4oZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQ6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLl9vcGFjaXR5SW5hY3RpdmUoMjUwKTtcbiAgICB0aGlzLnByb3BzLm9uUHJlc3NPdXQgJiYgdGhpcy5wcm9wcy5vblByZXNzT3V0KGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZUZvY3VzOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIGlmIChQbGF0Zm9ybS5pc1RWKSB7XG4gICAgICB0aGlzLl9vcGFjaXR5QWN0aXZlKDE1MCk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMub25Gb2N1cyAmJiB0aGlzLnByb3BzLm9uRm9jdXMoZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlQmx1cjogZnVuY3Rpb24oZTogRXZlbnQpIHtcbiAgICBpZiAoUGxhdGZvcm0uaXNUVikge1xuICAgICAgdGhpcy5fb3BhY2l0eUluYWN0aXZlKDI1MCk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMub25CbHVyICYmIHRoaXMucHJvcHMub25CbHVyKGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZVByZXNzOiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vblByZXNzICYmIHRoaXMucHJvcHMub25QcmVzcyhlKTtcbiAgfSxcblxuICB0b3VjaGFibGVIYW5kbGVMb25nUHJlc3M6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLm9uTG9uZ1ByZXNzICYmIHRoaXMucHJvcHMub25Mb25nUHJlc3MoZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5wcmVzc1JldGVudGlvbk9mZnNldCB8fCBQUkVTU19SRVRFTlRJT05fT0ZGU0VUO1xuICB9LFxuXG4gIHRvdWNoYWJsZUdldEhpdFNsb3A6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmhpdFNsb3A7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGVsYXlQcmVzc0luIHx8IDA7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0TG9uZ1ByZXNzRGVsYXlNUzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGVsYXlMb25nUHJlc3MgPT09IDBcbiAgICAgID8gMFxuICAgICAgOiB0aGlzLnByb3BzLmRlbGF5TG9uZ1ByZXNzIHx8IDUwMDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRlbGF5UHJlc3NPdXQ7XG4gIH0sXG5cbiAgX29wYWNpdHlBY3RpdmU6IGZ1bmN0aW9uKGR1cmF0aW9uOiBudW1iZXIpIHtcbiAgICB0aGlzLnNldE9wYWNpdHlUbyh0aGlzLnByb3BzLmFjdGl2ZU9wYWNpdHksIGR1cmF0aW9uKTtcbiAgfSxcblxuICBfb3BhY2l0eUluYWN0aXZlOiBmdW5jdGlvbihkdXJhdGlvbjogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXRPcGFjaXR5VG8odGhpcy5fZ2V0Q2hpbGRTdHlsZU9wYWNpdHlXaXRoRGVmYXVsdCgpLCBkdXJhdGlvbik7XG4gIH0sXG5cbiAgX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IGNoaWxkU3R5bGUgPSBmbGF0dGVuU3R5bGUodGhpcy5wcm9wcy5zdHlsZSkgfHwge307XG4gICAgcmV0dXJuIGNoaWxkU3R5bGUub3BhY2l0eSA9PSBudWxsID8gMSA6IGNoaWxkU3R5bGUub3BhY2l0eTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICBhY2Nlc3NpYmxlPXt0aGlzLnByb3BzLmFjY2Vzc2libGUgIT09IGZhbHNlfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eUxhYmVsfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5SGludD17dGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5SGludH1cbiAgICAgICAgYWNjZXNzaWJpbGl0eVJvbGU9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eVJvbGV9XG4gICAgICAgIGFjY2Vzc2liaWxpdHlTdGF0ZXM9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlc31cbiAgICAgICAgYWNjZXNzaWJpbGl0eVN0YXRlPXt0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlTdGF0ZX1cbiAgICAgICAgYWNjZXNzaWJpbGl0eUFjdGlvbnM9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eUFjdGlvbnN9XG4gICAgICAgIG9uQWNjZXNzaWJpbGl0eUFjdGlvbj17dGhpcy5wcm9wcy5vbkFjY2Vzc2liaWxpdHlBY3Rpb259XG4gICAgICAgIHN0eWxlPXtbdGhpcy5wcm9wcy5zdHlsZSwge29wYWNpdHk6IHRoaXMuc3RhdGUuYW5pbX1dfVxuICAgICAgICBuYXRpdmVJRD17dGhpcy5wcm9wcy5uYXRpdmVJRH1cbiAgICAgICAgdGVzdElEPXt0aGlzLnByb3BzLnRlc3RJRH1cbiAgICAgICAgb25MYXlvdXQ9e3RoaXMucHJvcHMub25MYXlvdXR9XG4gICAgICAgIGlzVFZTZWxlY3RhYmxlPXt0cnVlfVxuICAgICAgICBuZXh0Rm9jdXNEb3duPXt0aGlzLnByb3BzLm5leHRGb2N1c0Rvd259XG4gICAgICAgIG5leHRGb2N1c0ZvcndhcmQ9e3RoaXMucHJvcHMubmV4dEZvY3VzRm9yd2FyZH1cbiAgICAgICAgbmV4dEZvY3VzTGVmdD17dGhpcy5wcm9wcy5uZXh0Rm9jdXNMZWZ0fVxuICAgICAgICBuZXh0Rm9jdXNSaWdodD17dGhpcy5wcm9wcy5uZXh0Rm9jdXNSaWdodH1cbiAgICAgICAgbmV4dEZvY3VzVXA9e3RoaXMucHJvcHMubmV4dEZvY3VzVXB9XG4gICAgICAgIGhhc1RWUHJlZmVycmVkRm9jdXM9e3RoaXMucHJvcHMuaGFzVFZQcmVmZXJyZWRGb2N1c31cbiAgICAgICAgdHZQYXJhbGxheFByb3BlcnRpZXM9e3RoaXMucHJvcHMudHZQYXJhbGxheFByb3BlcnRpZXN9XG4gICAgICAgIGhpdFNsb3A9e3RoaXMucHJvcHMuaGl0U2xvcH1cbiAgICAgICAgZm9jdXNhYmxlPXtcbiAgICAgICAgICB0aGlzLnByb3BzLmZvY3VzYWJsZSAhPT0gZmFsc2UgJiYgdGhpcy5wcm9wcy5vblByZXNzICE9PSB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgICBvbkNsaWNrPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVByZXNzfVxuICAgICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyfVxuICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdD17XG4gICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3RcbiAgICAgICAgfVxuICAgICAgICBvblJlc3BvbmRlckdyYW50PXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlckdyYW50fVxuICAgICAgICBvblJlc3BvbmRlck1vdmU9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZX1cbiAgICAgICAgb25SZXNwb25kZXJSZWxlYXNlPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2V9XG4gICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRlPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZX0+XG4gICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICB7VG91Y2hhYmxlLnJlbmRlckRlYnVnVmlldyh7XG4gICAgICAgICAgY29sb3I6ICdjeWFuJyxcbiAgICAgICAgICBoaXRTbG9wOiB0aGlzLnByb3BzLmhpdFNsb3AsXG4gICAgICAgIH0pfVxuICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgICk7XG4gIH0sXG59KTogYW55KTogUmVhY3QuQ29tcG9uZW50VHlwZTxQcm9wcz4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRvdWNoYWJsZU9wYWNpdHk7XG4iXX0=