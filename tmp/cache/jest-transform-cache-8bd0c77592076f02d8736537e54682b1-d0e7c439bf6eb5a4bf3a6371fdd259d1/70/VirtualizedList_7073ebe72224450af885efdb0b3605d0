a646f2714d83a88e4893a395f3402187
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var Batchinator = require('../Interaction/Batchinator');

var FillRateHelper = require('./FillRateHelper');

var PropTypes = require('prop-types');

var React = require('react');

var ReactNative = require('../Renderer/shims/ReactNative');

var RefreshControl = require('../Components/RefreshControl/RefreshControl');

var ScrollView = require('../Components/ScrollView/ScrollView');

var StyleSheet = require('../StyleSheet/StyleSheet');

var View = require('../Components/View/View');

var ViewabilityHelper = require('./ViewabilityHelper');

var flattenStyle = require('../StyleSheet/flattenStyle');

var infoLog = require('../Utilities/infoLog');

var invariant = require('invariant');

var warning = require('fbjs/lib/warning');

var _require = require('./VirtualizeUtils'),
    computeWindowedRenderLimits = _require.computeWindowedRenderLimits;

var _usedIndexForKey = false;
var _keylessItemComponentName = '';

var VirtualizedList = function (_React$PureComponent) {
  (0, _inherits2["default"])(VirtualizedList, _React$PureComponent);
  (0, _createClass2["default"])(VirtualizedList, [{
    key: "scrollToEnd",
    value: function scrollToEnd(params) {
      var animated = params ? params.animated : true;
      var veryLast = this.props.getItemCount(this.props.data) - 1;

      var frame = this._getFrameMetricsApprox(veryLast);

      var offset = Math.max(0, frame.offset + frame.length + this._footerLength - this._scrollMetrics.visibleLength);

      this._scrollRef.scrollTo(this.props.horizontal ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "scrollToIndex",
    value: function scrollToIndex(params) {
      var _this$props = this.props,
          data = _this$props.data,
          horizontal = _this$props.horizontal,
          getItemCount = _this$props.getItemCount,
          getItemLayout = _this$props.getItemLayout,
          onScrollToIndexFailed = _this$props.onScrollToIndexFailed;
      var animated = params.animated,
          index = params.index,
          viewOffset = params.viewOffset,
          viewPosition = params.viewPosition;
      invariant(index >= 0 && index < getItemCount(data), "scrollToIndex out of range: requested index " + index + " but maximum is " + (getItemCount(data) - 1));

      if (!getItemLayout && index > this._highestMeasuredFrameIndex) {
        invariant(!!onScrollToIndexFailed, 'scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, ' + 'otherwise there is no way to know the location of offscreen indices or handle failures.');
        onScrollToIndexFailed({
          averageItemLength: this._averageCellLength,
          highestMeasuredFrameIndex: this._highestMeasuredFrameIndex,
          index: index
        });
        return;
      }

      var frame = this._getFrameMetricsApprox(index);

      var offset = Math.max(0, frame.offset - (viewPosition || 0) * (this._scrollMetrics.visibleLength - frame.length)) - (viewOffset || 0);

      this._scrollRef.scrollTo(horizontal ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "scrollToItem",
    value: function scrollToItem(params) {
      var item = params.item;
      var _this$props2 = this.props,
          data = _this$props2.data,
          getItem = _this$props2.getItem,
          getItemCount = _this$props2.getItemCount;
      var itemCount = getItemCount(data);

      for (var _index = 0; _index < itemCount; _index++) {
        if (getItem(data, _index) === item) {
          this.scrollToIndex(_objectSpread({}, params, {
            index: _index
          }));
          break;
        }
      }
    }
  }, {
    key: "scrollToOffset",
    value: function scrollToOffset(params) {
      var animated = params.animated,
          offset = params.offset;

      this._scrollRef.scrollTo(this.props.horizontal ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "recordInteraction",
    value: function recordInteraction() {
      this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref.recordInteraction();
      });

      this._viewabilityTuples.forEach(function (t) {
        t.viewabilityHelper.recordInteraction();
      });

      this._updateViewableItems(this.props.data);
    }
  }, {
    key: "flashScrollIndicators",
    value: function flashScrollIndicators() {
      this._scrollRef.flashScrollIndicators();
    }
  }, {
    key: "getScrollResponder",
    value: function getScrollResponder() {
      if (this._scrollRef && this._scrollRef.getScrollResponder) {
        return this._scrollRef.getScrollResponder();
      }
    }
  }, {
    key: "getScrollableNode",
    value: function getScrollableNode() {
      if (this._scrollRef && this._scrollRef.getScrollableNode) {
        return this._scrollRef.getScrollableNode();
      } else {
        return ReactNative.findNodeHandle(this._scrollRef);
      }
    }
  }, {
    key: "getScrollRef",
    value: function getScrollRef() {
      if (this._scrollRef && this._scrollRef.getScrollRef) {
        return this._scrollRef.getScrollRef();
      } else {
        return this._scrollRef;
      }
    }
  }, {
    key: "setNativeProps",
    value: function setNativeProps(props) {
      if (this._scrollRef) {
        this._scrollRef.setNativeProps(props);
      }
    }
  }, {
    key: "getChildContext",
    value: function getChildContext() {
      return {
        virtualizedList: {
          getScrollMetrics: this._getScrollMetrics,
          horizontal: this.props.horizontal,
          getOutermostParentListRef: this._getOutermostParentListRef,
          getNestedChildState: this._getNestedChildState,
          registerAsNestedChild: this._registerAsNestedChild,
          unregisterAsNestedChild: this._unregisterAsNestedChild
        }
      };
    }
  }, {
    key: "_getCellKey",
    value: function _getCellKey() {
      return this.context.virtualizedCell && this.context.virtualizedCell.cellKey || 'rootList';
    }
  }, {
    key: "hasMore",
    value: function hasMore() {
      return this._hasMore;
    }
  }]);

  function VirtualizedList(_props, context) {
    var _this;

    (0, _classCallCheck2["default"])(this, VirtualizedList);
    _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf3["default"])(VirtualizedList).call(this, _props, context));
    _this.props = void 0;

    _this._getScrollMetrics = function () {
      return _this._scrollMetrics;
    };

    _this._getOutermostParentListRef = function () {
      if (_this._isNestedWithSameOrientation()) {
        return _this.context.virtualizedList.getOutermostParentListRef();
      } else {
        return (0, _assertThisInitialized2["default"])(_this);
      }
    };

    _this._getNestedChildState = function (key) {
      var existingChildData = _this._nestedChildLists.get(key);

      return existingChildData && existingChildData.state;
    };

    _this._registerAsNestedChild = function (childList) {
      var childListsInCell = _this._cellKeysToChildListKeys.get(childList.cellKey) || new Set();
      childListsInCell.add(childList.key);

      _this._cellKeysToChildListKeys.set(childList.cellKey, childListsInCell);

      var existingChildData = _this._nestedChildLists.get(childList.key);

      if (existingChildData && existingChildData.ref !== null) {
        console.error('A VirtualizedList contains a cell which itself contains ' + 'more than one VirtualizedList of the same orientation as the parent ' + 'list. You must pass a unique listKey prop to each sibling list.');
      }

      _this._nestedChildLists.set(childList.key, {
        ref: childList.ref,
        state: null
      });

      if (_this._hasInteracted) {
        childList.ref.recordInteraction();
      }
    };

    _this._unregisterAsNestedChild = function (childList) {
      _this._nestedChildLists.set(childList.key, {
        ref: null,
        state: childList.state
      });
    };

    _this.state = void 0;

    _this._onUpdateSeparators = function (keys, newProps) {
      keys.forEach(function (key) {
        var ref = key != null && _this._cellRefs[key];
        ref && ref.updateSeparatorProps(newProps);
      });
    };

    _this._averageCellLength = 0;
    _this._cellKeysToChildListKeys = new Map();
    _this._cellRefs = {};
    _this._fillRateHelper = void 0;
    _this._frames = {};
    _this._footerLength = 0;
    _this._hasDataChangedSinceEndReached = true;
    _this._hasDoneInitialScroll = false;
    _this._hasInteracted = false;
    _this._hasMore = false;
    _this._hasWarned = {};
    _this._headerLength = 0;
    _this._hiPriInProgress = false;
    _this._highestMeasuredFrameIndex = 0;
    _this._indicesToKeys = new Map();
    _this._nestedChildLists = new Map();
    _this._offsetFromParentVirtualizedList = 0;
    _this._prevParentOffset = 0;
    _this._scrollMetrics = {
      contentLength: 0,
      dOffset: 0,
      dt: 10,
      offset: 0,
      timestamp: 0,
      velocity: 0,
      visibleLength: 0
    };
    _this._scrollRef = null;
    _this._sentEndForContentLength = 0;
    _this._totalCellLength = 0;
    _this._totalCellsMeasured = 0;
    _this._updateCellsToRenderBatcher = void 0;
    _this._viewabilityTuples = [];

    _this._captureScrollRef = function (ref) {
      _this._scrollRef = ref;
    };

    _this._defaultRenderScrollComponent = function (props) {
      var onRefresh = props.onRefresh;

      if (_this._isNestedWithSameOrientation()) {
        return React.createElement(View, props);
      } else if (onRefresh) {
        invariant(typeof props.refreshing === 'boolean', '`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `' + JSON.stringify(props.refreshing) + '`');
        return React.createElement(ScrollView, (0, _extends2["default"])({}, props, {
          refreshControl: props.refreshControl == null ? React.createElement(RefreshControl, {
            refreshing: props.refreshing,
            onRefresh: onRefresh,
            progressViewOffset: props.progressViewOffset
          }) : props.refreshControl
        }));
      } else {
        return React.createElement(ScrollView, props);
      }
    };

    _this._onCellUnmount = function (cellKey) {
      var curr = _this._frames[cellKey];

      if (curr) {
        _this._frames[cellKey] = _objectSpread({}, curr, {
          inLayout: false
        });
      }
    };

    _this._onLayout = function (e) {
      if (_this._isNestedWithSameOrientation()) {
        _this.measureLayoutRelativeToContainingList();
      } else {
        _this._scrollMetrics.visibleLength = _this._selectLength(e.nativeEvent.layout);
      }

      _this.props.onLayout && _this.props.onLayout(e);

      _this._scheduleCellsToRenderUpdate();

      _this._maybeCallOnEndReached();
    };

    _this._onLayoutEmpty = function (e) {
      _this.props.onLayout && _this.props.onLayout(e);
    };

    _this._onLayoutFooter = function (e) {
      _this._footerLength = _this._selectLength(e.nativeEvent.layout);
    };

    _this._onLayoutHeader = function (e) {
      _this._headerLength = _this._selectLength(e.nativeEvent.layout);
    };

    _this._onContentSizeChange = function (width, height) {
      if (width > 0 && height > 0 && _this.props.initialScrollIndex != null && _this.props.initialScrollIndex > 0 && !_this._hasDoneInitialScroll) {
        _this.scrollToIndex({
          animated: false,
          index: _this.props.initialScrollIndex
        });

        _this._hasDoneInitialScroll = true;
      }

      if (_this.props.onContentSizeChange) {
        _this.props.onContentSizeChange(width, height);
      }

      _this._scrollMetrics.contentLength = _this._selectLength({
        height: height,
        width: width
      });

      _this._scheduleCellsToRenderUpdate();

      _this._maybeCallOnEndReached();
    };

    _this._convertParentScrollMetrics = function (metrics) {
      var offset = metrics.offset - _this._offsetFromParentVirtualizedList;
      var visibleLength = metrics.visibleLength;
      var dOffset = offset - _this._scrollMetrics.offset;
      var contentLength = _this._scrollMetrics.contentLength;
      return {
        visibleLength: visibleLength,
        contentLength: contentLength,
        offset: offset,
        dOffset: dOffset
      };
    };

    _this._onScroll = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onScroll(e);
      });

      if (_this.props.onScroll) {
        _this.props.onScroll(e);
      }

      var timestamp = e.timeStamp;

      var visibleLength = _this._selectLength(e.nativeEvent.layoutMeasurement);

      var contentLength = _this._selectLength(e.nativeEvent.contentSize);

      var offset = _this._selectOffset(e.nativeEvent.contentOffset);

      var dOffset = offset - _this._scrollMetrics.offset;

      if (_this._isNestedWithSameOrientation()) {
        if (_this._scrollMetrics.contentLength === 0) {
          return;
        }

        var _this$_convertParentS = _this._convertParentScrollMetrics({
          visibleLength: visibleLength,
          offset: offset
        });

        visibleLength = _this$_convertParentS.visibleLength;
        contentLength = _this$_convertParentS.contentLength;
        offset = _this$_convertParentS.offset;
        dOffset = _this$_convertParentS.dOffset;
      }

      var dt = _this._scrollMetrics.timestamp ? Math.max(1, timestamp - _this._scrollMetrics.timestamp) : 1;
      var velocity = dOffset / dt;

      if (dt > 500 && _this._scrollMetrics.dt > 500 && contentLength > 5 * visibleLength && !_this._hasWarned.perf) {
        infoLog('VirtualizedList: You have a large list that is slow to update - make sure your ' + 'renderItem function renders components that follow React performance best practices ' + 'like PureComponent, shouldComponentUpdate, etc.', {
          dt: dt,
          prevDt: _this._scrollMetrics.dt,
          contentLength: contentLength
        });
        _this._hasWarned.perf = true;
      }

      _this._scrollMetrics = {
        contentLength: contentLength,
        dt: dt,
        dOffset: dOffset,
        offset: offset,
        timestamp: timestamp,
        velocity: velocity,
        visibleLength: visibleLength
      };

      _this._updateViewableItems(_this.props.data);

      if (!_this.props) {
        return;
      }

      _this._maybeCallOnEndReached();

      if (velocity !== 0) {
        _this._fillRateHelper.activate();
      }

      _this._computeBlankness();

      _this._scheduleCellsToRenderUpdate();
    };

    _this._onScrollBeginDrag = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onScrollBeginDrag(e);
      });

      _this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.recordInteraction();
      });

      _this._hasInteracted = true;
      _this.props.onScrollBeginDrag && _this.props.onScrollBeginDrag(e);
    };

    _this._onScrollEndDrag = function (e) {
      var velocity = e.nativeEvent.velocity;

      if (velocity) {
        _this._scrollMetrics.velocity = _this._selectOffset(velocity);
      }

      _this._computeBlankness();

      _this.props.onScrollEndDrag && _this.props.onScrollEndDrag(e);
    };

    _this._onMomentumScrollEnd = function (e) {
      _this._scrollMetrics.velocity = 0;

      _this._computeBlankness();

      _this.props.onMomentumScrollEnd && _this.props.onMomentumScrollEnd(e);
    };

    _this._updateCellsToRender = function () {
      var _this$props3 = _this.props,
          data = _this$props3.data,
          getItemCount = _this$props3.getItemCount,
          onEndReachedThreshold = _this$props3.onEndReachedThreshold;

      var isVirtualizationDisabled = _this._isVirtualizationDisabled();

      _this._updateViewableItems(data);

      if (!data) {
        return;
      }

      _this.setState(function (state) {
        var newState;

        if (!isVirtualizationDisabled) {
          if (_this._scrollMetrics.visibleLength) {
            if (!_this.props.initialScrollIndex || _this._scrollMetrics.offset) {
              newState = computeWindowedRenderLimits(_this.props, state, _this._getFrameMetricsApprox, _this._scrollMetrics);
            }
          }
        } else {
          var _this$_scrollMetrics = _this._scrollMetrics,
              contentLength = _this$_scrollMetrics.contentLength,
              offset = _this$_scrollMetrics.offset,
              visibleLength = _this$_scrollMetrics.visibleLength;
          var distanceFromEnd = contentLength - visibleLength - offset;
          var renderAhead = distanceFromEnd < onEndReachedThreshold * visibleLength ? _this.props.maxToRenderPerBatch : 0;
          newState = {
            first: 0,
            last: Math.min(state.last + renderAhead, getItemCount(data) - 1)
          };
        }

        if (newState && _this._nestedChildLists.size > 0) {
          var newFirst = newState.first;
          var newLast = newState.last;

          for (var ii = newFirst; ii <= newLast; ii++) {
            var cellKeyForIndex = _this._indicesToKeys.get(ii);

            var childListKeys = cellKeyForIndex && _this._cellKeysToChildListKeys.get(cellKeyForIndex);

            if (!childListKeys) {
              continue;
            }

            var someChildHasMore = false;

            for (var _iterator = childListKeys, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[typeof Symbol === "function" ? typeof Symbol === "function" ? Symbol.iterator : "@@iterator" : "@@iterator"]();;) {
              var _ref;

              if (_isArray) {
                if (_i >= _iterator.length) break;
                _ref = _iterator[_i++];
              } else {
                _i = _iterator.next();
                if (_i.done) break;
                _ref = _i.value;
              }

              var _childKey = _ref;

              var childList = _this._nestedChildLists.get(_childKey);

              if (childList && childList.ref && childList.ref.hasMore()) {
                someChildHasMore = true;
                break;
              }
            }

            if (someChildHasMore) {
              newState.last = ii;
              break;
            }
          }
        }

        return newState;
      });
    };

    _this._createViewToken = function (index, isViewable) {
      var _this$props4 = _this.props,
          data = _this$props4.data,
          getItem = _this$props4.getItem,
          keyExtractor = _this$props4.keyExtractor;
      var item = getItem(data, index);
      return {
        index: index,
        item: item,
        key: keyExtractor(item, index),
        isViewable: isViewable
      };
    };

    _this._getFrameMetricsApprox = function (index) {
      var frame = _this._getFrameMetrics(index);

      if (frame && frame.index === index) {
        return frame;
      } else {
        var getItemLayout = _this.props.getItemLayout;
        invariant(!getItemLayout, 'Should not have to estimate frames when a measurement metrics function is provided');
        return {
          length: _this._averageCellLength,
          offset: _this._averageCellLength * index
        };
      }
    };

    _this._getFrameMetrics = function (index) {
      var _this$props5 = _this.props,
          data = _this$props5.data,
          getItem = _this$props5.getItem,
          getItemCount = _this$props5.getItemCount,
          getItemLayout = _this$props5.getItemLayout,
          keyExtractor = _this$props5.keyExtractor;
      invariant(getItemCount(data) > index, 'Tried to get frame for out of range index ' + index);
      var item = getItem(data, index);

      var frame = item && _this._frames[keyExtractor(item, index)];

      if (!frame || frame.index !== index) {
        if (getItemLayout) {
          frame = getItemLayout(data, index);

          if (__DEV__) {
            var frameType = PropTypes.shape({
              length: PropTypes.number.isRequired,
              offset: PropTypes.number.isRequired,
              index: PropTypes.number.isRequired
            }).isRequired;
            PropTypes.checkPropTypes({
              frame: frameType
            }, {
              frame: frame
            }, 'frame', 'VirtualizedList.getItemLayout');
          }
        }
      }

      return frame;
    };

    invariant(!_props.onScroll || !_props.onScroll.__isNative, 'Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent ' + 'to support native onScroll events with useNativeDriver');
    invariant(_props.windowSize > 0, 'VirtualizedList: The windowSize prop must be present and set to a value greater than 0.');
    _this._fillRateHelper = new FillRateHelper(_this._getFrameMetrics);
    _this._updateCellsToRenderBatcher = new Batchinator(_this._updateCellsToRender, _this.props.updateCellsBatchingPeriod);

    if (_this.props.viewabilityConfigCallbackPairs) {
      _this._viewabilityTuples = _this.props.viewabilityConfigCallbackPairs.map(function (pair) {
        return {
          viewabilityHelper: new ViewabilityHelper(pair.viewabilityConfig),
          onViewableItemsChanged: pair.onViewableItemsChanged
        };
      });
    } else if (_this.props.onViewableItemsChanged) {
      _this._viewabilityTuples.push({
        viewabilityHelper: new ViewabilityHelper(_this.props.viewabilityConfig),
        onViewableItemsChanged: _this.props.onViewableItemsChanged
      });
    }

    var initialState = {
      first: _this.props.initialScrollIndex || 0,
      last: Math.min(_this.props.getItemCount(_this.props.data), (_this.props.initialScrollIndex || 0) + _this.props.initialNumToRender) - 1
    };

    if (_this._isNestedWithSameOrientation()) {
      var storedState = _this.context.virtualizedList.getNestedChildState(_this.props.listKey || _this._getCellKey());

      if (storedState) {
        initialState = storedState;
        _this.state = storedState;
        _this._frames = storedState.frames;
      }
    }

    _this.state = initialState;
    return _this;
  }

  (0, _createClass2["default"])(VirtualizedList, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      if (this._isNestedWithSameOrientation()) {
        this.context.virtualizedList.registerAsNestedChild({
          cellKey: this._getCellKey(),
          key: this.props.listKey || this._getCellKey(),
          ref: this
        });
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this._isNestedWithSameOrientation()) {
        this.context.virtualizedList.unregisterAsNestedChild({
          key: this.props.listKey || this._getCellKey(),
          state: {
            first: this.state.first,
            last: this.state.last,
            frames: this._frames
          }
        });
      }

      this._updateViewableItems(null);

      this._updateCellsToRenderBatcher.dispose({
        abort: true
      });

      this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.dispose();
      });

      this._fillRateHelper.deactivateAndFlush();
    }
  }, {
    key: "_pushCells",
    value: function _pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, first, last, inversionStyle) {
      var _this2 = this;

      var _this$props6 = this.props,
          CellRendererComponent = _this$props6.CellRendererComponent,
          ItemSeparatorComponent = _this$props6.ItemSeparatorComponent,
          data = _this$props6.data,
          getItem = _this$props6.getItem,
          getItemCount = _this$props6.getItemCount,
          horizontal = _this$props6.horizontal,
          keyExtractor = _this$props6.keyExtractor;
      var stickyOffset = this.props.ListHeaderComponent ? 1 : 0;
      var end = getItemCount(data) - 1;
      var prevCellKey;
      last = Math.min(end, last);

      var _loop = function _loop(ii) {
        var item = getItem(data, ii);
        var key = keyExtractor(item, ii);

        _this2._indicesToKeys.set(ii, key);

        if (stickyIndicesFromProps.has(ii + stickyOffset)) {
          stickyHeaderIndices.push(cells.length);
        }

        cells.push(React.createElement(CellRenderer, {
          CellRendererComponent: CellRendererComponent,
          ItemSeparatorComponent: ii < end ? ItemSeparatorComponent : undefined,
          cellKey: key,
          fillRateHelper: _this2._fillRateHelper,
          horizontal: horizontal,
          index: ii,
          inversionStyle: inversionStyle,
          item: item,
          key: key,
          prevCellKey: prevCellKey,
          onUpdateSeparators: _this2._onUpdateSeparators,
          onLayout: function onLayout(e) {
            return _this2._onCellLayout(e, key, ii);
          },
          onUnmount: _this2._onCellUnmount,
          parentProps: _this2.props,
          ref: function ref(_ref2) {
            _this2._cellRefs[key] = _ref2;
          }
        }));
        prevCellKey = key;
      };

      for (var ii = first; ii <= last; ii++) {
        _loop(ii);
      }
    }
  }, {
    key: "_isVirtualizationDisabled",
    value: function _isVirtualizationDisabled() {
      return this.props.disableVirtualization || false;
    }
  }, {
    key: "_isNestedWithSameOrientation",
    value: function _isNestedWithSameOrientation() {
      var nestedContext = this.context.virtualizedList;
      return !!(nestedContext && !!nestedContext.horizontal === !!this.props.horizontal);
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      if (__DEV__) {
        var flatStyles = flattenStyle(this.props.contentContainerStyle);
        warning(flatStyles == null || flatStyles.flexWrap !== 'wrap', '`flexWrap: `wrap`` is not supported with the `VirtualizedList` components.' + 'Consider using `numColumns` with `FlatList` instead.');
      }

      var _this$props7 = this.props,
          ListEmptyComponent = _this$props7.ListEmptyComponent,
          ListFooterComponent = _this$props7.ListFooterComponent,
          ListHeaderComponent = _this$props7.ListHeaderComponent;
      var _this$props8 = this.props,
          data = _this$props8.data,
          horizontal = _this$props8.horizontal;

      var isVirtualizationDisabled = this._isVirtualizationDisabled();

      var inversionStyle = this.props.inverted ? this.props.horizontal ? styles.horizontallyInverted : styles.verticallyInverted : null;
      var cells = [];
      var stickyIndicesFromProps = new Set(this.props.stickyHeaderIndices);
      var stickyHeaderIndices = [];

      if (ListHeaderComponent) {
        if (stickyIndicesFromProps.has(0)) {
          stickyHeaderIndices.push(0);
        }

        var element = React.isValidElement(ListHeaderComponent) ? ListHeaderComponent : React.createElement(ListHeaderComponent, null);
        cells.push(React.createElement(VirtualizedCellWrapper, {
          cellKey: this._getCellKey() + '-header',
          key: "$header"
        }, React.createElement(View, {
          onLayout: this._onLayoutHeader,
          style: StyleSheet.compose(inversionStyle, this.props.ListHeaderComponentStyle)
        }, element)));
      }

      var itemCount = this.props.getItemCount(data);

      if (itemCount > 0) {
        _usedIndexForKey = false;
        _keylessItemComponentName = '';
        var spacerKey = !horizontal ? 'height' : 'width';
        var lastInitialIndex = this.props.initialScrollIndex ? -1 : this.props.initialNumToRender - 1;
        var _this$state = this.state,
            first = _this$state.first,
            last = _this$state.last;

        this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, 0, lastInitialIndex, inversionStyle);

        var firstAfterInitial = Math.max(lastInitialIndex + 1, first);

        if (!isVirtualizationDisabled && first > lastInitialIndex + 1) {
          var insertedStickySpacer = false;

          if (stickyIndicesFromProps.size > 0) {
            var stickyOffset = ListHeaderComponent ? 1 : 0;

            for (var ii = firstAfterInitial - 1; ii > lastInitialIndex; ii--) {
              if (stickyIndicesFromProps.has(ii + stickyOffset)) {
                var initBlock = this._getFrameMetricsApprox(lastInitialIndex);

                var stickyBlock = this._getFrameMetricsApprox(ii);

                var leadSpace = stickyBlock.offset - initBlock.offset - (this.props.initialScrollIndex ? 0 : initBlock.length);
                cells.push(React.createElement(View, {
                  key: "$sticky_lead",
                  style: (0, _defineProperty2["default"])({}, spacerKey, leadSpace)
                }));

                this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, ii, ii, inversionStyle);

                var trailSpace = this._getFrameMetricsApprox(first).offset - (stickyBlock.offset + stickyBlock.length);
                cells.push(React.createElement(View, {
                  key: "$sticky_trail",
                  style: (0, _defineProperty2["default"])({}, spacerKey, trailSpace)
                }));
                insertedStickySpacer = true;
                break;
              }
            }
          }

          if (!insertedStickySpacer) {
            var _initBlock = this._getFrameMetricsApprox(lastInitialIndex);

            var firstSpace = this._getFrameMetricsApprox(first).offset - (_initBlock.offset + _initBlock.length);

            cells.push(React.createElement(View, {
              key: "$lead_spacer",
              style: (0, _defineProperty2["default"])({}, spacerKey, firstSpace)
            }));
          }
        }

        this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, firstAfterInitial, last, inversionStyle);

        if (!this._hasWarned.keys && _usedIndexForKey) {
          console.warn('VirtualizedList: missing keys for items, make sure to specify a key or id property on each ' + 'item or provide a custom keyExtractor.', _keylessItemComponentName);
          this._hasWarned.keys = true;
        }

        if (!isVirtualizationDisabled && last < itemCount - 1) {
          var lastFrame = this._getFrameMetricsApprox(last);

          var end = this.props.getItemLayout ? itemCount - 1 : Math.min(itemCount - 1, this._highestMeasuredFrameIndex);

          var endFrame = this._getFrameMetricsApprox(end);

          var tailSpacerLength = endFrame.offset + endFrame.length - (lastFrame.offset + lastFrame.length);
          cells.push(React.createElement(View, {
            key: "$tail_spacer",
            style: (0, _defineProperty2["default"])({}, spacerKey, tailSpacerLength)
          }));
        }
      } else if (ListEmptyComponent) {
        var _element = React.isValidElement(ListEmptyComponent) ? ListEmptyComponent : React.createElement(ListEmptyComponent, null);

        cells.push(React.cloneElement(_element, {
          key: '$empty',
          onLayout: function onLayout(event) {
            _this3._onLayoutEmpty(event);

            if (_element.props.onLayout) {
              _element.props.onLayout(event);
            }
          },
          style: StyleSheet.compose(inversionStyle, _element.props.style)
        }));
      }

      if (ListFooterComponent) {
        var _element2 = React.isValidElement(ListFooterComponent) ? ListFooterComponent : React.createElement(ListFooterComponent, null);

        cells.push(React.createElement(VirtualizedCellWrapper, {
          cellKey: this._getCellKey() + '-footer',
          key: "$footer"
        }, React.createElement(View, {
          onLayout: this._onLayoutFooter,
          style: StyleSheet.compose(inversionStyle, this.props.ListFooterComponentStyle)
        }, _element2)));
      }

      var scrollProps = _objectSpread({}, this.props, {
        onContentSizeChange: this._onContentSizeChange,
        onLayout: this._onLayout,
        onScroll: this._onScroll,
        onScrollBeginDrag: this._onScrollBeginDrag,
        onScrollEndDrag: this._onScrollEndDrag,
        onMomentumScrollEnd: this._onMomentumScrollEnd,
        scrollEventThrottle: this.props.scrollEventThrottle,
        invertStickyHeaders: this.props.invertStickyHeaders !== undefined ? this.props.invertStickyHeaders : this.props.inverted,
        stickyHeaderIndices: stickyHeaderIndices
      });

      if (inversionStyle) {
        scrollProps.style = [inversionStyle, this.props.style];
      }

      this._hasMore = this.state.last < this.props.getItemCount(this.props.data) - 1;
      var innerRet = React.cloneElement((this.props.renderScrollComponent || this._defaultRenderScrollComponent)(scrollProps), {
        ref: this._captureScrollRef
      }, cells);
      var ret = innerRet;

      if (__DEV__) {
        ret = React.createElement(ScrollView.Context.Consumer, null, function (scrollContext) {
          if (scrollContext != null && !scrollContext.horizontal === !_this3.props.horizontal && !_this3._hasWarned.nesting && _this3.context.virtualizedList == null) {
            console.warn('VirtualizedLists should never be nested inside plain ScrollViews with the same ' + 'orientation - use another VirtualizedList-backed container instead.');
            _this3._hasWarned.nesting = true;
          }

          return innerRet;
        });
      }

      if (this.props.debug) {
        return React.createElement(View, {
          style: styles.debug
        }, ret, this._renderDebugOverlay());
      } else {
        return ret;
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      var _this$props9 = this.props,
          data = _this$props9.data,
          extraData = _this$props9.extraData;

      if (data !== prevProps.data || extraData !== prevProps.extraData) {
        this._hasDataChangedSinceEndReached = true;

        this._viewabilityTuples.forEach(function (tuple) {
          tuple.viewabilityHelper.resetViewableIndices();
        });
      }

      var hiPriInProgress = this._hiPriInProgress;

      this._scheduleCellsToRenderUpdate();

      if (hiPriInProgress) {
        this._hiPriInProgress = false;
      }
    }
  }, {
    key: "_computeBlankness",
    value: function _computeBlankness() {
      this._fillRateHelper.computeBlankness(this.props, this.state, this._scrollMetrics);
    }
  }, {
    key: "_onCellLayout",
    value: function _onCellLayout(e, cellKey, index) {
      var layout = e.nativeEvent.layout;
      var next = {
        offset: this._selectOffset(layout),
        length: this._selectLength(layout),
        index: index,
        inLayout: true
      };
      var curr = this._frames[cellKey];

      if (!curr || next.offset !== curr.offset || next.length !== curr.length || index !== curr.index) {
        this._totalCellLength += next.length - (curr ? curr.length : 0);
        this._totalCellsMeasured += curr ? 0 : 1;
        this._averageCellLength = this._totalCellLength / this._totalCellsMeasured;
        this._frames[cellKey] = next;
        this._highestMeasuredFrameIndex = Math.max(this._highestMeasuredFrameIndex, index);

        this._scheduleCellsToRenderUpdate();
      } else {
        this._frames[cellKey].inLayout = true;
      }

      var childListKeys = this._cellKeysToChildListKeys.get(cellKey);

      if (childListKeys) {
        for (var _iterator2 = childListKeys, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[typeof Symbol === "function" ? Symbol.iterator : "@@iterator"]();;) {
          var _ref7;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref7 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref7 = _i2.value;
          }

          var _childKey2 = _ref7;

          var childList = this._nestedChildLists.get(_childKey2);

          childList && childList.ref && childList.ref.measureLayoutRelativeToContainingList();
        }
      }

      this._computeBlankness();

      this._updateViewableItems(this.props.data);
    }
  }, {
    key: "measureLayoutRelativeToContainingList",
    value: function measureLayoutRelativeToContainingList() {
      var _this4 = this;

      try {
        if (!this._scrollRef) {
          return;
        }

        this._scrollRef.measureLayout(this.context.virtualizedList.getOutermostParentListRef().getScrollRef().getNativeScrollRef(), function (x, y, width, height) {
          _this4._offsetFromParentVirtualizedList = _this4._selectOffset({
            x: x,
            y: y
          });
          _this4._scrollMetrics.contentLength = _this4._selectLength({
            width: width,
            height: height
          });

          var scrollMetrics = _this4._convertParentScrollMetrics(_this4.context.virtualizedList.getScrollMetrics());

          _this4._scrollMetrics.visibleLength = scrollMetrics.visibleLength;
          _this4._scrollMetrics.offset = scrollMetrics.offset;
        }, function (error) {
          console.warn("VirtualizedList: Encountered an error while measuring a list's" + ' offset from its containing VirtualizedList.');
        });
      } catch (error) {
        console.warn('measureLayoutRelativeToContainingList threw an error', error.stack);
      }
    }
  }, {
    key: "_renderDebugOverlay",
    value: function _renderDebugOverlay() {
      var normalize = this._scrollMetrics.visibleLength / (this._scrollMetrics.contentLength || 1);
      var framesInLayout = [];
      var itemCount = this.props.getItemCount(this.props.data);

      for (var ii = 0; ii < itemCount; ii++) {
        var frame = this._getFrameMetricsApprox(ii);

        if (frame.inLayout) {
          framesInLayout.push(frame);
        }
      }

      var windowTop = this._getFrameMetricsApprox(this.state.first).offset;

      var frameLast = this._getFrameMetricsApprox(this.state.last);

      var windowLen = frameLast.offset + frameLast.length - windowTop;
      var visTop = this._scrollMetrics.offset;
      var visLen = this._scrollMetrics.visibleLength;
      return React.createElement(View, {
        style: [styles.debugOverlayBase, styles.debugOverlay]
      }, framesInLayout.map(function (f, ii) {
        return React.createElement(View, {
          key: 'f' + ii,
          style: [styles.debugOverlayBase, styles.debugOverlayFrame, {
            top: f.offset * normalize,
            height: f.length * normalize
          }]
        });
      }), React.createElement(View, {
        style: [styles.debugOverlayBase, styles.debugOverlayFrameLast, {
          top: windowTop * normalize,
          height: windowLen * normalize
        }]
      }), React.createElement(View, {
        style: [styles.debugOverlayBase, styles.debugOverlayFrameVis, {
          top: visTop * normalize,
          height: visLen * normalize
        }]
      }));
    }
  }, {
    key: "_selectLength",
    value: function _selectLength(metrics) {
      return !this.props.horizontal ? metrics.height : metrics.width;
    }
  }, {
    key: "_selectOffset",
    value: function _selectOffset(metrics) {
      return !this.props.horizontal ? metrics.y : metrics.x;
    }
  }, {
    key: "_maybeCallOnEndReached",
    value: function _maybeCallOnEndReached() {
      var _this$props10 = this.props,
          data = _this$props10.data,
          getItemCount = _this$props10.getItemCount,
          onEndReached = _this$props10.onEndReached,
          onEndReachedThreshold = _this$props10.onEndReachedThreshold;
      var _this$_scrollMetrics2 = this._scrollMetrics,
          contentLength = _this$_scrollMetrics2.contentLength,
          visibleLength = _this$_scrollMetrics2.visibleLength,
          offset = _this$_scrollMetrics2.offset;
      var distanceFromEnd = contentLength - visibleLength - offset;

      if (onEndReached && this.state.last === getItemCount(data) - 1 && distanceFromEnd < onEndReachedThreshold * visibleLength && (this._hasDataChangedSinceEndReached || this._scrollMetrics.contentLength !== this._sentEndForContentLength)) {
        this._hasDataChangedSinceEndReached = false;
        this._sentEndForContentLength = this._scrollMetrics.contentLength;
        onEndReached({
          distanceFromEnd: distanceFromEnd
        });
      }
    }
  }, {
    key: "_scheduleCellsToRenderUpdate",
    value: function _scheduleCellsToRenderUpdate() {
      var _this$state2 = this.state,
          first = _this$state2.first,
          last = _this$state2.last;
      var _this$_scrollMetrics3 = this._scrollMetrics,
          offset = _this$_scrollMetrics3.offset,
          visibleLength = _this$_scrollMetrics3.visibleLength,
          velocity = _this$_scrollMetrics3.velocity;
      var itemCount = this.props.getItemCount(this.props.data);
      var hiPri = false;
      var scrollingThreshold = this.props.onEndReachedThreshold * visibleLength / 2;

      if (first > 0) {
        var distTop = offset - this._getFrameMetricsApprox(first).offset;

        hiPri = hiPri || distTop < 0 || velocity < -2 && distTop < scrollingThreshold;
      }

      if (last < itemCount - 1) {
        var distBottom = this._getFrameMetricsApprox(last).offset - (offset + visibleLength);
        hiPri = hiPri || distBottom < 0 || velocity > 2 && distBottom < scrollingThreshold;
      }

      if (hiPri && (this._averageCellLength || this.props.getItemLayout) && !this._hiPriInProgress) {
        this._hiPriInProgress = true;

        this._updateCellsToRenderBatcher.dispose({
          abort: true
        });

        this._updateCellsToRender();

        return;
      } else {
        this._updateCellsToRenderBatcher.schedule();
      }
    }
  }, {
    key: "_updateViewableItems",
    value: function _updateViewableItems(data) {
      var _this5 = this;

      var getItemCount = this.props.getItemCount;

      this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.onUpdate(getItemCount(data), _this5._scrollMetrics.offset, _this5._scrollMetrics.visibleLength, _this5._getFrameMetrics, _this5._createViewToken, tuple.onViewableItemsChanged, _this5.state);
      });
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(newProps, prevState) {
      var data = newProps.data,
          getItemCount = newProps.getItemCount,
          maxToRenderPerBatch = newProps.maxToRenderPerBatch;
      return {
        first: Math.max(0, Math.min(prevState.first, getItemCount(data) - 1 - maxToRenderPerBatch)),
        last: Math.max(0, Math.min(prevState.last, getItemCount(data) - 1))
      };
    }
  }]);
  return VirtualizedList;
}(React.PureComponent);

VirtualizedList.defaultProps = {
  disableVirtualization: false,
  horizontal: false,
  initialNumToRender: 10,
  keyExtractor: function keyExtractor(item, index) {
    if (item.key != null) {
      return item.key;
    }

    if (item.id != null) {
      return item.id;
    }

    _usedIndexForKey = true;

    if (item.type && item.type.displayName) {
      _keylessItemComponentName = item.type.displayName;
    }

    return String(index);
  },
  maxToRenderPerBatch: 10,
  onEndReachedThreshold: 2,
  scrollEventThrottle: 50,
  updateCellsBatchingPeriod: 50,
  windowSize: 21
};
VirtualizedList.contextTypes = {
  virtualizedCell: PropTypes.shape({
    cellKey: PropTypes.string
  }),
  virtualizedList: PropTypes.shape({
    getScrollMetrics: PropTypes.func,
    horizontal: PropTypes.bool,
    getOutermostParentListRef: PropTypes.func,
    getNestedChildState: PropTypes.func,
    registerAsNestedChild: PropTypes.func,
    unregisterAsNestedChild: PropTypes.func
  })
};
VirtualizedList.childContextTypes = {
  virtualizedList: PropTypes.shape({
    getScrollMetrics: PropTypes.func,
    horizontal: PropTypes.bool,
    getOutermostParentListRef: PropTypes.func,
    getNestedChildState: PropTypes.func,
    registerAsNestedChild: PropTypes.func,
    unregisterAsNestedChild: PropTypes.func
  })
};

var CellRenderer = function (_React$Component) {
  (0, _inherits2["default"])(CellRenderer, _React$Component);

  function CellRenderer() {
    var _getPrototypeOf2;

    var _this6;

    (0, _classCallCheck2["default"])(this, CellRenderer);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this6 = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(CellRenderer)).call.apply(_getPrototypeOf2, [this].concat(args)));
    _this6.state = {
      separatorProps: {
        highlighted: false,
        leadingItem: _this6.props.item
      }
    };
    _this6._separators = {
      highlight: function highlight() {
        var _this6$props = _this6.props,
            cellKey = _this6$props.cellKey,
            prevCellKey = _this6$props.prevCellKey;

        _this6.props.onUpdateSeparators([cellKey, prevCellKey], {
          highlighted: true
        });
      },
      unhighlight: function unhighlight() {
        var _this6$props2 = _this6.props,
            cellKey = _this6$props2.cellKey,
            prevCellKey = _this6$props2.prevCellKey;

        _this6.props.onUpdateSeparators([cellKey, prevCellKey], {
          highlighted: false
        });
      },
      updateProps: function updateProps(select, newProps) {
        var _this6$props3 = _this6.props,
            cellKey = _this6$props3.cellKey,
            prevCellKey = _this6$props3.prevCellKey;

        _this6.props.onUpdateSeparators([select === 'leading' ? prevCellKey : cellKey], newProps);
      }
    };
    return _this6;
  }

  (0, _createClass2["default"])(CellRenderer, [{
    key: "getChildContext",
    value: function getChildContext() {
      return {
        virtualizedCell: {
          cellKey: this.props.cellKey
        }
      };
    }
  }, {
    key: "updateSeparatorProps",
    value: function updateSeparatorProps(newProps) {
      this.setState(function (state) {
        return {
          separatorProps: _objectSpread({}, state.separatorProps, {}, newProps)
        };
      });
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.props.onUnmount(this.props.cellKey);
    }
  }, {
    key: "_renderElement",
    value: function _renderElement(renderItem, ListItemComponent, item, index) {
      if (renderItem && ListItemComponent) {
        console.warn('VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take' + ' precedence over renderItem.');
      }

      if (ListItemComponent) {
        return React.createElement(ListItemComponent, {
          item: item,
          index: index,
          separators: this._separators
        });
      }

      if (renderItem) {
        return renderItem({
          item: item,
          index: index,
          separators: this._separators
        });
      }

      invariant(false, 'VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.');
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props11 = this.props,
          CellRendererComponent = _this$props11.CellRendererComponent,
          ItemSeparatorComponent = _this$props11.ItemSeparatorComponent,
          fillRateHelper = _this$props11.fillRateHelper,
          horizontal = _this$props11.horizontal,
          item = _this$props11.item,
          index = _this$props11.index,
          inversionStyle = _this$props11.inversionStyle,
          parentProps = _this$props11.parentProps;
      var renderItem = parentProps.renderItem,
          getItemLayout = parentProps.getItemLayout,
          ListItemComponent = parentProps.ListItemComponent;

      var element = this._renderElement(renderItem, ListItemComponent, item, index);

      var onLayout = getItemLayout && !parentProps.debug && !fillRateHelper.enabled() ? undefined : this.props.onLayout;
      var itemSeparator = ItemSeparatorComponent && React.createElement(ItemSeparatorComponent, this.state.separatorProps);
      var cellStyle = inversionStyle ? horizontal ? [styles.rowReverse, inversionStyle] : [styles.columnReverse, inversionStyle] : horizontal ? [styles.row, inversionStyle] : inversionStyle;

      if (!CellRendererComponent) {
        return React.createElement(View, {
          style: cellStyle,
          onLayout: onLayout
        }, element, itemSeparator);
      }

      return React.createElement(CellRendererComponent, (0, _extends2["default"])({}, this.props, {
        style: cellStyle,
        onLayout: onLayout
      }), element, itemSeparator);
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(props, prevState) {
      return {
        separatorProps: _objectSpread({}, prevState.separatorProps, {
          leadingItem: props.item
        })
      };
    }
  }]);
  return CellRenderer;
}(React.Component);

CellRenderer.childContextTypes = {
  virtualizedCell: PropTypes.shape({
    cellKey: PropTypes.string
  })
};

var VirtualizedCellWrapper = function (_React$Component2) {
  (0, _inherits2["default"])(VirtualizedCellWrapper, _React$Component2);

  function VirtualizedCellWrapper() {
    (0, _classCallCheck2["default"])(this, VirtualizedCellWrapper);
    return (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf3["default"])(VirtualizedCellWrapper).apply(this, arguments));
  }

  (0, _createClass2["default"])(VirtualizedCellWrapper, [{
    key: "getChildContext",
    value: function getChildContext() {
      return {
        virtualizedCell: {
          cellKey: this.props.cellKey
        }
      };
    }
  }, {
    key: "render",
    value: function render() {
      return this.props.children;
    }
  }]);
  return VirtualizedCellWrapper;
}(React.Component);

VirtualizedCellWrapper.childContextTypes = {
  virtualizedCell: PropTypes.shape({
    cellKey: PropTypes.string
  })
};
var styles = StyleSheet.create({
  verticallyInverted: {
    transform: [{
      scaleY: -1
    }]
  },
  horizontallyInverted: {
    transform: [{
      scaleX: -1
    }]
  },
  row: {
    flexDirection: 'row'
  },
  rowReverse: {
    flexDirection: 'row-reverse'
  },
  columnReverse: {
    flexDirection: 'column-reverse'
  },
  debug: {
    flex: 1
  },
  debugOverlayBase: {
    position: 'absolute',
    top: 0,
    right: 0
  },
  debugOverlay: {
    bottom: 0,
    width: 20,
    borderColor: 'blue',
    borderWidth: 1
  },
  debugOverlayFrame: {
    left: 0,
    backgroundColor: 'orange'
  },
  debugOverlayFrameLast: {
    left: 0,
    borderColor: 'green',
    borderWidth: 2
  },
  debugOverlayFrameVis: {
    left: 0,
    borderColor: 'red',
    borderWidth: 2
  }
});
module.exports = VirtualizedList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlZpcnR1YWxpemVkTGlzdC5qcyJdLCJuYW1lcyI6WyJCYXRjaGluYXRvciIsInJlcXVpcmUiLCJGaWxsUmF0ZUhlbHBlciIsIlByb3BUeXBlcyIsIlJlYWN0IiwiUmVhY3ROYXRpdmUiLCJSZWZyZXNoQ29udHJvbCIsIlNjcm9sbFZpZXciLCJTdHlsZVNoZWV0IiwiVmlldyIsIlZpZXdhYmlsaXR5SGVscGVyIiwiZmxhdHRlblN0eWxlIiwiaW5mb0xvZyIsImludmFyaWFudCIsIndhcm5pbmciLCJjb21wdXRlV2luZG93ZWRSZW5kZXJMaW1pdHMiLCJfdXNlZEluZGV4Rm9yS2V5IiwiX2tleWxlc3NJdGVtQ29tcG9uZW50TmFtZSIsIlZpcnR1YWxpemVkTGlzdCIsInBhcmFtcyIsImFuaW1hdGVkIiwidmVyeUxhc3QiLCJwcm9wcyIsImdldEl0ZW1Db3VudCIsImRhdGEiLCJmcmFtZSIsIl9nZXRGcmFtZU1ldHJpY3NBcHByb3giLCJvZmZzZXQiLCJNYXRoIiwibWF4IiwibGVuZ3RoIiwiX2Zvb3Rlckxlbmd0aCIsIl9zY3JvbGxNZXRyaWNzIiwidmlzaWJsZUxlbmd0aCIsIl9zY3JvbGxSZWYiLCJzY3JvbGxUbyIsImhvcml6b250YWwiLCJ4IiwieSIsImdldEl0ZW1MYXlvdXQiLCJvblNjcm9sbFRvSW5kZXhGYWlsZWQiLCJpbmRleCIsInZpZXdPZmZzZXQiLCJ2aWV3UG9zaXRpb24iLCJfaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCIsImF2ZXJhZ2VJdGVtTGVuZ3RoIiwiX2F2ZXJhZ2VDZWxsTGVuZ3RoIiwiaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCIsIml0ZW0iLCJnZXRJdGVtIiwiaXRlbUNvdW50Iiwic2Nyb2xsVG9JbmRleCIsIl9uZXN0ZWRDaGlsZExpc3RzIiwiZm9yRWFjaCIsImNoaWxkTGlzdCIsInJlZiIsInJlY29yZEludGVyYWN0aW9uIiwiX3ZpZXdhYmlsaXR5VHVwbGVzIiwidCIsInZpZXdhYmlsaXR5SGVscGVyIiwiX3VwZGF0ZVZpZXdhYmxlSXRlbXMiLCJmbGFzaFNjcm9sbEluZGljYXRvcnMiLCJnZXRTY3JvbGxSZXNwb25kZXIiLCJnZXRTY3JvbGxhYmxlTm9kZSIsImZpbmROb2RlSGFuZGxlIiwiZ2V0U2Nyb2xsUmVmIiwic2V0TmF0aXZlUHJvcHMiLCJ2aXJ0dWFsaXplZExpc3QiLCJnZXRTY3JvbGxNZXRyaWNzIiwiX2dldFNjcm9sbE1ldHJpY3MiLCJnZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmIiwiX2dldE91dGVybW9zdFBhcmVudExpc3RSZWYiLCJnZXROZXN0ZWRDaGlsZFN0YXRlIiwiX2dldE5lc3RlZENoaWxkU3RhdGUiLCJyZWdpc3RlckFzTmVzdGVkQ2hpbGQiLCJfcmVnaXN0ZXJBc05lc3RlZENoaWxkIiwidW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQiLCJfdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQiLCJjb250ZXh0IiwidmlydHVhbGl6ZWRDZWxsIiwiY2VsbEtleSIsIl9oYXNNb3JlIiwiX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbiIsImtleSIsImV4aXN0aW5nQ2hpbGREYXRhIiwiZ2V0Iiwic3RhdGUiLCJjaGlsZExpc3RzSW5DZWxsIiwiX2NlbGxLZXlzVG9DaGlsZExpc3RLZXlzIiwiU2V0IiwiYWRkIiwic2V0IiwiY29uc29sZSIsImVycm9yIiwiX2hhc0ludGVyYWN0ZWQiLCJfb25VcGRhdGVTZXBhcmF0b3JzIiwia2V5cyIsIm5ld1Byb3BzIiwiX2NlbGxSZWZzIiwidXBkYXRlU2VwYXJhdG9yUHJvcHMiLCJNYXAiLCJfZmlsbFJhdGVIZWxwZXIiLCJfZnJhbWVzIiwiX2hhc0RhdGFDaGFuZ2VkU2luY2VFbmRSZWFjaGVkIiwiX2hhc0RvbmVJbml0aWFsU2Nyb2xsIiwiX2hhc1dhcm5lZCIsIl9oZWFkZXJMZW5ndGgiLCJfaGlQcmlJblByb2dyZXNzIiwiX2luZGljZXNUb0tleXMiLCJfb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdCIsIl9wcmV2UGFyZW50T2Zmc2V0IiwiY29udGVudExlbmd0aCIsImRPZmZzZXQiLCJkdCIsInRpbWVzdGFtcCIsInZlbG9jaXR5IiwiX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoIiwiX3RvdGFsQ2VsbExlbmd0aCIsIl90b3RhbENlbGxzTWVhc3VyZWQiLCJfdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXIiLCJfY2FwdHVyZVNjcm9sbFJlZiIsIl9kZWZhdWx0UmVuZGVyU2Nyb2xsQ29tcG9uZW50Iiwib25SZWZyZXNoIiwicmVmcmVzaGluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWZyZXNoQ29udHJvbCIsInByb2dyZXNzVmlld09mZnNldCIsIl9vbkNlbGxVbm1vdW50IiwiY3VyciIsImluTGF5b3V0IiwiX29uTGF5b3V0IiwiZSIsIm1lYXN1cmVMYXlvdXRSZWxhdGl2ZVRvQ29udGFpbmluZ0xpc3QiLCJfc2VsZWN0TGVuZ3RoIiwibmF0aXZlRXZlbnQiLCJsYXlvdXQiLCJvbkxheW91dCIsIl9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUiLCJfbWF5YmVDYWxsT25FbmRSZWFjaGVkIiwiX29uTGF5b3V0RW1wdHkiLCJfb25MYXlvdXRGb290ZXIiLCJfb25MYXlvdXRIZWFkZXIiLCJfb25Db250ZW50U2l6ZUNoYW5nZSIsIndpZHRoIiwiaGVpZ2h0IiwiaW5pdGlhbFNjcm9sbEluZGV4Iiwib25Db250ZW50U2l6ZUNoYW5nZSIsIl9jb252ZXJ0UGFyZW50U2Nyb2xsTWV0cmljcyIsIm1ldHJpY3MiLCJfb25TY3JvbGwiLCJvblNjcm9sbCIsInRpbWVTdGFtcCIsImxheW91dE1lYXN1cmVtZW50IiwiY29udGVudFNpemUiLCJfc2VsZWN0T2Zmc2V0IiwiY29udGVudE9mZnNldCIsInBlcmYiLCJwcmV2RHQiLCJhY3RpdmF0ZSIsIl9jb21wdXRlQmxhbmtuZXNzIiwiX29uU2Nyb2xsQmVnaW5EcmFnIiwidHVwbGUiLCJvblNjcm9sbEJlZ2luRHJhZyIsIl9vblNjcm9sbEVuZERyYWciLCJvblNjcm9sbEVuZERyYWciLCJfb25Nb21lbnR1bVNjcm9sbEVuZCIsIm9uTW9tZW50dW1TY3JvbGxFbmQiLCJfdXBkYXRlQ2VsbHNUb1JlbmRlciIsIm9uRW5kUmVhY2hlZFRocmVzaG9sZCIsImlzVmlydHVhbGl6YXRpb25EaXNhYmxlZCIsIl9pc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQiLCJzZXRTdGF0ZSIsIm5ld1N0YXRlIiwiZGlzdGFuY2VGcm9tRW5kIiwicmVuZGVyQWhlYWQiLCJtYXhUb1JlbmRlclBlckJhdGNoIiwiZmlyc3QiLCJsYXN0IiwibWluIiwic2l6ZSIsIm5ld0ZpcnN0IiwibmV3TGFzdCIsImlpIiwiY2VsbEtleUZvckluZGV4IiwiY2hpbGRMaXN0S2V5cyIsInNvbWVDaGlsZEhhc01vcmUiLCJjaGlsZEtleSIsImhhc01vcmUiLCJfY3JlYXRlVmlld1Rva2VuIiwiaXNWaWV3YWJsZSIsImtleUV4dHJhY3RvciIsIl9nZXRGcmFtZU1ldHJpY3MiLCJfX0RFVl9fIiwiZnJhbWVUeXBlIiwic2hhcGUiLCJudW1iZXIiLCJpc1JlcXVpcmVkIiwiY2hlY2tQcm9wVHlwZXMiLCJfX2lzTmF0aXZlIiwid2luZG93U2l6ZSIsInVwZGF0ZUNlbGxzQmF0Y2hpbmdQZXJpb2QiLCJ2aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMiLCJtYXAiLCJwYWlyIiwidmlld2FiaWxpdHlDb25maWciLCJvblZpZXdhYmxlSXRlbXNDaGFuZ2VkIiwicHVzaCIsImluaXRpYWxTdGF0ZSIsImluaXRpYWxOdW1Ub1JlbmRlciIsInN0b3JlZFN0YXRlIiwibGlzdEtleSIsIl9nZXRDZWxsS2V5IiwiZnJhbWVzIiwiZGlzcG9zZSIsImFib3J0IiwiZGVhY3RpdmF0ZUFuZEZsdXNoIiwiY2VsbHMiLCJzdGlja3lIZWFkZXJJbmRpY2VzIiwic3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyIsImludmVyc2lvblN0eWxlIiwiQ2VsbFJlbmRlcmVyQ29tcG9uZW50IiwiSXRlbVNlcGFyYXRvckNvbXBvbmVudCIsInN0aWNreU9mZnNldCIsIkxpc3RIZWFkZXJDb21wb25lbnQiLCJlbmQiLCJwcmV2Q2VsbEtleSIsImhhcyIsInVuZGVmaW5lZCIsIl9vbkNlbGxMYXlvdXQiLCJkaXNhYmxlVmlydHVhbGl6YXRpb24iLCJuZXN0ZWRDb250ZXh0IiwiZmxhdFN0eWxlcyIsImNvbnRlbnRDb250YWluZXJTdHlsZSIsImZsZXhXcmFwIiwiTGlzdEVtcHR5Q29tcG9uZW50IiwiTGlzdEZvb3RlckNvbXBvbmVudCIsImludmVydGVkIiwic3R5bGVzIiwiaG9yaXpvbnRhbGx5SW52ZXJ0ZWQiLCJ2ZXJ0aWNhbGx5SW52ZXJ0ZWQiLCJlbGVtZW50IiwiaXNWYWxpZEVsZW1lbnQiLCJjb21wb3NlIiwiTGlzdEhlYWRlckNvbXBvbmVudFN0eWxlIiwic3BhY2VyS2V5IiwibGFzdEluaXRpYWxJbmRleCIsIl9wdXNoQ2VsbHMiLCJmaXJzdEFmdGVySW5pdGlhbCIsImluc2VydGVkU3RpY2t5U3BhY2VyIiwiaW5pdEJsb2NrIiwic3RpY2t5QmxvY2siLCJsZWFkU3BhY2UiLCJ0cmFpbFNwYWNlIiwiZmlyc3RTcGFjZSIsIndhcm4iLCJsYXN0RnJhbWUiLCJlbmRGcmFtZSIsInRhaWxTcGFjZXJMZW5ndGgiLCJjbG9uZUVsZW1lbnQiLCJldmVudCIsInN0eWxlIiwiTGlzdEZvb3RlckNvbXBvbmVudFN0eWxlIiwic2Nyb2xsUHJvcHMiLCJzY3JvbGxFdmVudFRocm90dGxlIiwiaW52ZXJ0U3RpY2t5SGVhZGVycyIsImlubmVyUmV0IiwicmVuZGVyU2Nyb2xsQ29tcG9uZW50IiwicmV0Iiwic2Nyb2xsQ29udGV4dCIsIm5lc3RpbmciLCJkZWJ1ZyIsIl9yZW5kZXJEZWJ1Z092ZXJsYXkiLCJwcmV2UHJvcHMiLCJleHRyYURhdGEiLCJyZXNldFZpZXdhYmxlSW5kaWNlcyIsImhpUHJpSW5Qcm9ncmVzcyIsImNvbXB1dGVCbGFua25lc3MiLCJuZXh0IiwibWVhc3VyZUxheW91dCIsImdldE5hdGl2ZVNjcm9sbFJlZiIsInNjcm9sbE1ldHJpY3MiLCJzdGFjayIsIm5vcm1hbGl6ZSIsImZyYW1lc0luTGF5b3V0Iiwid2luZG93VG9wIiwiZnJhbWVMYXN0Iiwid2luZG93TGVuIiwidmlzVG9wIiwidmlzTGVuIiwiZGVidWdPdmVybGF5QmFzZSIsImRlYnVnT3ZlcmxheSIsImYiLCJkZWJ1Z092ZXJsYXlGcmFtZSIsInRvcCIsImRlYnVnT3ZlcmxheUZyYW1lTGFzdCIsImRlYnVnT3ZlcmxheUZyYW1lVmlzIiwib25FbmRSZWFjaGVkIiwiaGlQcmkiLCJzY3JvbGxpbmdUaHJlc2hvbGQiLCJkaXN0VG9wIiwiZGlzdEJvdHRvbSIsInNjaGVkdWxlIiwib25VcGRhdGUiLCJwcmV2U3RhdGUiLCJQdXJlQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIiwiaWQiLCJ0eXBlIiwiZGlzcGxheU5hbWUiLCJTdHJpbmciLCJjb250ZXh0VHlwZXMiLCJzdHJpbmciLCJmdW5jIiwiYm9vbCIsImNoaWxkQ29udGV4dFR5cGVzIiwiQ2VsbFJlbmRlcmVyIiwic2VwYXJhdG9yUHJvcHMiLCJoaWdobGlnaHRlZCIsImxlYWRpbmdJdGVtIiwiX3NlcGFyYXRvcnMiLCJoaWdobGlnaHQiLCJvblVwZGF0ZVNlcGFyYXRvcnMiLCJ1bmhpZ2hsaWdodCIsInVwZGF0ZVByb3BzIiwic2VsZWN0Iiwib25Vbm1vdW50IiwicmVuZGVySXRlbSIsIkxpc3RJdGVtQ29tcG9uZW50IiwiY3JlYXRlRWxlbWVudCIsInNlcGFyYXRvcnMiLCJmaWxsUmF0ZUhlbHBlciIsInBhcmVudFByb3BzIiwiX3JlbmRlckVsZW1lbnQiLCJlbmFibGVkIiwiaXRlbVNlcGFyYXRvciIsImNlbGxTdHlsZSIsInJvd1JldmVyc2UiLCJjb2x1bW5SZXZlcnNlIiwicm93IiwiQ29tcG9uZW50IiwiVmlydHVhbGl6ZWRDZWxsV3JhcHBlciIsImNoaWxkcmVuIiwiY3JlYXRlIiwidHJhbnNmb3JtIiwic2NhbGVZIiwic2NhbGVYIiwiZmxleERpcmVjdGlvbiIsImZsZXgiLCJwb3NpdGlvbiIsInJpZ2h0IiwiYm90dG9tIiwiYm9yZGVyQ29sb3IiLCJib3Jk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RTtBQUNMNkUsSUFBQUEsSUFBSSxFQUFFO0FBREQsR0FoQndCO0FBbUIvQjFELEVBQUFBLGdCQUFnQixFQUFFO0FBQ2hCMkQsSUFBQUEsUUFBUSxFQUFFLFVBRE07QUFFaEJ2RCxJQUFBQSxHQUFHLEVBQUUsQ0FGVztBQUdoQndELElBQUFBLEtBQUssRUFBRTtBQUhTLEdBbkJhO0FBd0IvQjNELEVBQUFBLFlBQVksRUFBRTtBQUNaNEQsSUFBQUEsTUFBTSxFQUFFLENBREk7QUFFWi9NLElBQUFBLEtBQUssRUFBRSxFQUZLO0FBR1pnTixJQUFBQSxXQUFXLEVBQUUsTUFIRDtBQUlaQyxJQUFBQSxXQUFXLEVBQUU7QUFKRCxHQXhCaUI7QUE4Qi9CNUQsRUFBQUEsaUJBQWlCLEVBQUU7QUFDakI2RCxJQUFBQSxJQUFJLEVBQUUsQ0FEVztBQUVqQkMsSUFBQUEsZUFBZSxFQUFFO0FBRkEsR0E5Qlk7QUFrQy9CNUQsRUFBQUEscUJBQXFCLEVBQUU7QUFDckIyRCxJQUFBQSxJQUFJLEVBQUUsQ0FEZTtBQUVyQkYsSUFBQUEsV0FBVyxFQUFFLE9BRlE7QUFHckJDLElBQUFBLFdBQVcsRUFBRTtBQUhRLEdBbENRO0FBdUMvQnpELEVBQUFBLG9CQUFvQixFQUFFO0FBQ3BCMEQsSUFBQUEsSUFBSSxFQUFFLENBRGM7QUFFcEJGLElBQUFBLFdBQVcsRUFBRSxLQUZPO0FBR3BCQyxJQUFBQSxXQUFXLEVBQUU7QUFITztBQXZDUyxDQUFsQixDQUFmO0FBOENBRyxNQUFNLENBQUNDLE9BQVAsR0FBaUJuVixlQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBCYXRjaGluYXRvciA9IHJlcXVpcmUoJy4uL0ludGVyYWN0aW9uL0JhdGNoaW5hdG9yJyk7XG5jb25zdCBGaWxsUmF0ZUhlbHBlciA9IHJlcXVpcmUoJy4vRmlsbFJhdGVIZWxwZXInKTtcbmNvbnN0IFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbmNvbnN0IFJlYWN0TmF0aXZlID0gcmVxdWlyZSgnLi4vUmVuZGVyZXIvc2hpbXMvUmVhY3ROYXRpdmUnKTtcbmNvbnN0IFJlZnJlc2hDb250cm9sID0gcmVxdWlyZSgnLi4vQ29tcG9uZW50cy9SZWZyZXNoQ29udHJvbC9SZWZyZXNoQ29udHJvbCcpO1xuY29uc3QgU2Nyb2xsVmlldyA9IHJlcXVpcmUoJy4uL0NvbXBvbmVudHMvU2Nyb2xsVmlldy9TY3JvbGxWaWV3Jyk7XG5jb25zdCBTdHlsZVNoZWV0ID0gcmVxdWlyZSgnLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0Jyk7XG5jb25zdCBWaWV3ID0gcmVxdWlyZSgnLi4vQ29tcG9uZW50cy9WaWV3L1ZpZXcnKTtcbmNvbnN0IFZpZXdhYmlsaXR5SGVscGVyID0gcmVxdWlyZSgnLi9WaWV3YWJpbGl0eUhlbHBlcicpO1xuXG5jb25zdCBmbGF0dGVuU3R5bGUgPSByZXF1aXJlKCcuLi9TdHlsZVNoZWV0L2ZsYXR0ZW5TdHlsZScpO1xuY29uc3QgaW5mb0xvZyA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9pbmZvTG9nJyk7XG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcbmNvbnN0IHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmNvbnN0IHtjb21wdXRlV2luZG93ZWRSZW5kZXJMaW1pdHN9ID0gcmVxdWlyZSgnLi9WaXJ0dWFsaXplVXRpbHMnKTtcblxuaW1wb3J0IHR5cGUge1ZpZXdTdHlsZVByb3B9IGZyb20gJy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCc7XG5pbXBvcnQgdHlwZSB7XG4gIFZpZXdhYmlsaXR5Q29uZmlnLFxuICBWaWV3VG9rZW4sXG4gIFZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlyLFxufSBmcm9tICcuL1ZpZXdhYmlsaXR5SGVscGVyJztcblxudHlwZSBJdGVtID0gYW55O1xuXG5leHBvcnQgdHlwZSBTZXBhcmF0b3JzID0ge1xuICBoaWdobGlnaHQ6ICgpID0+IHZvaWQsXG4gIHVuaGlnaGxpZ2h0OiAoKSA9PiB2b2lkLFxuICB1cGRhdGVQcm9wczogKHNlbGVjdDogJ2xlYWRpbmcnIHwgJ3RyYWlsaW5nJywgbmV3UHJvcHM6IE9iamVjdCkgPT4gdm9pZCxcbn07XG5cbmV4cG9ydCB0eXBlIFJlbmRlckl0ZW1Qcm9wczxJdGVtVD4gPSB7XG4gIGl0ZW06IEl0ZW1ULFxuICBpbmRleDogbnVtYmVyLFxuICBzZXBhcmF0b3JzOiBTZXBhcmF0b3JzLFxufTtcblxuZXhwb3J0IHR5cGUgUmVuZGVySXRlbVR5cGU8SXRlbVQ+ID0gKFxuICBpbmZvOiBSZW5kZXJJdGVtUHJvcHM8SXRlbVQ+LFxuKSA9PiBSZWFjdC5Ob2RlO1xuXG50eXBlIFZpZXdhYmlsaXR5SGVscGVyQ2FsbGJhY2tUdXBsZSA9IHtcbiAgdmlld2FiaWxpdHlIZWxwZXI6IFZpZXdhYmlsaXR5SGVscGVyLFxuICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkOiAoaW5mbzoge1xuICAgIHZpZXdhYmxlSXRlbXM6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgY2hhbmdlZDogQXJyYXk8Vmlld1Rva2VuPixcbiAgfSkgPT4gdm9pZCxcbn07XG5cbnR5cGUgUmVxdWlyZWRQcm9wcyA9IHtcbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGFjY2Vzc29yIGZ1bmN0aW9ucyBhc3N1bWUgdGhpcyBpcyBhbiBBcnJheTx7a2V5OiBzdHJpbmd9IHwge2lkOiBzdHJpbmd9PiBidXQgeW91IGNhbiBvdmVycmlkZVxuICAgKiBnZXRJdGVtLCBnZXRJdGVtQ291bnQsIGFuZCBrZXlFeHRyYWN0b3IgdG8gaGFuZGxlIGFueSB0eXBlIG9mIGluZGV4LWJhc2VkIGRhdGEuXG4gICAqL1xuICBkYXRhPzogYW55LFxuICAvKipcbiAgICogQSBnZW5lcmljIGFjY2Vzc29yIGZvciBleHRyYWN0aW5nIGFuIGl0ZW0gZnJvbSBhbnkgc29ydCBvZiBkYXRhIGJsb2IuXG4gICAqL1xuICBnZXRJdGVtOiAoZGF0YTogYW55LCBpbmRleDogbnVtYmVyKSA9PiA/SXRlbSxcbiAgLyoqXG4gICAqIERldGVybWluZXMgaG93IG1hbnkgaXRlbXMgYXJlIGluIHRoZSBkYXRhIGJsb2IuXG4gICAqL1xuICBnZXRJdGVtQ291bnQ6IChkYXRhOiBhbnkpID0+IG51bWJlcixcbn07XG50eXBlIE9wdGlvbmFsUHJvcHMgPSB7XG4gIC8vIFRPRE86IENvbmZsaWN0cyB3aXRoIHRoZSBvcHRpb25hbCBgcmVuZGVySXRlbWAgaW5cbiAgLy8gYFZpcnR1YWxpemVkU2VjdGlvbkxpc3RgJ3MgcHJvcHMuXG4gIHJlbmRlckl0ZW0/OiAkRmxvd0ZpeE1lPD9SZW5kZXJJdGVtVHlwZTxJdGVtPj4sXG4gIC8qKlxuICAgKiBgZGVidWdgIHdpbGwgdHVybiBvbiBleHRyYSBsb2dnaW5nIGFuZCB2aXN1YWwgb3ZlcmxheXMgdG8gYWlkIHdpdGggZGVidWdnaW5nIGJvdGggdXNhZ2UgYW5kXG4gICAqIGltcGxlbWVudGF0aW9uLCBidXQgd2l0aCBhIHNpZ25pZmljYW50IHBlcmYgaGl0LlxuICAgKi9cbiAgZGVidWc/OiA/Ym9vbGVhbixcbiAgLyoqXG4gICAqIERFUFJFQ0FURUQ6IFZpcnR1YWxpemF0aW9uIHByb3ZpZGVzIHNpZ25pZmljYW50IHBlcmZvcm1hbmNlIGFuZCBtZW1vcnkgb3B0aW1pemF0aW9ucywgYnV0IGZ1bGx5XG4gICAqIHVubW91bnRzIHJlYWN0IGluc3RhbmNlcyB0aGF0IGFyZSBvdXRzaWRlIG9mIHRoZSByZW5kZXIgd2luZG93LiBZb3Ugc2hvdWxkIG9ubHkgbmVlZCB0byBkaXNhYmxlXG4gICAqIHRoaXMgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy5cbiAgICovXG4gIGRpc2FibGVWaXJ0dWFsaXphdGlvbj86ID9ib29sZWFuLFxuICAvKipcbiAgICogQSBtYXJrZXIgcHJvcGVydHkgZm9yIHRlbGxpbmcgdGhlIGxpc3QgdG8gcmUtcmVuZGVyIChzaW5jZSBpdCBpbXBsZW1lbnRzIGBQdXJlQ29tcG9uZW50YCkuIElmXG4gICAqIGFueSBvZiB5b3VyIGByZW5kZXJJdGVtYCwgSGVhZGVyLCBGb290ZXIsIGV0Yy4gZnVuY3Rpb25zIGRlcGVuZCBvbiBhbnl0aGluZyBvdXRzaWRlIG9mIHRoZVxuICAgKiBgZGF0YWAgcHJvcCwgc3RpY2sgaXQgaGVyZSBhbmQgdHJlYXQgaXQgaW1tdXRhYmx5LlxuICAgKi9cbiAgZXh0cmFEYXRhPzogYW55LFxuICBnZXRJdGVtTGF5b3V0PzogKFxuICAgIGRhdGE6IGFueSxcbiAgICBpbmRleDogbnVtYmVyLFxuICApID0+IHtsZW5ndGg6IG51bWJlciwgb2Zmc2V0OiBudW1iZXIsIGluZGV4OiBudW1iZXJ9LCAvLyBlLmcuIGhlaWdodCwgeVxuICBob3Jpem9udGFsPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBIb3cgbWFueSBpdGVtcyB0byByZW5kZXIgaW4gdGhlIGluaXRpYWwgYmF0Y2guIFRoaXMgc2hvdWxkIGJlIGVub3VnaCB0byBmaWxsIHRoZSBzY3JlZW4gYnV0IG5vdFxuICAgKiBtdWNoIG1vcmUuIE5vdGUgdGhlc2UgaXRlbXMgd2lsbCBuZXZlciBiZSB1bm1vdW50ZWQgYXMgcGFydCBvZiB0aGUgd2luZG93ZWQgcmVuZGVyaW5nIGluIG9yZGVyXG4gICAqIHRvIGltcHJvdmUgcGVyY2VpdmVkIHBlcmZvcm1hbmNlIG9mIHNjcm9sbC10by10b3AgYWN0aW9ucy5cbiAgICovXG4gIGluaXRpYWxOdW1Ub1JlbmRlcjogbnVtYmVyLFxuICAvKipcbiAgICogSW5zdGVhZCBvZiBzdGFydGluZyBhdCB0aGUgdG9wIHdpdGggdGhlIGZpcnN0IGl0ZW0sIHN0YXJ0IGF0IGBpbml0aWFsU2Nyb2xsSW5kZXhgLiBUaGlzXG4gICAqIGRpc2FibGVzIHRoZSBcInNjcm9sbCB0byB0b3BcIiBvcHRpbWl6YXRpb24gdGhhdCBrZWVwcyB0aGUgZmlyc3QgYGluaXRpYWxOdW1Ub1JlbmRlcmAgaXRlbXNcbiAgICogYWx3YXlzIHJlbmRlcmVkIGFuZCBpbW1lZGlhdGVseSByZW5kZXJzIHRoZSBpdGVtcyBzdGFydGluZyBhdCB0aGlzIGluaXRpYWwgaW5kZXguIFJlcXVpcmVzXG4gICAqIGBnZXRJdGVtTGF5b3V0YCB0byBiZSBpbXBsZW1lbnRlZC5cbiAgICovXG4gIGluaXRpYWxTY3JvbGxJbmRleD86ID9udW1iZXIsXG4gIC8qKlxuICAgKiBSZXZlcnNlcyB0aGUgZGlyZWN0aW9uIG9mIHNjcm9sbC4gVXNlcyBzY2FsZSB0cmFuc2Zvcm1zIG9mIC0xLlxuICAgKi9cbiAgaW52ZXJ0ZWQ/OiA/Ym9vbGVhbixcbiAga2V5RXh0cmFjdG9yOiAoaXRlbTogSXRlbSwgaW5kZXg6IG51bWJlcikgPT4gc3RyaW5nLFxuICAvKipcbiAgICogRWFjaCBjZWxsIGlzIHJlbmRlcmVkIHVzaW5nIHRoaXMgZWxlbWVudC4gQ2FuIGJlIGEgUmVhY3QgQ29tcG9uZW50IENsYXNzLFxuICAgKiBvciBhIHJlbmRlciBmdW5jdGlvbi4gRGVmYXVsdHMgdG8gdXNpbmcgVmlldy5cbiAgICovXG4gIENlbGxSZW5kZXJlckNvbXBvbmVudD86ID9SZWFjdC5Db21wb25lbnRUeXBlPGFueT4sXG4gIC8qKlxuICAgKiBFYWNoIGRhdGEgaXRlbSBpcyByZW5kZXJlZCB1c2luZyB0aGlzIGVsZW1lbnQuIENhbiBiZSBhIFJlYWN0IENvbXBvbmVudCBDbGFzcyxcbiAgICogb3IgYSByZW5kZXIgZnVuY3Rpb24uXG4gICAqL1xuICBMaXN0SXRlbUNvbXBvbmVudD86ID9SZWFjdC5Db21wb25lbnRUeXBlPGFueT4sXG4gIC8qKlxuICAgKiBSZW5kZXJlZCB3aGVuIHRoZSBsaXN0IGlzIGVtcHR5LiBDYW4gYmUgYSBSZWFjdCBDb21wb25lbnQgQ2xhc3MsIGEgcmVuZGVyIGZ1bmN0aW9uLCBvclxuICAgKiBhIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAqL1xuICBMaXN0RW1wdHlDb21wb25lbnQ/OiA/KFJlYWN0LkNvbXBvbmVudFR5cGU8YW55PiB8IFJlYWN0LkVsZW1lbnQ8YW55PiksXG4gIC8qKlxuICAgKiBSZW5kZXJlZCBhdCB0aGUgYm90dG9tIG9mIGFsbCB0aGUgaXRlbXMuIENhbiBiZSBhIFJlYWN0IENvbXBvbmVudCBDbGFzcywgYSByZW5kZXIgZnVuY3Rpb24sIG9yXG4gICAqIGEgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIExpc3RGb290ZXJDb21wb25lbnQ/OiA/KFJlYWN0LkNvbXBvbmVudFR5cGU8YW55PiB8IFJlYWN0LkVsZW1lbnQ8YW55PiksXG4gIC8qKlxuICAgKiBTdHlsaW5nIGZvciBpbnRlcm5hbCBWaWV3IGZvciBMaXN0Rm9vdGVyQ29tcG9uZW50XG4gICAqL1xuICBMaXN0Rm9vdGVyQ29tcG9uZW50U3R5bGU/OiBWaWV3U3R5bGVQcm9wLFxuICAvKipcbiAgICogUmVuZGVyZWQgYXQgdGhlIHRvcCBvZiBhbGwgdGhlIGl0ZW1zLiBDYW4gYmUgYSBSZWFjdCBDb21wb25lbnQgQ2xhc3MsIGEgcmVuZGVyIGZ1bmN0aW9uLCBvclxuICAgKiBhIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAqL1xuICBMaXN0SGVhZGVyQ29tcG9uZW50PzogPyhSZWFjdC5Db21wb25lbnRUeXBlPGFueT4gfCBSZWFjdC5FbGVtZW50PGFueT4pLFxuICAvKipcbiAgICogU3R5bGluZyBmb3IgaW50ZXJuYWwgVmlldyBmb3IgTGlzdEhlYWRlckNvbXBvbmVudFxuICAgKi9cbiAgTGlzdEhlYWRlckNvbXBvbmVudFN0eWxlPzogVmlld1N0eWxlUHJvcCxcbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgbGlzdC4gSWYgdGhlcmUgYXJlIG11bHRpcGxlIFZpcnR1YWxpemVkTGlzdHMgYXQgdGhlIHNhbWUgbGV2ZWwgb2ZcbiAgICogbmVzdGluZyB3aXRoaW4gYW5vdGhlciBWaXJ0dWFsaXplZExpc3QsIHRoaXMga2V5IGlzIG5lY2Vzc2FyeSBmb3IgdmlydHVhbGl6YXRpb24gdG9cbiAgICogd29yayBwcm9wZXJseS5cbiAgICovXG4gIGxpc3RLZXk/OiBzdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmVuZGVyIGluIGVhY2ggaW5jcmVtZW50YWwgcmVuZGVyIGJhdGNoLiBUaGUgbW9yZSByZW5kZXJlZCBhdFxuICAgKiBvbmNlLCB0aGUgYmV0dGVyIHRoZSBmaWxsIHJhdGUsIGJ1dCByZXNwb25zaXZlbmVzcyBtYXkgc3VmZmVyIGJlY2F1c2UgcmVuZGVyaW5nIGNvbnRlbnQgbWF5XG4gICAqIGludGVyZmVyZSB3aXRoIHJlc3BvbmRpbmcgdG8gYnV0dG9uIHRhcHMgb3Igb3RoZXIgaW50ZXJhY3Rpb25zLlxuICAgKi9cbiAgbWF4VG9SZW5kZXJQZXJCYXRjaDogbnVtYmVyLFxuICBvbkVuZFJlYWNoZWQ/OiA/KGluZm86IHtkaXN0YW5jZUZyb21FbmQ6IG51bWJlcn0pID0+IHZvaWQsXG4gIG9uRW5kUmVhY2hlZFRocmVzaG9sZD86ID9udW1iZXIsIC8vIHVuaXRzIG9mIHZpc2libGUgbGVuZ3RoXG4gIG9uTGF5b3V0PzogP0Z1bmN0aW9uLFxuICAvKipcbiAgICogSWYgcHJvdmlkZWQsIGEgc3RhbmRhcmQgUmVmcmVzaENvbnRyb2wgd2lsbCBiZSBhZGRlZCBmb3IgXCJQdWxsIHRvIFJlZnJlc2hcIiBmdW5jdGlvbmFsaXR5LiBNYWtlXG4gICAqIHN1cmUgdG8gYWxzbyBzZXQgdGhlIGByZWZyZXNoaW5nYCBwcm9wIGNvcnJlY3RseS5cbiAgICovXG4gIG9uUmVmcmVzaD86ID9GdW5jdGlvbixcbiAgLyoqXG4gICAqIFVzZWQgdG8gaGFuZGxlIGZhaWx1cmVzIHdoZW4gc2Nyb2xsaW5nIHRvIGFuIGluZGV4IHRoYXQgaGFzIG5vdCBiZWVuIG1lYXN1cmVkIHlldC4gUmVjb21tZW5kZWRcbiAgICogYWN0aW9uIGlzIHRvIGVpdGhlciBjb21wdXRlIHlvdXIgb3duIG9mZnNldCBhbmQgYHNjcm9sbFRvYCBpdCwgb3Igc2Nyb2xsIGFzIGZhciBhcyBwb3NzaWJsZSBhbmRcbiAgICogdGhlbiB0cnkgYWdhaW4gYWZ0ZXIgbW9yZSBpdGVtcyBoYXZlIGJlZW4gcmVuZGVyZWQuXG4gICAqL1xuICBvblNjcm9sbFRvSW5kZXhGYWlsZWQ/OiA/KGluZm86IHtcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIGhpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXg6IG51bWJlcixcbiAgICBhdmVyYWdlSXRlbUxlbmd0aDogbnVtYmVyLFxuICB9KSA9PiB2b2lkLFxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gdGhlIHZpZXdhYmlsaXR5IG9mIHJvd3MgY2hhbmdlcywgYXMgZGVmaW5lZCBieSB0aGVcbiAgICogYHZpZXdhYmlsaXR5Q29uZmlnYCBwcm9wLlxuICAgKi9cbiAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZD86ID8oaW5mbzoge1xuICAgIHZpZXdhYmxlSXRlbXM6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgY2hhbmdlZDogQXJyYXk8Vmlld1Rva2VuPixcbiAgfSkgPT4gdm9pZCxcbiAgcGVyc2lzdGVudFNjcm9sbGJhcj86ID9ib29sZWFuLFxuICAvKipcbiAgICogU2V0IHRoaXMgd2hlbiBvZmZzZXQgaXMgbmVlZGVkIGZvciB0aGUgbG9hZGluZyBpbmRpY2F0b3IgdG8gc2hvdyBjb3JyZWN0bHkuXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICBwcm9ncmVzc1ZpZXdPZmZzZXQ/OiBudW1iZXIsXG4gIC8qKlxuICAgKiBBIGN1c3RvbSByZWZyZXNoIGNvbnRyb2wgZWxlbWVudC4gV2hlbiBzZXQsIGl0IG92ZXJyaWRlcyB0aGUgZGVmYXVsdFxuICAgKiA8UmVmcmVzaENvbnRyb2w+IGNvbXBvbmVudCBidWlsdCBpbnRlcm5hbGx5LiBUaGUgb25SZWZyZXNoIGFuZCByZWZyZXNoaW5nXG4gICAqIHByb3BzIGFyZSBhbHNvIGlnbm9yZWQuIE9ubHkgd29ya3MgZm9yIHZlcnRpY2FsIFZpcnR1YWxpemVkTGlzdC5cbiAgICovXG4gIHJlZnJlc2hDb250cm9sPzogP1JlYWN0LkVsZW1lbnQ8YW55PixcbiAgLyoqXG4gICAqIFNldCB0aGlzIHRydWUgd2hpbGUgd2FpdGluZyBmb3IgbmV3IGRhdGEgZnJvbSBhIHJlZnJlc2guXG4gICAqL1xuICByZWZyZXNoaW5nPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBOb3RlOiBtYXkgaGF2ZSBidWdzIChtaXNzaW5nIGNvbnRlbnQpIGluIHNvbWUgY2lyY3Vtc3RhbmNlcyAtIHVzZSBhdCB5b3VyIG93biByaXNrLlxuICAgKlxuICAgKiBUaGlzIG1heSBpbXByb3ZlIHNjcm9sbCBwZXJmb3JtYW5jZSBmb3IgbGFyZ2UgbGlzdHMuXG4gICAqL1xuICByZW1vdmVDbGlwcGVkU3Vidmlld3M/OiBib29sZWFuLFxuICAvKipcbiAgICogUmVuZGVyIGEgY3VzdG9tIHNjcm9sbCBjb21wb25lbnQsIGUuZy4gd2l0aCBhIGRpZmZlcmVudGx5IHN0eWxlZCBgUmVmcmVzaENvbnRyb2xgLlxuICAgKi9cbiAgcmVuZGVyU2Nyb2xsQ29tcG9uZW50PzogKHByb3BzOiBPYmplY3QpID0+IFJlYWN0LkVsZW1lbnQ8YW55PixcbiAgLyoqXG4gICAqIEFtb3VudCBvZiB0aW1lIGJldHdlZW4gbG93LXByaSBpdGVtIHJlbmRlciBiYXRjaGVzLCBlLmcuIGZvciByZW5kZXJpbmcgaXRlbXMgcXVpdGUgYSB3YXlzIG9mZlxuICAgKiBzY3JlZW4uIFNpbWlsYXIgZmlsbCByYXRlL3Jlc3BvbnNpdmVuZXNzIHRyYWRlb2ZmIGFzIGBtYXhUb1JlbmRlclBlckJhdGNoYC5cbiAgICovXG4gIHVwZGF0ZUNlbGxzQmF0Y2hpbmdQZXJpb2Q6IG51bWJlcixcbiAgdmlld2FiaWxpdHlDb25maWc/OiBWaWV3YWJpbGl0eUNvbmZpZyxcbiAgLyoqXG4gICAqIExpc3Qgb2YgVmlld2FiaWxpdHlDb25maWcvb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCBwYWlycy4gQSBzcGVjaWZpYyBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkXG4gICAqIHdpbGwgYmUgY2FsbGVkIHdoZW4gaXRzIGNvcnJlc3BvbmRpbmcgVmlld2FiaWxpdHlDb25maWcncyBjb25kaXRpb25zIGFyZSBtZXQuXG4gICAqL1xuICB2aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnM/OiBBcnJheTxWaWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcj4sXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSB2aXNpYmxlIGFyZWEsIGluIHVuaXRzIG9mXG4gICAqIHZpc2libGUgbGVuZ3Rocy4gU28gaWYgeW91ciBsaXN0IGZpbGxzIHRoZSBzY3JlZW4sIHRoZW4gYHdpbmRvd1NpemU9ezIxfWAgKHRoZSBkZWZhdWx0KSB3aWxsXG4gICAqIHJlbmRlciB0aGUgdmlzaWJsZSBzY3JlZW4gYXJlYSBwbHVzIHVwIHRvIDEwIHNjcmVlbnMgYWJvdmUgYW5kIDEwIGJlbG93IHRoZSB2aWV3cG9ydC4gUmVkdWNpbmdcbiAgICogdGhpcyBudW1iZXIgd2lsbCByZWR1Y2UgbWVtb3J5IGNvbnN1bXB0aW9uIGFuZCBtYXkgaW1wcm92ZSBwZXJmb3JtYW5jZSwgYnV0IHdpbGwgaW5jcmVhc2UgdGhlXG4gICAqIGNoYW5jZSB0aGF0IGZhc3Qgc2Nyb2xsaW5nIG1heSByZXZlYWwgbW9tZW50YXJ5IGJsYW5rIGFyZWFzIG9mIHVucmVuZGVyZWQgY29udGVudC5cbiAgICovXG4gIHdpbmRvd1NpemU6IG51bWJlcixcbn07XG4vKiAkRmxvd0ZpeE1lIC0gdGhpcyBQcm9wcyBzZWVtcyB0byBiZSBtaXNzaW5nIGEgYnVuY2ggb2Ygc3R1ZmYuIFJlbW92ZSB0aGlzXG4gKiBjb21tZW50IHRvIHNlZSB0aGUgZXJyb3JzICovXG5leHBvcnQgdHlwZSBQcm9wcyA9IFJlcXVpcmVkUHJvcHMgJiBPcHRpb25hbFByb3BzO1xuXG50eXBlIERlZmF1bHRQcm9wcyA9IHt8XG4gIGRpc2FibGVWaXJ0dWFsaXphdGlvbjogYm9vbGVhbixcbiAgaG9yaXpvbnRhbDogYm9vbGVhbixcbiAgaW5pdGlhbE51bVRvUmVuZGVyOiBudW1iZXIsXG4gIGtleUV4dHJhY3RvcjogKGl0ZW06IEl0ZW0sIGluZGV4OiBudW1iZXIpID0+IHN0cmluZyxcbiAgbWF4VG9SZW5kZXJQZXJCYXRjaDogbnVtYmVyLFxuICBvbkVuZFJlYWNoZWRUaHJlc2hvbGQ6IG51bWJlcixcbiAgc2Nyb2xsRXZlbnRUaHJvdHRsZTogbnVtYmVyLFxuICB1cGRhdGVDZWxsc0JhdGNoaW5nUGVyaW9kOiBudW1iZXIsXG4gIHdpbmRvd1NpemU6IG51bWJlcixcbnx9O1xuXG5sZXQgX3VzZWRJbmRleEZvcktleSA9IGZhbHNlO1xubGV0IF9rZXlsZXNzSXRlbUNvbXBvbmVudE5hbWU6IHN0cmluZyA9ICcnO1xuXG50eXBlIEZyYW1lID0ge1xuICBvZmZzZXQ6IG51bWJlcixcbiAgbGVuZ3RoOiBudW1iZXIsXG4gIGluZGV4OiBudW1iZXIsXG4gIGluTGF5b3V0OiBib29sZWFuLFxufTtcblxudHlwZSBDaGlsZExpc3RTdGF0ZSA9IHtcbiAgZmlyc3Q6IG51bWJlcixcbiAgbGFzdDogbnVtYmVyLFxuICBmcmFtZXM6IHtba2V5OiBudW1iZXJdOiBGcmFtZX0sXG59O1xuXG50eXBlIFN0YXRlID0ge2ZpcnN0OiBudW1iZXIsIGxhc3Q6IG51bWJlcn07XG5cbi8qKlxuICogQmFzZSBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIG1vcmUgY29udmVuaWVudCBbYDxGbGF0TGlzdD5gXSgvcmVhY3QtbmF0aXZlL2RvY3MvZmxhdGxpc3QuaHRtbClcbiAqIGFuZCBbYDxTZWN0aW9uTGlzdD5gXSgvcmVhY3QtbmF0aXZlL2RvY3Mvc2VjdGlvbmxpc3QuaHRtbCkgY29tcG9uZW50cywgd2hpY2ggYXJlIGFsc28gYmV0dGVyXG4gKiBkb2N1bWVudGVkLiBJbiBnZW5lcmFsLCB0aGlzIHNob3VsZCBvbmx5IHJlYWxseSBiZSB1c2VkIGlmIHlvdSBuZWVkIG1vcmUgZmxleGliaWxpdHkgdGhhblxuICogYEZsYXRMaXN0YCBwcm92aWRlcywgZS5nLiBmb3IgdXNlIHdpdGggaW1tdXRhYmxlIGRhdGEgaW5zdGVhZCBvZiBwbGFpbiBhcnJheXMuXG4gKlxuICogVmlydHVhbGl6YXRpb24gbWFzc2l2ZWx5IGltcHJvdmVzIG1lbW9yeSBjb25zdW1wdGlvbiBhbmQgcGVyZm9ybWFuY2Ugb2YgbGFyZ2UgbGlzdHMgYnlcbiAqIG1haW50YWluaW5nIGEgZmluaXRlIHJlbmRlciB3aW5kb3cgb2YgYWN0aXZlIGl0ZW1zIGFuZCByZXBsYWNpbmcgYWxsIGl0ZW1zIG91dHNpZGUgb2YgdGhlIHJlbmRlclxuICogd2luZG93IHdpdGggYXBwcm9wcmlhdGVseSBzaXplZCBibGFuayBzcGFjZS4gVGhlIHdpbmRvdyBhZGFwdHMgdG8gc2Nyb2xsaW5nIGJlaGF2aW9yLCBhbmQgaXRlbXNcbiAqIGFyZSByZW5kZXJlZCBpbmNyZW1lbnRhbGx5IHdpdGggbG93LXByaSAoYWZ0ZXIgYW55IHJ1bm5pbmcgaW50ZXJhY3Rpb25zKSBpZiB0aGV5IGFyZSBmYXIgZnJvbSB0aGVcbiAqIHZpc2libGUgYXJlYSwgb3Igd2l0aCBoaS1wcmkgb3RoZXJ3aXNlIHRvIG1pbmltaXplIHRoZSBwb3RlbnRpYWwgb2Ygc2VlaW5nIGJsYW5rIHNwYWNlLlxuICpcbiAqIFNvbWUgY2F2ZWF0czpcbiAqXG4gKiAtIEludGVybmFsIHN0YXRlIGlzIG5vdCBwcmVzZXJ2ZWQgd2hlbiBjb250ZW50IHNjcm9sbHMgb3V0IG9mIHRoZSByZW5kZXIgd2luZG93LiBNYWtlIHN1cmUgYWxsXG4gKiAgIHlvdXIgZGF0YSBpcyBjYXB0dXJlZCBpbiB0aGUgaXRlbSBkYXRhIG9yIGV4dGVybmFsIHN0b3JlcyBsaWtlIEZsdXgsIFJlZHV4LCBvciBSZWxheS5cbiAqIC0gVGhpcyBpcyBhIGBQdXJlQ29tcG9uZW50YCB3aGljaCBtZWFucyB0aGF0IGl0IHdpbGwgbm90IHJlLXJlbmRlciBpZiBgcHJvcHNgIHJlbWFpbiBzaGFsbG93LVxuICogICBlcXVhbC4gTWFrZSBzdXJlIHRoYXQgZXZlcnl0aGluZyB5b3VyIGByZW5kZXJJdGVtYCBmdW5jdGlvbiBkZXBlbmRzIG9uIGlzIHBhc3NlZCBhcyBhIHByb3BcbiAqICAgKGUuZy4gYGV4dHJhRGF0YWApIHRoYXQgaXMgbm90IGA9PT1gIGFmdGVyIHVwZGF0ZXMsIG90aGVyd2lzZSB5b3VyIFVJIG1heSBub3QgdXBkYXRlIG9uXG4gKiAgIGNoYW5nZXMuIFRoaXMgaW5jbHVkZXMgdGhlIGBkYXRhYCBwcm9wIGFuZCBwYXJlbnQgY29tcG9uZW50IHN0YXRlLlxuICogLSBJbiBvcmRlciB0byBjb25zdHJhaW4gbWVtb3J5IGFuZCBlbmFibGUgc21vb3RoIHNjcm9sbGluZywgY29udGVudCBpcyByZW5kZXJlZCBhc3luY2hyb25vdXNseVxuICogICBvZmZzY3JlZW4uIFRoaXMgbWVhbnMgaXQncyBwb3NzaWJsZSB0byBzY3JvbGwgZmFzdGVyIHRoYW4gdGhlIGZpbGwgcmF0ZSBhbmRzIG1vbWVudGFyaWx5IHNlZVxuICogICBibGFuayBjb250ZW50LiBUaGlzIGlzIGEgdHJhZGVvZmYgdGhhdCBjYW4gYmUgYWRqdXN0ZWQgdG8gc3VpdCB0aGUgbmVlZHMgb2YgZWFjaCBhcHBsaWNhdGlvbixcbiAqICAgYW5kIHdlIGFyZSB3b3JraW5nIG9uIGltcHJvdmluZyBpdCBiZWhpbmQgdGhlIHNjZW5lcy5cbiAqIC0gQnkgZGVmYXVsdCwgdGhlIGxpc3QgbG9va3MgZm9yIGEgYGtleWAgb3IgYGlkYCBwcm9wIG9uIGVhY2ggaXRlbSBhbmQgdXNlcyB0aGF0IGZvciB0aGUgUmVhY3Qga2V5LlxuICogICBBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIHByb3ZpZGUgYSBjdXN0b20gYGtleUV4dHJhY3RvcmAgcHJvcC5cbiAqXG4gKi9cbmNsYXNzIFZpcnR1YWxpemVkTGlzdCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIHByb3BzOiBQcm9wcztcblxuICAvLyBzY3JvbGxUb0VuZCBtYXkgYmUgamFua3kgd2l0aG91dCBnZXRJdGVtTGF5b3V0IHByb3BcbiAgc2Nyb2xsVG9FbmQocGFyYW1zPzogP3thbmltYXRlZD86ID9ib29sZWFufSkge1xuICAgIGNvbnN0IGFuaW1hdGVkID0gcGFyYW1zID8gcGFyYW1zLmFuaW1hdGVkIDogdHJ1ZTtcbiAgICBjb25zdCB2ZXJ5TGFzdCA9IHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KHRoaXMucHJvcHMuZGF0YSkgLSAxO1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KHZlcnlMYXN0KTtcbiAgICBjb25zdCBvZmZzZXQgPSBNYXRoLm1heChcbiAgICAgIDAsXG4gICAgICBmcmFtZS5vZmZzZXQgK1xuICAgICAgICBmcmFtZS5sZW5ndGggK1xuICAgICAgICB0aGlzLl9mb290ZXJMZW5ndGggLVxuICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGgsXG4gICAgKTtcbiAgICAvKiAkRmxvd0ZpeE1lKD49MC41My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiLHJlYWN0X25hdGl2ZV9vc3MpIFRoaXMgY29tbWVudFxuICAgICAqIHN1cHByZXNzZXMgYW4gZXJyb3Igd2hlbiB1cGdyYWRpbmcgRmxvdydzIHN1cHBvcnQgZm9yIFJlYWN0LiBUbyBzZWUgdGhlXG4gICAgICogZXJyb3IgZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgdGhpcy5fc2Nyb2xsUmVmLnNjcm9sbFRvKFxuICAgICAgdGhpcy5wcm9wcy5ob3Jpem9udGFsID8ge3g6IG9mZnNldCwgYW5pbWF0ZWR9IDoge3k6IG9mZnNldCwgYW5pbWF0ZWR9LFxuICAgICk7XG4gIH1cblxuICAvLyBzY3JvbGxUb0luZGV4IG1heSBiZSBqYW5reSB3aXRob3V0IGdldEl0ZW1MYXlvdXQgcHJvcFxuICBzY3JvbGxUb0luZGV4KHBhcmFtczoge1xuICAgIGFuaW1hdGVkPzogP2Jvb2xlYW4sXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICB2aWV3T2Zmc2V0PzogbnVtYmVyLFxuICAgIHZpZXdQb3NpdGlvbj86IG51bWJlcixcbiAgfSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRhdGEsXG4gICAgICBob3Jpem9udGFsLFxuICAgICAgZ2V0SXRlbUNvdW50LFxuICAgICAgZ2V0SXRlbUxheW91dCxcbiAgICAgIG9uU2Nyb2xsVG9JbmRleEZhaWxlZCxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7YW5pbWF0ZWQsIGluZGV4LCB2aWV3T2Zmc2V0LCB2aWV3UG9zaXRpb259ID0gcGFyYW1zO1xuICAgIGludmFyaWFudChcbiAgICAgIGluZGV4ID49IDAgJiYgaW5kZXggPCBnZXRJdGVtQ291bnQoZGF0YSksXG4gICAgICBgc2Nyb2xsVG9JbmRleCBvdXQgb2YgcmFuZ2U6IHJlcXVlc3RlZCBpbmRleCAke2luZGV4fSBidXQgbWF4aW11bSBpcyAke2dldEl0ZW1Db3VudChcbiAgICAgICAgZGF0YSxcbiAgICAgICkgLSAxfWAsXG4gICAgKTtcbiAgICBpZiAoIWdldEl0ZW1MYXlvdXQgJiYgaW5kZXggPiB0aGlzLl9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4KSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgICEhb25TY3JvbGxUb0luZGV4RmFpbGVkLFxuICAgICAgICAnc2Nyb2xsVG9JbmRleCBzaG91bGQgYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGdldEl0ZW1MYXlvdXQgb3Igb25TY3JvbGxUb0luZGV4RmFpbGVkLCAnICtcbiAgICAgICAgICAnb3RoZXJ3aXNlIHRoZXJlIGlzIG5vIHdheSB0byBrbm93IHRoZSBsb2NhdGlvbiBvZiBvZmZzY3JlZW4gaW5kaWNlcyBvciBoYW5kbGUgZmFpbHVyZXMuJyxcbiAgICAgICk7XG4gICAgICBvblNjcm9sbFRvSW5kZXhGYWlsZWQoe1xuICAgICAgICBhdmVyYWdlSXRlbUxlbmd0aDogdGhpcy5fYXZlcmFnZUNlbGxMZW5ndGgsXG4gICAgICAgIGhpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXg6IHRoaXMuX2hpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXgsXG4gICAgICAgIGluZGV4LFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGluZGV4KTtcbiAgICBjb25zdCBvZmZzZXQgPVxuICAgICAgTWF0aC5tYXgoXG4gICAgICAgIDAsXG4gICAgICAgIGZyYW1lLm9mZnNldCAtXG4gICAgICAgICAgKHZpZXdQb3NpdGlvbiB8fCAwKSAqXG4gICAgICAgICAgICAodGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoIC0gZnJhbWUubGVuZ3RoKSxcbiAgICAgICkgLSAodmlld09mZnNldCB8fCAwKTtcbiAgICAvKiAkRmxvd0ZpeE1lKD49MC41My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiLHJlYWN0X25hdGl2ZV9vc3MpIFRoaXMgY29tbWVudFxuICAgICAqIHN1cHByZXNzZXMgYW4gZXJyb3Igd2hlbiB1cGdyYWRpbmcgRmxvdydzIHN1cHBvcnQgZm9yIFJlYWN0LiBUbyBzZWUgdGhlXG4gICAgICogZXJyb3IgZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgdGhpcy5fc2Nyb2xsUmVmLnNjcm9sbFRvKFxuICAgICAgaG9yaXpvbnRhbCA/IHt4OiBvZmZzZXQsIGFuaW1hdGVkfSA6IHt5OiBvZmZzZXQsIGFuaW1hdGVkfSxcbiAgICApO1xuICB9XG5cbiAgLy8gc2Nyb2xsVG9JdGVtIG1heSBiZSBqYW5reSB3aXRob3V0IGdldEl0ZW1MYXlvdXQgcHJvcC4gUmVxdWlyZWQgbGluZWFyIHNjYW4gdGhyb3VnaCBpdGVtcyAtXG4gIC8vIHVzZSBzY3JvbGxUb0luZGV4IGluc3RlYWQgaWYgcG9zc2libGUuXG4gIHNjcm9sbFRvSXRlbShwYXJhbXM6IHtcbiAgICBhbmltYXRlZD86ID9ib29sZWFuLFxuICAgIGl0ZW06IEl0ZW0sXG4gICAgdmlld1Bvc2l0aW9uPzogbnVtYmVyLFxuICB9KSB7XG4gICAgY29uc3Qge2l0ZW19ID0gcGFyYW1zO1xuICAgIGNvbnN0IHtkYXRhLCBnZXRJdGVtLCBnZXRJdGVtQ291bnR9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBpdGVtQ291bnQgPSBnZXRJdGVtQ291bnQoZGF0YSk7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGl0ZW1Db3VudDsgaW5kZXgrKykge1xuICAgICAgaWYgKGdldEl0ZW0oZGF0YSwgaW5kZXgpID09PSBpdGVtKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCh7Li4ucGFyYW1zLCBpbmRleH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRvIGEgc3BlY2lmaWMgY29udGVudCBwaXhlbCBvZmZzZXQgaW4gdGhlIGxpc3QuXG4gICAqXG4gICAqIFBhcmFtIGBvZmZzZXRgIGV4cGVjdHMgdGhlIG9mZnNldCB0byBzY3JvbGwgdG8uXG4gICAqIEluIGNhc2Ugb2YgYGhvcml6b250YWxgIGlzIHRydWUsIHRoZSBvZmZzZXQgaXMgdGhlIHgtdmFsdWUsXG4gICAqIGluIGFueSBvdGhlciBjYXNlIHRoZSBvZmZzZXQgaXMgdGhlIHktdmFsdWUuXG4gICAqXG4gICAqIFBhcmFtIGBhbmltYXRlZGAgKGB0cnVlYCBieSBkZWZhdWx0KSBkZWZpbmVzIHdoZXRoZXIgdGhlIGxpc3RcbiAgICogc2hvdWxkIGRvIGFuIGFuaW1hdGlvbiB3aGlsZSBzY3JvbGxpbmcuXG4gICAqL1xuICBzY3JvbGxUb09mZnNldChwYXJhbXM6IHthbmltYXRlZD86ID9ib29sZWFuLCBvZmZzZXQ6IG51bWJlcn0pIHtcbiAgICBjb25zdCB7YW5pbWF0ZWQsIG9mZnNldH0gPSBwYXJhbXM7XG4gICAgLyogJEZsb3dGaXhNZSg+PTAuNTMuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYixyZWFjdF9uYXRpdmVfb3NzKSBUaGlzIGNvbW1lbnRcbiAgICAgKiBzdXBwcmVzc2VzIGFuIGVycm9yIHdoZW4gdXBncmFkaW5nIEZsb3cncyBzdXBwb3J0IGZvciBSZWFjdC4gVG8gc2VlIHRoZVxuICAgICAqIGVycm9yIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgIHRoaXMuX3Njcm9sbFJlZi5zY3JvbGxUbyhcbiAgICAgIHRoaXMucHJvcHMuaG9yaXpvbnRhbCA/IHt4OiBvZmZzZXQsIGFuaW1hdGVkfSA6IHt5OiBvZmZzZXQsIGFuaW1hdGVkfSxcbiAgICApO1xuICB9XG5cbiAgcmVjb3JkSW50ZXJhY3Rpb24oKSB7XG4gICAgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5mb3JFYWNoKGNoaWxkTGlzdCA9PiB7XG4gICAgICBjaGlsZExpc3QucmVmICYmIGNoaWxkTGlzdC5yZWYucmVjb3JkSW50ZXJhY3Rpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLl92aWV3YWJpbGl0eVR1cGxlcy5mb3JFYWNoKHQgPT4ge1xuICAgICAgdC52aWV3YWJpbGl0eUhlbHBlci5yZWNvcmRJbnRlcmFjdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX3VwZGF0ZVZpZXdhYmxlSXRlbXModGhpcy5wcm9wcy5kYXRhKTtcbiAgfVxuXG4gIGZsYXNoU2Nyb2xsSW5kaWNhdG9ycygpIHtcbiAgICAvKiAkRmxvd0ZpeE1lKD49MC41My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiLHJlYWN0X25hdGl2ZV9vc3MpIFRoaXMgY29tbWVudFxuICAgICAqIHN1cHByZXNzZXMgYW4gZXJyb3Igd2hlbiB1cGdyYWRpbmcgRmxvdydzIHN1cHBvcnQgZm9yIFJlYWN0LiBUbyBzZWUgdGhlXG4gICAgICogZXJyb3IgZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgdGhpcy5fc2Nyb2xsUmVmLmZsYXNoU2Nyb2xsSW5kaWNhdG9ycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGEgaGFuZGxlIHRvIHRoZSB1bmRlcmx5aW5nIHNjcm9sbCByZXNwb25kZXIuXG4gICAqIE5vdGUgdGhhdCBgdGhpcy5fc2Nyb2xsUmVmYCBtaWdodCBub3QgYmUgYSBgU2Nyb2xsVmlld2AsIHNvIHdlXG4gICAqIG5lZWQgdG8gY2hlY2sgdGhhdCBpdCByZXNwb25kcyB0byBgZ2V0U2Nyb2xsUmVzcG9uZGVyYCBiZWZvcmUgY2FsbGluZyBpdC5cbiAgICovXG4gIGdldFNjcm9sbFJlc3BvbmRlcigpOiBhbnkge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgJiYgdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbFJlc3BvbmRlcikge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxSZXNwb25kZXIoKTtcbiAgICB9XG4gIH1cblxuICBnZXRTY3JvbGxhYmxlTm9kZSgpOiBhbnkge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgJiYgdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbGFibGVOb2RlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbGFibGVOb2RlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZWFjdE5hdGl2ZS5maW5kTm9kZUhhbmRsZSh0aGlzLl9zY3JvbGxSZWYpO1xuICAgIH1cbiAgfVxuXG4gIGdldFNjcm9sbFJlZigpOiBhbnkge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgJiYgdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbFJlZikge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxSZWYoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbFJlZjtcbiAgICB9XG4gIH1cblxuICBzZXROYXRpdmVQcm9wcyhwcm9wczogT2JqZWN0KSB7XG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZikge1xuICAgICAgdGhpcy5fc2Nyb2xsUmVmLnNldE5hdGl2ZVByb3BzKHByb3BzKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZGVmYXVsdFByb3BzOiBEZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZVZpcnR1YWxpemF0aW9uOiBmYWxzZSxcbiAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICBpbml0aWFsTnVtVG9SZW5kZXI6IDEwLFxuICAgIGtleUV4dHJhY3RvcjogKGl0ZW06IEl0ZW0sIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGlmIChpdGVtLmtleSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmtleTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtLmlkICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0uaWQ7XG4gICAgICB9XG4gICAgICBfdXNlZEluZGV4Rm9yS2V5ID0gdHJ1ZTtcbiAgICAgIGlmIChpdGVtLnR5cGUgJiYgaXRlbS50eXBlLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgIF9rZXlsZXNzSXRlbUNvbXBvbmVudE5hbWUgPSBpdGVtLnR5cGUuZGlzcGxheU5hbWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gU3RyaW5nKGluZGV4KTtcbiAgICB9LFxuICAgIG1heFRvUmVuZGVyUGVyQmF0Y2g6IDEwLFxuICAgIG9uRW5kUmVhY2hlZFRocmVzaG9sZDogMiwgLy8gbXVsdGlwbGVzIG9mIGxlbmd0aFxuICAgIHNjcm9sbEV2ZW50VGhyb3R0bGU6IDUwLFxuICAgIHVwZGF0ZUNlbGxzQmF0Y2hpbmdQZXJpb2Q6IDUwLFxuICAgIHdpbmRvd1NpemU6IDIxLCAvLyBtdWx0aXBsZXMgb2YgbGVuZ3RoXG4gIH07XG5cbiAgc3RhdGljIGNvbnRleHRUeXBlczpcbiAgICB8IGFueVxuICAgIHwge3xcbiAgICAgICAgdmlydHVhbGl6ZWRDZWxsOiB7fFxuICAgICAgICAgIGNlbGxLZXk6IFJlYWN0JFByb3BUeXBlJFByaW1pdGl2ZTxzdHJpbmc+LFxuICAgICAgICB8fSxcbiAgICAgICAgdmlydHVhbGl6ZWRMaXN0OiB7fFxuICAgICAgICAgIGdldFNjcm9sbE1ldHJpY3M6IFJlYWN0JFByb3BUeXBlJFByaW1pdGl2ZTxGdW5jdGlvbj4sXG4gICAgICAgICAgaG9yaXpvbnRhbDogUmVhY3QkUHJvcFR5cGUkUHJpbWl0aXZlPGJvb2xlYW4+LFxuICAgICAgICAgIGdldE91dGVybW9zdFBhcmVudExpc3RSZWY6IFJlYWN0JFByb3BUeXBlJFByaW1pdGl2ZTxGdW5jdGlvbj4sXG4gICAgICAgICAgZ2V0TmVzdGVkQ2hpbGRTdGF0ZTogUmVhY3QkUHJvcFR5cGUkUHJpbWl0aXZlPEZ1bmN0aW9uPixcbiAgICAgICAgICByZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IFJlYWN0JFByb3BUeXBlJFByaW1pdGl2ZTxGdW5jdGlvbj4sXG4gICAgICAgICAgdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IFJlYWN0JFByb3BUeXBlJFByaW1pdGl2ZTxGdW5jdGlvbj4sXG4gICAgICAgIHx9LFxuICAgICAgfH0gPSB7XG4gICAgdmlydHVhbGl6ZWRDZWxsOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgY2VsbEtleTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB9KSxcbiAgICB2aXJ0dWFsaXplZExpc3Q6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBnZXRTY3JvbGxNZXRyaWNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgIGhvcml6b250YWw6IFByb3BUeXBlcy5ib29sLFxuICAgICAgZ2V0T3V0ZXJtb3N0UGFyZW50TGlzdFJlZjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICBnZXROZXN0ZWRDaGlsZFN0YXRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgIHJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICB1bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgfSksXG4gIH07XG5cbiAgc3RhdGljIGNoaWxkQ29udGV4dFR5cGVzOlxuICAgIHwgYW55XG4gICAgfCB7fFxuICAgICAgICBnZXRTY3JvbGxNZXRyaWNzOiBSZWFjdCRQcm9wVHlwZSRQcmltaXRpdmU8RnVuY3Rpb24+LFxuICAgICAgICBob3Jpem9udGFsOiBSZWFjdCRQcm9wVHlwZSRQcmltaXRpdmU8Ym9vbGVhbj4sXG4gICAgICAgIGdldE91dGVybW9zdFBhcmVudExpc3RSZWY6IFJlYWN0JFByb3BUeXBlJFByaW1pdGl2ZTxGdW5jdGlvbj4sXG4gICAgICAgIGdldE5lc3RlZENoaWxkU3RhdGU6IFJlYWN0JFByb3BUeXBlJFByaW1pdGl2ZTxGdW5jdGlvbj4sXG4gICAgICAgIHJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogUmVhY3QkUHJvcFR5cGUkUHJpbWl0aXZlPEZ1bmN0aW9uPixcbiAgICAgICAgdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IFJlYWN0JFByb3BUeXBlJFByaW1pdGl2ZTxGdW5jdGlvbj4sXG4gICAgICB8fSA9IHtcbiAgICB2aXJ0dWFsaXplZExpc3Q6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBnZXRTY3JvbGxNZXRyaWNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgIGhvcml6b250YWw6IFByb3BUeXBlcy5ib29sLFxuICAgICAgZ2V0T3V0ZXJtb3N0UGFyZW50TGlzdFJlZjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICBnZXROZXN0ZWRDaGlsZFN0YXRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgIHJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgICB1bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgfSksXG4gIH07XG5cbiAgZ2V0Q2hpbGRDb250ZXh0KCk6IHt8XG4gICAgdmlydHVhbGl6ZWRMaXN0OiB7XG4gICAgICBnZXRTY3JvbGxNZXRyaWNzOiAoKSA9PiB7XG4gICAgICAgIGNvbnRlbnRMZW5ndGg6IG51bWJlcixcbiAgICAgICAgZE9mZnNldDogbnVtYmVyLFxuICAgICAgICBkdDogbnVtYmVyLFxuICAgICAgICBvZmZzZXQ6IG51bWJlcixcbiAgICAgICAgdGltZXN0YW1wOiBudW1iZXIsXG4gICAgICAgIHZlbG9jaXR5OiBudW1iZXIsXG4gICAgICAgIHZpc2libGVMZW5ndGg6IG51bWJlcixcbiAgICAgIH0sXG4gICAgICBob3Jpem9udGFsOiA/Ym9vbGVhbixcbiAgICAgIGdldE91dGVybW9zdFBhcmVudExpc3RSZWY6IEZ1bmN0aW9uLFxuICAgICAgZ2V0TmVzdGVkQ2hpbGRTdGF0ZTogc3RyaW5nID0+ID9DaGlsZExpc3RTdGF0ZSxcbiAgICAgIHJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogKHtcbiAgICAgICAgY2VsbEtleTogc3RyaW5nLFxuICAgICAgICBrZXk6IHN0cmluZyxcbiAgICAgICAgcmVmOiBWaXJ0dWFsaXplZExpc3QsXG4gICAgICB9KSA9PiA/Q2hpbGRMaXN0U3RhdGUsXG4gICAgICB1bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogKHtcbiAgICAgICAga2V5OiBzdHJpbmcsXG4gICAgICAgIHN0YXRlOiBDaGlsZExpc3RTdGF0ZSxcbiAgICAgIH0pID0+IHZvaWQsXG4gICAgfSxcbiAgfH0ge1xuICAgIHJldHVybiB7XG4gICAgICB2aXJ0dWFsaXplZExpc3Q6IHtcbiAgICAgICAgZ2V0U2Nyb2xsTWV0cmljczogdGhpcy5fZ2V0U2Nyb2xsTWV0cmljcyxcbiAgICAgICAgaG9yaXpvbnRhbDogdGhpcy5wcm9wcy5ob3Jpem9udGFsLFxuICAgICAgICBnZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmOiB0aGlzLl9nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmLFxuICAgICAgICBnZXROZXN0ZWRDaGlsZFN0YXRlOiB0aGlzLl9nZXROZXN0ZWRDaGlsZFN0YXRlLFxuICAgICAgICByZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IHRoaXMuX3JlZ2lzdGVyQXNOZXN0ZWRDaGlsZCxcbiAgICAgICAgdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IHRoaXMuX3VucmVnaXN0ZXJBc05lc3RlZENoaWxkLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgX2dldENlbGxLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gKFxuICAgICAgKHRoaXMuY29udGV4dC52aXJ0dWFsaXplZENlbGwgJiYgdGhpcy5jb250ZXh0LnZpcnR1YWxpemVkQ2VsbC5jZWxsS2V5KSB8fFxuICAgICAgJ3Jvb3RMaXN0J1xuICAgICk7XG4gIH1cblxuICBfZ2V0U2Nyb2xsTWV0cmljcyA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWV0cmljcztcbiAgfTtcblxuICBoYXNNb3JlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9oYXNNb3JlO1xuICB9XG5cbiAgX2dldE91dGVybW9zdFBhcmVudExpc3RSZWYgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnZpcnR1YWxpemVkTGlzdC5nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICBfZ2V0TmVzdGVkQ2hpbGRTdGF0ZSA9IChrZXk6IHN0cmluZyk6ID9DaGlsZExpc3RTdGF0ZSA9PiB7XG4gICAgY29uc3QgZXhpc3RpbmdDaGlsZERhdGEgPSB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmdldChrZXkpO1xuICAgIHJldHVybiBleGlzdGluZ0NoaWxkRGF0YSAmJiBleGlzdGluZ0NoaWxkRGF0YS5zdGF0ZTtcbiAgfTtcblxuICBfcmVnaXN0ZXJBc05lc3RlZENoaWxkID0gKGNoaWxkTGlzdDoge1xuICAgIGNlbGxLZXk6IHN0cmluZyxcbiAgICBrZXk6IHN0cmluZyxcbiAgICByZWY6IFZpcnR1YWxpemVkTGlzdCxcbiAgfSk6ID9DaGlsZExpc3RTdGF0ZSA9PiB7XG4gICAgLy8gUmVnaXN0ZXIgdGhlIG1hcHBpbmcgYmV0d2VlbiB0aGlzIGNoaWxkIGtleSBhbmQgdGhlIGNlbGxLZXkgZm9yIGl0cyBjZWxsXG4gICAgY29uc3QgY2hpbGRMaXN0c0luQ2VsbCA9XG4gICAgICB0aGlzLl9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5cy5nZXQoY2hpbGRMaXN0LmNlbGxLZXkpIHx8IG5ldyBTZXQoKTtcbiAgICBjaGlsZExpc3RzSW5DZWxsLmFkZChjaGlsZExpc3Qua2V5KTtcbiAgICB0aGlzLl9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5cy5zZXQoY2hpbGRMaXN0LmNlbGxLZXksIGNoaWxkTGlzdHNJbkNlbGwpO1xuXG4gICAgY29uc3QgZXhpc3RpbmdDaGlsZERhdGEgPSB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmdldChjaGlsZExpc3Qua2V5KTtcbiAgICBpZiAoZXhpc3RpbmdDaGlsZERhdGEgJiYgZXhpc3RpbmdDaGlsZERhdGEucmVmICE9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnQSBWaXJ0dWFsaXplZExpc3QgY29udGFpbnMgYSBjZWxsIHdoaWNoIGl0c2VsZiBjb250YWlucyAnICtcbiAgICAgICAgICAnbW9yZSB0aGFuIG9uZSBWaXJ0dWFsaXplZExpc3Qgb2YgdGhlIHNhbWUgb3JpZW50YXRpb24gYXMgdGhlIHBhcmVudCAnICtcbiAgICAgICAgICAnbGlzdC4gWW91IG11c3QgcGFzcyBhIHVuaXF1ZSBsaXN0S2V5IHByb3AgdG8gZWFjaCBzaWJsaW5nIGxpc3QuJyxcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuc2V0KGNoaWxkTGlzdC5rZXksIHtcbiAgICAgIHJlZjogY2hpbGRMaXN0LnJlZixcbiAgICAgIHN0YXRlOiBudWxsLFxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuX2hhc0ludGVyYWN0ZWQpIHtcbiAgICAgIGNoaWxkTGlzdC5yZWYucmVjb3JkSW50ZXJhY3Rpb24oKTtcbiAgICB9XG4gIH07XG5cbiAgX3VucmVnaXN0ZXJBc05lc3RlZENoaWxkID0gKGNoaWxkTGlzdDoge1xuICAgIGtleTogc3RyaW5nLFxuICAgIHN0YXRlOiBDaGlsZExpc3RTdGF0ZSxcbiAgfSk6IHZvaWQgPT4ge1xuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuc2V0KGNoaWxkTGlzdC5rZXksIHtcbiAgICAgIHJlZjogbnVsbCxcbiAgICAgIHN0YXRlOiBjaGlsZExpc3Quc3RhdGUsXG4gICAgfSk7XG4gIH07XG5cbiAgc3RhdGU6IFN0YXRlO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcywgY29udGV4dDogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMsIGNvbnRleHQpO1xuICAgIGludmFyaWFudChcbiAgICAgICFwcm9wcy5vblNjcm9sbCB8fCAhcHJvcHMub25TY3JvbGwuX19pc05hdGl2ZSxcbiAgICAgICdDb21wb25lbnRzIGJhc2VkIG9uIFZpcnR1YWxpemVkTGlzdCBtdXN0IGJlIHdyYXBwZWQgd2l0aCBBbmltYXRlZC5jcmVhdGVBbmltYXRlZENvbXBvbmVudCAnICtcbiAgICAgICAgJ3RvIHN1cHBvcnQgbmF0aXZlIG9uU2Nyb2xsIGV2ZW50cyB3aXRoIHVzZU5hdGl2ZURyaXZlcicsXG4gICAgKTtcblxuICAgIGludmFyaWFudChcbiAgICAgIHByb3BzLndpbmRvd1NpemUgPiAwLFxuICAgICAgJ1ZpcnR1YWxpemVkTGlzdDogVGhlIHdpbmRvd1NpemUgcHJvcCBtdXN0IGJlIHByZXNlbnQgYW5kIHNldCB0byBhIHZhbHVlIGdyZWF0ZXIgdGhhbiAwLicsXG4gICAgKTtcblxuICAgIHRoaXMuX2ZpbGxSYXRlSGVscGVyID0gbmV3IEZpbGxSYXRlSGVscGVyKHRoaXMuX2dldEZyYW1lTWV0cmljcyk7XG4gICAgdGhpcy5fdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXIgPSBuZXcgQmF0Y2hpbmF0b3IoXG4gICAgICB0aGlzLl91cGRhdGVDZWxsc1RvUmVuZGVyLFxuICAgICAgdGhpcy5wcm9wcy51cGRhdGVDZWxsc0JhdGNoaW5nUGVyaW9kLFxuICAgICk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMpIHtcbiAgICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzID0gdGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMubWFwKFxuICAgICAgICBwYWlyID0+ICh7XG4gICAgICAgICAgdmlld2FiaWxpdHlIZWxwZXI6IG5ldyBWaWV3YWJpbGl0eUhlbHBlcihwYWlyLnZpZXdhYmlsaXR5Q29uZmlnKSxcbiAgICAgICAgICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkOiBwYWlyLm9uVmlld2FibGVJdGVtc0NoYW5nZWQsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCkge1xuICAgICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMucHVzaCh7XG4gICAgICAgIHZpZXdhYmlsaXR5SGVscGVyOiBuZXcgVmlld2FiaWxpdHlIZWxwZXIodGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZyksXG4gICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ6IHRoaXMucHJvcHMub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCBpbml0aWFsU3RhdGUgPSB7XG4gICAgICBmaXJzdDogdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggfHwgMCxcbiAgICAgIGxhc3Q6XG4gICAgICAgIE1hdGgubWluKFxuICAgICAgICAgIHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KHRoaXMucHJvcHMuZGF0YSksXG4gICAgICAgICAgKHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4IHx8IDApICsgdGhpcy5wcm9wcy5pbml0aWFsTnVtVG9SZW5kZXIsXG4gICAgICAgICkgLSAxLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIGNvbnN0IHN0b3JlZFN0YXRlID0gdGhpcy5jb250ZXh0LnZpcnR1YWxpemVkTGlzdC5nZXROZXN0ZWRDaGlsZFN0YXRlKFxuICAgICAgICB0aGlzLnByb3BzLmxpc3RLZXkgfHwgdGhpcy5fZ2V0Q2VsbEtleSgpLFxuICAgICAgKTtcbiAgICAgIGlmIChzdG9yZWRTdGF0ZSkge1xuICAgICAgICBpbml0aWFsU3RhdGUgPSBzdG9yZWRTdGF0ZTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0b3JlZFN0YXRlO1xuICAgICAgICB0aGlzLl9mcmFtZXMgPSBzdG9yZWRTdGF0ZS5mcmFtZXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLl9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKSkge1xuICAgICAgdGhpcy5jb250ZXh0LnZpcnR1YWxpemVkTGlzdC5yZWdpc3RlckFzTmVzdGVkQ2hpbGQoe1xuICAgICAgICBjZWxsS2V5OiB0aGlzLl9nZXRDZWxsS2V5KCksXG4gICAgICAgIGtleTogdGhpcy5wcm9wcy5saXN0S2V5IHx8IHRoaXMuX2dldENlbGxLZXkoKSxcbiAgICAgICAgcmVmOiB0aGlzLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgaWYgKHRoaXMuX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpKSB7XG4gICAgICB0aGlzLmNvbnRleHQudmlydHVhbGl6ZWRMaXN0LnVucmVnaXN0ZXJBc05lc3RlZENoaWxkKHtcbiAgICAgICAga2V5OiB0aGlzLnByb3BzLmxpc3RLZXkgfHwgdGhpcy5fZ2V0Q2VsbEtleSgpLFxuICAgICAgICBzdGF0ZToge1xuICAgICAgICAgIGZpcnN0OiB0aGlzLnN0YXRlLmZpcnN0LFxuICAgICAgICAgIGxhc3Q6IHRoaXMuc3RhdGUubGFzdCxcbiAgICAgICAgICBmcmFtZXM6IHRoaXMuX2ZyYW1lcyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKG51bGwpO1xuICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXJCYXRjaGVyLmRpc3Bvc2Uoe2Fib3J0OiB0cnVlfSk7XG4gICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMuZm9yRWFjaCh0dXBsZSA9PiB7XG4gICAgICB0dXBsZS52aWV3YWJpbGl0eUhlbHBlci5kaXNwb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fZmlsbFJhdGVIZWxwZXIuZGVhY3RpdmF0ZUFuZEZsdXNoKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5ld1Byb3BzOiBQcm9wcywgcHJldlN0YXRlOiBTdGF0ZSk6IFN0YXRlIHtcbiAgICBjb25zdCB7ZGF0YSwgZ2V0SXRlbUNvdW50LCBtYXhUb1JlbmRlclBlckJhdGNofSA9IG5ld1Byb3BzO1xuICAgIC8vIGZpcnN0IGFuZCBsYXN0IGNvdWxkIGJlIHN0YWxlIChlLmcuIGlmIGEgbmV3LCBzaG9ydGVyIGl0ZW1zIHByb3BzIGlzIHBhc3NlZCBpbiksIHNvIHdlIG1ha2VcbiAgICAvLyBzdXJlIHdlJ3JlIHJlbmRlcmluZyBhIHJlYXNvbmFibGUgcmFuZ2UgaGVyZS5cbiAgICByZXR1cm4ge1xuICAgICAgZmlyc3Q6IE1hdGgubWF4KFxuICAgICAgICAwLFxuICAgICAgICBNYXRoLm1pbihwcmV2U3RhdGUuZmlyc3QsIGdldEl0ZW1Db3VudChkYXRhKSAtIDEgLSBtYXhUb1JlbmRlclBlckJhdGNoKSxcbiAgICAgICksXG4gICAgICBsYXN0OiBNYXRoLm1heCgwLCBNYXRoLm1pbihwcmV2U3RhdGUubGFzdCwgZ2V0SXRlbUNvdW50KGRhdGEpIC0gMSkpLFxuICAgIH07XG4gIH1cblxuICBfcHVzaENlbGxzKFxuICAgIGNlbGxzOiBBcnJheTxPYmplY3Q+LFxuICAgIHN0aWNreUhlYWRlckluZGljZXM6IEFycmF5PG51bWJlcj4sXG4gICAgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wczogU2V0PG51bWJlcj4sXG4gICAgZmlyc3Q6IG51bWJlcixcbiAgICBsYXN0OiBudW1iZXIsXG4gICAgaW52ZXJzaW9uU3R5bGU6IFZpZXdTdHlsZVByb3AsXG4gICkge1xuICAgIGNvbnN0IHtcbiAgICAgIENlbGxSZW5kZXJlckNvbXBvbmVudCxcbiAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQsXG4gICAgICBkYXRhLFxuICAgICAgZ2V0SXRlbSxcbiAgICAgIGdldEl0ZW1Db3VudCxcbiAgICAgIGhvcml6b250YWwsXG4gICAgICBrZXlFeHRyYWN0b3IsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qgc3RpY2t5T2Zmc2V0ID0gdGhpcy5wcm9wcy5MaXN0SGVhZGVyQ29tcG9uZW50ID8gMSA6IDA7XG4gICAgY29uc3QgZW5kID0gZ2V0SXRlbUNvdW50KGRhdGEpIC0gMTtcbiAgICBsZXQgcHJldkNlbGxLZXk7XG4gICAgbGFzdCA9IE1hdGgubWluKGVuZCwgbGFzdCk7XG4gICAgZm9yIChsZXQgaWkgPSBmaXJzdDsgaWkgPD0gbGFzdDsgaWkrKykge1xuICAgICAgY29uc3QgaXRlbSA9IGdldEl0ZW0oZGF0YSwgaWkpO1xuICAgICAgY29uc3Qga2V5ID0ga2V5RXh0cmFjdG9yKGl0ZW0sIGlpKTtcbiAgICAgIHRoaXMuX2luZGljZXNUb0tleXMuc2V0KGlpLCBrZXkpO1xuICAgICAgaWYgKHN0aWNreUluZGljZXNGcm9tUHJvcHMuaGFzKGlpICsgc3RpY2t5T2Zmc2V0KSkge1xuICAgICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLnB1c2goY2VsbHMubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgIDxDZWxsUmVuZGVyZXJcbiAgICAgICAgICBDZWxsUmVuZGVyZXJDb21wb25lbnQ9e0NlbGxSZW5kZXJlckNvbXBvbmVudH1cbiAgICAgICAgICBJdGVtU2VwYXJhdG9yQ29tcG9uZW50PXtpaSA8IGVuZCA/IEl0ZW1TZXBhcmF0b3JDb21wb25lbnQgOiB1bmRlZmluZWR9XG4gICAgICAgICAgY2VsbEtleT17a2V5fVxuICAgICAgICAgIGZpbGxSYXRlSGVscGVyPXt0aGlzLl9maWxsUmF0ZUhlbHBlcn1cbiAgICAgICAgICBob3Jpem9udGFsPXtob3Jpem9udGFsfVxuICAgICAgICAgIGluZGV4PXtpaX1cbiAgICAgICAgICBpbnZlcnNpb25TdHlsZT17aW52ZXJzaW9uU3R5bGV9XG4gICAgICAgICAgaXRlbT17aXRlbX1cbiAgICAgICAgICBrZXk9e2tleX1cbiAgICAgICAgICBwcmV2Q2VsbEtleT17cHJldkNlbGxLZXl9XG4gICAgICAgICAgb25VcGRhdGVTZXBhcmF0b3JzPXt0aGlzLl9vblVwZGF0ZVNlcGFyYXRvcnN9XG4gICAgICAgICAgb25MYXlvdXQ9e2UgPT4gdGhpcy5fb25DZWxsTGF5b3V0KGUsIGtleSwgaWkpfVxuICAgICAgICAgIG9uVW5tb3VudD17dGhpcy5fb25DZWxsVW5tb3VudH1cbiAgICAgICAgICBwYXJlbnRQcm9wcz17dGhpcy5wcm9wc31cbiAgICAgICAgICByZWY9e3JlZiA9PiB7XG4gICAgICAgICAgICB0aGlzLl9jZWxsUmVmc1trZXldID0gcmVmO1xuICAgICAgICAgIH19XG4gICAgICAgIC8+LFxuICAgICAgKTtcbiAgICAgIHByZXZDZWxsS2V5ID0ga2V5O1xuICAgIH1cbiAgfVxuXG4gIF9vblVwZGF0ZVNlcGFyYXRvcnMgPSAoa2V5czogQXJyYXk8P3N0cmluZz4sIG5ld1Byb3BzOiBPYmplY3QpID0+IHtcbiAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnN0IHJlZiA9IGtleSAhPSBudWxsICYmIHRoaXMuX2NlbGxSZWZzW2tleV07XG4gICAgICByZWYgJiYgcmVmLnVwZGF0ZVNlcGFyYXRvclByb3BzKG5ld1Byb3BzKTtcbiAgICB9KTtcbiAgfTtcblxuICBfaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRpc2FibGVWaXJ0dWFsaXphdGlvbiB8fCBmYWxzZTtcbiAgfVxuXG4gIF9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKTogYm9vbGVhbiB7XG4gICAgY29uc3QgbmVzdGVkQ29udGV4dCA9IHRoaXMuY29udGV4dC52aXJ0dWFsaXplZExpc3Q7XG4gICAgcmV0dXJuICEhKFxuICAgICAgbmVzdGVkQ29udGV4dCAmJiAhIW5lc3RlZENvbnRleHQuaG9yaXpvbnRhbCA9PT0gISF0aGlzLnByb3BzLmhvcml6b250YWxcbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICBjb25zdCBmbGF0U3R5bGVzID0gZmxhdHRlblN0eWxlKHRoaXMucHJvcHMuY29udGVudENvbnRhaW5lclN0eWxlKTtcbiAgICAgIHdhcm5pbmcoXG4gICAgICAgIGZsYXRTdHlsZXMgPT0gbnVsbCB8fCBmbGF0U3R5bGVzLmZsZXhXcmFwICE9PSAnd3JhcCcsXG4gICAgICAgICdgZmxleFdyYXA6IGB3cmFwYGAgaXMgbm90IHN1cHBvcnRlZCB3aXRoIHRoZSBgVmlydHVhbGl6ZWRMaXN0YCBjb21wb25lbnRzLicgK1xuICAgICAgICAgICdDb25zaWRlciB1c2luZyBgbnVtQ29sdW1uc2Agd2l0aCBgRmxhdExpc3RgIGluc3RlYWQuJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIExpc3RFbXB0eUNvbXBvbmVudCxcbiAgICAgIExpc3RGb290ZXJDb21wb25lbnQsXG4gICAgICBMaXN0SGVhZGVyQ29tcG9uZW50LFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHtkYXRhLCBob3Jpem9udGFsfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkID0gdGhpcy5faXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkKCk7XG4gICAgY29uc3QgaW52ZXJzaW9uU3R5bGUgPSB0aGlzLnByb3BzLmludmVydGVkXG4gICAgICA/IHRoaXMucHJvcHMuaG9yaXpvbnRhbFxuICAgICAgICA/IHN0eWxlcy5ob3Jpem9udGFsbHlJbnZlcnRlZFxuICAgICAgICA6IHN0eWxlcy52ZXJ0aWNhbGx5SW52ZXJ0ZWRcbiAgICAgIDogbnVsbDtcbiAgICBjb25zdCBjZWxscyA9IFtdO1xuICAgIGNvbnN0IHN0aWNreUluZGljZXNGcm9tUHJvcHMgPSBuZXcgU2V0KHRoaXMucHJvcHMuc3RpY2t5SGVhZGVySW5kaWNlcyk7XG4gICAgY29uc3Qgc3RpY2t5SGVhZGVySW5kaWNlcyA9IFtdO1xuICAgIGlmIChMaXN0SGVhZGVyQ29tcG9uZW50KSB7XG4gICAgICBpZiAoc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcy5oYXMoMCkpIHtcbiAgICAgICAgc3RpY2t5SGVhZGVySW5kaWNlcy5wdXNoKDApO1xuICAgICAgfVxuICAgICAgY29uc3QgZWxlbWVudCA9IFJlYWN0LmlzVmFsaWRFbGVtZW50KExpc3RIZWFkZXJDb21wb25lbnQpID8gKFxuICAgICAgICBMaXN0SGVhZGVyQ29tcG9uZW50XG4gICAgICApIDogKFxuICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgIDxMaXN0SGVhZGVyQ29tcG9uZW50IC8+XG4gICAgICApO1xuICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgPFZpcnR1YWxpemVkQ2VsbFdyYXBwZXJcbiAgICAgICAgICBjZWxsS2V5PXt0aGlzLl9nZXRDZWxsS2V5KCkgKyAnLWhlYWRlcid9XG4gICAgICAgICAga2V5PVwiJGhlYWRlclwiPlxuICAgICAgICAgIDxWaWV3XG4gICAgICAgICAgICBvbkxheW91dD17dGhpcy5fb25MYXlvdXRIZWFkZXJ9XG4gICAgICAgICAgICBzdHlsZT17U3R5bGVTaGVldC5jb21wb3NlKFxuICAgICAgICAgICAgICBpbnZlcnNpb25TdHlsZSxcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5MaXN0SGVhZGVyQ29tcG9uZW50U3R5bGUsXG4gICAgICAgICAgICApfT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZSAtIFR5cGluZyBSZWFjdE5hdGl2ZUNvbXBvbmVudCByZXZlYWxlZCBlcnJvcnNcbiAgICAgICAgICAgICAgZWxlbWVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgPC9WaXJ0dWFsaXplZENlbGxXcmFwcGVyPixcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGl0ZW1Db3VudCA9IHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KGRhdGEpO1xuICAgIGlmIChpdGVtQ291bnQgPiAwKSB7XG4gICAgICBfdXNlZEluZGV4Rm9yS2V5ID0gZmFsc2U7XG4gICAgICBfa2V5bGVzc0l0ZW1Db21wb25lbnROYW1lID0gJyc7XG4gICAgICBjb25zdCBzcGFjZXJLZXkgPSAhaG9yaXpvbnRhbCA/ICdoZWlnaHQnIDogJ3dpZHRoJztcbiAgICAgIGNvbnN0IGxhc3RJbml0aWFsSW5kZXggPSB0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleFxuICAgICAgICA/IC0xXG4gICAgICAgIDogdGhpcy5wcm9wcy5pbml0aWFsTnVtVG9SZW5kZXIgLSAxO1xuICAgICAgY29uc3Qge2ZpcnN0LCBsYXN0fSA9IHRoaXMuc3RhdGU7XG4gICAgICB0aGlzLl9wdXNoQ2VsbHMoXG4gICAgICAgIGNlbGxzLFxuICAgICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLFxuICAgICAgICBzdGlja3lJbmRpY2VzRnJvbVByb3BzLFxuICAgICAgICAwLFxuICAgICAgICBsYXN0SW5pdGlhbEluZGV4LFxuICAgICAgICBpbnZlcnNpb25TdHlsZSxcbiAgICAgICk7XG4gICAgICBjb25zdCBmaXJzdEFmdGVySW5pdGlhbCA9IE1hdGgubWF4KGxhc3RJbml0aWFsSW5kZXggKyAxLCBmaXJzdCk7XG4gICAgICBpZiAoIWlzVmlydHVhbGl6YXRpb25EaXNhYmxlZCAmJiBmaXJzdCA+IGxhc3RJbml0aWFsSW5kZXggKyAxKSB7XG4gICAgICAgIGxldCBpbnNlcnRlZFN0aWNreVNwYWNlciA9IGZhbHNlO1xuICAgICAgICBpZiAoc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcy5zaXplID4gMCkge1xuICAgICAgICAgIGNvbnN0IHN0aWNreU9mZnNldCA9IExpc3RIZWFkZXJDb21wb25lbnQgPyAxIDogMDtcbiAgICAgICAgICAvLyBTZWUgaWYgdGhlcmUgYXJlIGFueSBzdGlja3kgaGVhZGVycyBpbiB0aGUgdmlydHVhbGl6ZWQgc3BhY2UgdGhhdCB3ZSBuZWVkIHRvIHJlbmRlci5cbiAgICAgICAgICBmb3IgKGxldCBpaSA9IGZpcnN0QWZ0ZXJJbml0aWFsIC0gMTsgaWkgPiBsYXN0SW5pdGlhbEluZGV4OyBpaS0tKSB7XG4gICAgICAgICAgICBpZiAoc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcy5oYXMoaWkgKyBzdGlja3lPZmZzZXQpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGluaXRCbG9jayA9IHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChsYXN0SW5pdGlhbEluZGV4KTtcbiAgICAgICAgICAgICAgY29uc3Qgc3RpY2t5QmxvY2sgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3goaWkpO1xuICAgICAgICAgICAgICBjb25zdCBsZWFkU3BhY2UgPVxuICAgICAgICAgICAgICAgIHN0aWNreUJsb2NrLm9mZnNldCAtXG4gICAgICAgICAgICAgICAgaW5pdEJsb2NrLm9mZnNldCAtXG4gICAgICAgICAgICAgICAgKHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4ID8gMCA6IGluaXRCbG9jay5sZW5ndGgpO1xuICAgICAgICAgICAgICBjZWxscy5wdXNoKFxuICAgICAgICAgICAgICAgIDxWaWV3IGtleT1cIiRzdGlja3lfbGVhZFwiIHN0eWxlPXt7W3NwYWNlcktleV06IGxlYWRTcGFjZX19IC8+LFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLl9wdXNoQ2VsbHMoXG4gICAgICAgICAgICAgICAgY2VsbHMsXG4gICAgICAgICAgICAgICAgc3RpY2t5SGVhZGVySW5kaWNlcyxcbiAgICAgICAgICAgICAgICBzdGlja3lJbmRpY2VzRnJvbVByb3BzLFxuICAgICAgICAgICAgICAgIGlpLFxuICAgICAgICAgICAgICAgIGlpLFxuICAgICAgICAgICAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBjb25zdCB0cmFpbFNwYWNlID1cbiAgICAgICAgICAgICAgICB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3goZmlyc3QpLm9mZnNldCAtXG4gICAgICAgICAgICAgICAgKHN0aWNreUJsb2NrLm9mZnNldCArIHN0aWNreUJsb2NrLmxlbmd0aCk7XG4gICAgICAgICAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgICAgICAgICAgPFZpZXcga2V5PVwiJHN0aWNreV90cmFpbFwiIHN0eWxlPXt7W3NwYWNlcktleV06IHRyYWlsU3BhY2V9fSAvPixcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaW5zZXJ0ZWRTdGlja3lTcGFjZXIgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnNlcnRlZFN0aWNreVNwYWNlcikge1xuICAgICAgICAgIGNvbnN0IGluaXRCbG9jayA9IHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChsYXN0SW5pdGlhbEluZGV4KTtcbiAgICAgICAgICBjb25zdCBmaXJzdFNwYWNlID1cbiAgICAgICAgICAgIHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChmaXJzdCkub2Zmc2V0IC1cbiAgICAgICAgICAgIChpbml0QmxvY2sub2Zmc2V0ICsgaW5pdEJsb2NrLmxlbmd0aCk7XG4gICAgICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgICAgIDxWaWV3IGtleT1cIiRsZWFkX3NwYWNlclwiIHN0eWxlPXt7W3NwYWNlcktleV06IGZpcnN0U3BhY2V9fSAvPixcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9wdXNoQ2VsbHMoXG4gICAgICAgIGNlbGxzLFxuICAgICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLFxuICAgICAgICBzdGlja3lJbmRpY2VzRnJvbVByb3BzLFxuICAgICAgICBmaXJzdEFmdGVySW5pdGlhbCxcbiAgICAgICAgbGFzdCxcbiAgICAgICAgaW52ZXJzaW9uU3R5bGUsXG4gICAgICApO1xuICAgICAgaWYgKCF0aGlzLl9oYXNXYXJuZWQua2V5cyAmJiBfdXNlZEluZGV4Rm9yS2V5KSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAnVmlydHVhbGl6ZWRMaXN0OiBtaXNzaW5nIGtleXMgZm9yIGl0ZW1zLCBtYWtlIHN1cmUgdG8gc3BlY2lmeSBhIGtleSBvciBpZCBwcm9wZXJ0eSBvbiBlYWNoICcgK1xuICAgICAgICAgICAgJ2l0ZW0gb3IgcHJvdmlkZSBhIGN1c3RvbSBrZXlFeHRyYWN0b3IuJyxcbiAgICAgICAgICBfa2V5bGVzc0l0ZW1Db21wb25lbnROYW1lLFxuICAgICAgICApO1xuICAgICAgICB0aGlzLl9oYXNXYXJuZWQua2V5cyA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoIWlzVmlydHVhbGl6YXRpb25EaXNhYmxlZCAmJiBsYXN0IDwgaXRlbUNvdW50IC0gMSkge1xuICAgICAgICBjb25zdCBsYXN0RnJhbWUgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3gobGFzdCk7XG4gICAgICAgIC8vIFdpdGhvdXQgZ2V0SXRlbUxheW91dCwgd2UgbGltaXQgb3VyIHRhaWwgc3BhY2VyIHRvIHRoZSBfaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCB0b1xuICAgICAgICAvLyBwcmV2ZW50IHRoZSB1c2VyIGZvciBoeXBlcnNjcm9sbGluZyBpbnRvIHVuLW1lYXN1cmVkIGFyZWEgYmVjYXVzZSBvdGhlcndpc2UgY29udGVudCB3aWxsXG4gICAgICAgIC8vIGxpa2VseSBqdW1wIGFyb3VuZCBhcyBpdCByZW5kZXJzIGluIGFib3ZlIHRoZSB2aWV3cG9ydC5cbiAgICAgICAgY29uc3QgZW5kID0gdGhpcy5wcm9wcy5nZXRJdGVtTGF5b3V0XG4gICAgICAgICAgPyBpdGVtQ291bnQgLSAxXG4gICAgICAgICAgOiBNYXRoLm1pbihpdGVtQ291bnQgLSAxLCB0aGlzLl9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4KTtcbiAgICAgICAgY29uc3QgZW5kRnJhbWUgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3goZW5kKTtcbiAgICAgICAgY29uc3QgdGFpbFNwYWNlckxlbmd0aCA9XG4gICAgICAgICAgZW5kRnJhbWUub2Zmc2V0ICtcbiAgICAgICAgICBlbmRGcmFtZS5sZW5ndGggLVxuICAgICAgICAgIChsYXN0RnJhbWUub2Zmc2V0ICsgbGFzdEZyYW1lLmxlbmd0aCk7XG4gICAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgICAgPFZpZXcga2V5PVwiJHRhaWxfc3BhY2VyXCIgc3R5bGU9e3tbc3BhY2VyS2V5XTogdGFpbFNwYWNlckxlbmd0aH19IC8+LFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoTGlzdEVtcHR5Q29tcG9uZW50KSB7XG4gICAgICBjb25zdCBlbGVtZW50OiBSZWFjdC5FbGVtZW50PGFueT4gPSAoKFJlYWN0LmlzVmFsaWRFbGVtZW50KFxuICAgICAgICBMaXN0RW1wdHlDb21wb25lbnQsXG4gICAgICApID8gKFxuICAgICAgICBMaXN0RW1wdHlDb21wb25lbnRcbiAgICAgICkgOiAoXG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgPExpc3RFbXB0eUNvbXBvbmVudCAvPlxuICAgICAgKSk6IGFueSk7XG4gICAgICBjZWxscy5wdXNoKFxuICAgICAgICBSZWFjdC5jbG9uZUVsZW1lbnQoZWxlbWVudCwge1xuICAgICAgICAgIGtleTogJyRlbXB0eScsXG4gICAgICAgICAgb25MYXlvdXQ6IGV2ZW50ID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uTGF5b3V0RW1wdHkoZXZlbnQpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQucHJvcHMub25MYXlvdXQpIHtcbiAgICAgICAgICAgICAgZWxlbWVudC5wcm9wcy5vbkxheW91dChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdHlsZTogU3R5bGVTaGVldC5jb21wb3NlKFxuICAgICAgICAgICAgaW52ZXJzaW9uU3R5bGUsXG4gICAgICAgICAgICBlbGVtZW50LnByb3BzLnN0eWxlLFxuICAgICAgICAgICksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKExpc3RGb290ZXJDb21wb25lbnQpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBSZWFjdC5pc1ZhbGlkRWxlbWVudChMaXN0Rm9vdGVyQ29tcG9uZW50KSA/IChcbiAgICAgICAgTGlzdEZvb3RlckNvbXBvbmVudFxuICAgICAgKSA6IChcbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICA8TGlzdEZvb3RlckNvbXBvbmVudCAvPlxuICAgICAgKTtcbiAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgIDxWaXJ0dWFsaXplZENlbGxXcmFwcGVyXG4gICAgICAgICAgY2VsbEtleT17dGhpcy5fZ2V0Q2VsbEtleSgpICsgJy1mb290ZXInfVxuICAgICAgICAgIGtleT1cIiRmb290ZXJcIj5cbiAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgb25MYXlvdXQ9e3RoaXMuX29uTGF5b3V0Rm9vdGVyfVxuICAgICAgICAgICAgc3R5bGU9e1N0eWxlU2hlZXQuY29tcG9zZShcbiAgICAgICAgICAgICAgaW52ZXJzaW9uU3R5bGUsXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuTGlzdEZvb3RlckNvbXBvbmVudFN0eWxlLFxuICAgICAgICAgICAgKX0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vICRGbG93Rml4TWUgLSBUeXBpbmcgUmVhY3ROYXRpdmVDb21wb25lbnQgcmV2ZWFsZWQgZXJyb3JzXG4gICAgICAgICAgICAgIGVsZW1lbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgIDwvVmlydHVhbGl6ZWRDZWxsV3JhcHBlcj4sXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBzY3JvbGxQcm9wcyA9IHtcbiAgICAgIC4uLnRoaXMucHJvcHMsXG4gICAgICBvbkNvbnRlbnRTaXplQ2hhbmdlOiB0aGlzLl9vbkNvbnRlbnRTaXplQ2hhbmdlLFxuICAgICAgb25MYXlvdXQ6IHRoaXMuX29uTGF5b3V0LFxuICAgICAgb25TY3JvbGw6IHRoaXMuX29uU2Nyb2xsLFxuICAgICAgb25TY3JvbGxCZWdpbkRyYWc6IHRoaXMuX29uU2Nyb2xsQmVnaW5EcmFnLFxuICAgICAgb25TY3JvbGxFbmREcmFnOiB0aGlzLl9vblNjcm9sbEVuZERyYWcsXG4gICAgICBvbk1vbWVudHVtU2Nyb2xsRW5kOiB0aGlzLl9vbk1vbWVudHVtU2Nyb2xsRW5kLFxuICAgICAgc2Nyb2xsRXZlbnRUaHJvdHRsZTogdGhpcy5wcm9wcy5zY3JvbGxFdmVudFRocm90dGxlLCAvLyBUT0RPOiBBbmRyb2lkIHN1cHBvcnRcbiAgICAgIGludmVydFN0aWNreUhlYWRlcnM6XG4gICAgICAgIHRoaXMucHJvcHMuaW52ZXJ0U3RpY2t5SGVhZGVycyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyB0aGlzLnByb3BzLmludmVydFN0aWNreUhlYWRlcnNcbiAgICAgICAgICA6IHRoaXMucHJvcHMuaW52ZXJ0ZWQsXG4gICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLFxuICAgIH07XG4gICAgaWYgKGludmVyc2lvblN0eWxlKSB7XG4gICAgICAvKiAkRmxvd0ZpeE1lKD49MC43MC4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhblxuICAgICAgICogZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjcwIHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciBkZWxldGVcbiAgICAgICAqIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICBzY3JvbGxQcm9wcy5zdHlsZSA9IFtpbnZlcnNpb25TdHlsZSwgdGhpcy5wcm9wcy5zdHlsZV07XG4gICAgfVxuXG4gICAgdGhpcy5faGFzTW9yZSA9XG4gICAgICB0aGlzLnN0YXRlLmxhc3QgPCB0aGlzLnByb3BzLmdldEl0ZW1Db3VudCh0aGlzLnByb3BzLmRhdGEpIC0gMTtcblxuICAgIGNvbnN0IGlubmVyUmV0ID0gUmVhY3QuY2xvbmVFbGVtZW50KFxuICAgICAgKHRoaXMucHJvcHMucmVuZGVyU2Nyb2xsQ29tcG9uZW50IHx8IHRoaXMuX2RlZmF1bHRSZW5kZXJTY3JvbGxDb21wb25lbnQpKFxuICAgICAgICBzY3JvbGxQcm9wcyxcbiAgICAgICksXG4gICAgICB7XG4gICAgICAgIHJlZjogdGhpcy5fY2FwdHVyZVNjcm9sbFJlZixcbiAgICAgIH0sXG4gICAgICBjZWxscyxcbiAgICApO1xuICAgIGxldCByZXQgPSBpbm5lclJldDtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgcmV0ID0gKFxuICAgICAgICA8U2Nyb2xsVmlldy5Db250ZXh0LkNvbnN1bWVyPlxuICAgICAgICAgIHtzY3JvbGxDb250ZXh0ID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgc2Nyb2xsQ29udGV4dCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICFzY3JvbGxDb250ZXh0Lmhvcml6b250YWwgPT09ICF0aGlzLnByb3BzLmhvcml6b250YWwgJiZcbiAgICAgICAgICAgICAgIXRoaXMuX2hhc1dhcm5lZC5uZXN0aW5nICYmXG4gICAgICAgICAgICAgIHRoaXMuY29udGV4dC52aXJ0dWFsaXplZExpc3QgPT0gbnVsbFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIC8vIFRPRE8gKFQ0NjU0NzA0NCk6IHVzZSBSZWFjdC53YXJuIG9uY2UgMTYuOSBpcyBzeW5jJ2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9wdWxsLzE1MTcwXG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAnVmlydHVhbGl6ZWRMaXN0cyBzaG91bGQgbmV2ZXIgYmUgbmVzdGVkIGluc2lkZSBwbGFpbiBTY3JvbGxWaWV3cyB3aXRoIHRoZSBzYW1lICcgK1xuICAgICAgICAgICAgICAgICAgJ29yaWVudGF0aW9uIC0gdXNlIGFub3RoZXIgVmlydHVhbGl6ZWRMaXN0LWJhY2tlZCBjb250YWluZXIgaW5zdGVhZC4nLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLl9oYXNXYXJuZWQubmVzdGluZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJSZXQ7XG4gICAgICAgICAgfX1cbiAgICAgICAgPC9TY3JvbGxWaWV3LkNvbnRleHQuQ29uc3VtZXI+XG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5kZWJ1Zykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5kZWJ1Z30+XG4gICAgICAgICAge3JldH1cbiAgICAgICAgICB7dGhpcy5fcmVuZGVyRGVidWdPdmVybGF5KCl9XG4gICAgICAgIDwvVmlldz5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHMpIHtcbiAgICBjb25zdCB7ZGF0YSwgZXh0cmFEYXRhfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKGRhdGEgIT09IHByZXZQcm9wcy5kYXRhIHx8IGV4dHJhRGF0YSAhPT0gcHJldlByb3BzLmV4dHJhRGF0YSkge1xuICAgICAgdGhpcy5faGFzRGF0YUNoYW5nZWRTaW5jZUVuZFJlYWNoZWQgPSB0cnVlO1xuXG4gICAgICAvLyBjbGVhciB0aGUgdmlld2FibGVJbmRpY2VzIGNhY2hlIHRvIGFsc28gdHJpZ2dlclxuICAgICAgLy8gdGhlIG9uVmlld2FibGVJdGVtc0NoYW5nZWQgY2FsbGJhY2sgd2l0aCB0aGUgbmV3IGRhdGFcbiAgICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzLmZvckVhY2godHVwbGUgPT4ge1xuICAgICAgICB0dXBsZS52aWV3YWJpbGl0eUhlbHBlci5yZXNldFZpZXdhYmxlSW5kaWNlcygpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFRoZSBgdGhpcy5faGlQcmlJblByb2dyZXNzYCBpcyBndWFyYW50ZWVpbmcgYSBoaVByaSBjZWxsIHVwZGF0ZSB3aWxsIG9ubHkgaGFwcGVuXG4gICAgLy8gb25jZSBwZXIgZmliZXIgdXBkYXRlLiBUaGUgYF9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGVgIHdpbGwgc2V0IGl0IHRvIHRydWVcbiAgICAvLyBpZiBhIGhpUHJpIHVwZGF0ZSBuZWVkcyB0byBwZXJmb3JtLiBJZiBgY29tcG9uZW50RGlkVXBkYXRlYCBpcyB0cmlnZ2VyZWQgd2l0aFxuICAgIC8vIGB0aGlzLl9oaVByaUluUHJvZ3Jlc3M9dHJ1ZWAsIG1lYW5zIGl0J3MgdHJpZ2dlcmVkIGJ5IHRoZSBoaVByaSB1cGRhdGUuIFRoZVxuICAgIC8vIGBfc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlYCB3aWxsIGNoZWNrIHRoaXMgY29uZGl0aW9uIGFuZCBub3QgcGVyZm9ybVxuICAgIC8vIGFub3RoZXIgaGlQcmkgdXBkYXRlLlxuICAgIGNvbnN0IGhpUHJpSW5Qcm9ncmVzcyA9IHRoaXMuX2hpUHJpSW5Qcm9ncmVzcztcbiAgICB0aGlzLl9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUoKTtcbiAgICAvLyBNYWtlIHN1cmUgc2V0dGluZyBgdGhpcy5faGlQcmlJblByb2dyZXNzYCBiYWNrIHRvIGZhbHNlIGFmdGVyIGBjb21wb25lbnREaWRVcGRhdGVgXG4gICAgLy8gaXMgdHJpZ2dlcmVkIHdpdGggYHRoaXMuX2hpUHJpSW5Qcm9ncmVzcyA9IHRydWVgXG4gICAgaWYgKGhpUHJpSW5Qcm9ncmVzcykge1xuICAgICAgdGhpcy5faGlQcmlJblByb2dyZXNzID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX2F2ZXJhZ2VDZWxsTGVuZ3RoID0gMDtcbiAgLy8gTWFwcyBhIGNlbGwga2V5IHRvIHRoZSBzZXQgb2Yga2V5cyBmb3IgYWxsIG91dGVybW9zdCBjaGlsZCBsaXN0cyB3aXRoaW4gdGhhdCBjZWxsXG4gIF9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5czogTWFwPHN0cmluZywgU2V0PHN0cmluZz4+ID0gbmV3IE1hcCgpO1xuICBfY2VsbFJlZnMgPSB7fTtcbiAgX2ZpbGxSYXRlSGVscGVyOiBGaWxsUmF0ZUhlbHBlcjtcbiAgX2ZyYW1lcyA9IHt9O1xuICBfZm9vdGVyTGVuZ3RoID0gMDtcbiAgX2hhc0RhdGFDaGFuZ2VkU2luY2VFbmRSZWFjaGVkID0gdHJ1ZTtcbiAgX2hhc0RvbmVJbml0aWFsU2Nyb2xsID0gZmFsc2U7XG4gIF9oYXNJbnRlcmFjdGVkID0gZmFsc2U7XG4gIF9oYXNNb3JlID0gZmFsc2U7XG4gIF9oYXNXYXJuZWQgPSB7fTtcbiAgX2hlYWRlckxlbmd0aCA9IDA7XG4gIF9oaVByaUluUHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZTsgLy8gZmxhZyB0byBwcmV2ZW50IGluZmluaXRlIGhpUHJpIGNlbGwgbGltaXQgdXBkYXRlXG4gIF9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4ID0gMDtcbiAgX2luZGljZXNUb0tleXM6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG4gIF9uZXN0ZWRDaGlsZExpc3RzOiBNYXA8XG4gICAgc3RyaW5nLFxuICAgIHtyZWY6ID9WaXJ0dWFsaXplZExpc3QsIHN0YXRlOiA/Q2hpbGRMaXN0U3RhdGV9LFxuICA+ID0gbmV3IE1hcCgpO1xuICBfb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdDogbnVtYmVyID0gMDtcbiAgX3ByZXZQYXJlbnRPZmZzZXQ6IG51bWJlciA9IDA7XG4gIF9zY3JvbGxNZXRyaWNzID0ge1xuICAgIGNvbnRlbnRMZW5ndGg6IDAsXG4gICAgZE9mZnNldDogMCxcbiAgICBkdDogMTAsXG4gICAgb2Zmc2V0OiAwLFxuICAgIHRpbWVzdGFtcDogMCxcbiAgICB2ZWxvY2l0eTogMCxcbiAgICB2aXNpYmxlTGVuZ3RoOiAwLFxuICB9O1xuICBfc2Nyb2xsUmVmOiA/UmVhY3QuRWxlbWVudFJlZjxhbnk+ID0gbnVsbDtcbiAgX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoID0gMDtcbiAgX3RvdGFsQ2VsbExlbmd0aCA9IDA7XG4gIF90b3RhbENlbGxzTWVhc3VyZWQgPSAwO1xuICBfdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXI6IEJhdGNoaW5hdG9yO1xuICBfdmlld2FiaWxpdHlUdXBsZXM6IEFycmF5PFZpZXdhYmlsaXR5SGVscGVyQ2FsbGJhY2tUdXBsZT4gPSBbXTtcblxuICBfY2FwdHVyZVNjcm9sbFJlZiA9IHJlZiA9PiB7XG4gICAgdGhpcy5fc2Nyb2xsUmVmID0gcmVmO1xuICB9O1xuXG4gIF9jb21wdXRlQmxhbmtuZXNzKCkge1xuICAgIHRoaXMuX2ZpbGxSYXRlSGVscGVyLmNvbXB1dGVCbGFua25lc3MoXG4gICAgICB0aGlzLnByb3BzLFxuICAgICAgdGhpcy5zdGF0ZSxcbiAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MsXG4gICAgKTtcbiAgfVxuXG4gIF9kZWZhdWx0UmVuZGVyU2Nyb2xsQ29tcG9uZW50ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IG9uUmVmcmVzaCA9IHByb3BzLm9uUmVmcmVzaDtcbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIC8vICRGbG93Rml4TWUgLSBUeXBpbmcgUmVhY3ROYXRpdmVDb21wb25lbnQgcmV2ZWFsZWQgZXJyb3JzXG4gICAgICByZXR1cm4gPFZpZXcgey4uLnByb3BzfSAvPjtcbiAgICB9IGVsc2UgaWYgKG9uUmVmcmVzaCkge1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICB0eXBlb2YgcHJvcHMucmVmcmVzaGluZyA9PT0gJ2Jvb2xlYW4nLFxuICAgICAgICAnYHJlZnJlc2hpbmdgIHByb3AgbXVzdCBiZSBzZXQgYXMgYSBib29sZWFuIGluIG9yZGVyIHRvIHVzZSBgb25SZWZyZXNoYCwgYnV0IGdvdCBgJyArXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJvcHMucmVmcmVzaGluZykgK1xuICAgICAgICAgICdgJyxcbiAgICAgICk7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAvLyAkRmxvd0ZpeE1lIEludmFsaWQgcHJvcCB1c2FnZVxuICAgICAgICA8U2Nyb2xsVmlld1xuICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICByZWZyZXNoQ29udHJvbD17XG4gICAgICAgICAgICBwcm9wcy5yZWZyZXNoQ29udHJvbCA9PSBudWxsID8gKFxuICAgICAgICAgICAgICA8UmVmcmVzaENvbnRyb2xcbiAgICAgICAgICAgICAgICByZWZyZXNoaW5nPXtwcm9wcy5yZWZyZXNoaW5nfVxuICAgICAgICAgICAgICAgIG9uUmVmcmVzaD17b25SZWZyZXNofVxuICAgICAgICAgICAgICAgIHByb2dyZXNzVmlld09mZnNldD17cHJvcHMucHJvZ3Jlc3NWaWV3T2Zmc2V0fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgcHJvcHMucmVmcmVzaENvbnRyb2xcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyAkRmxvd0ZpeE1lIEludmFsaWQgcHJvcCB1c2FnZVxuICAgICAgcmV0dXJuIDxTY3JvbGxWaWV3IHsuLi5wcm9wc30gLz47XG4gICAgfVxuICB9O1xuXG4gIF9vbkNlbGxMYXlvdXQoZSwgY2VsbEtleSwgaW5kZXgpIHtcbiAgICBjb25zdCBsYXlvdXQgPSBlLm5hdGl2ZUV2ZW50LmxheW91dDtcbiAgICBjb25zdCBuZXh0ID0ge1xuICAgICAgb2Zmc2V0OiB0aGlzLl9zZWxlY3RPZmZzZXQobGF5b3V0KSxcbiAgICAgIGxlbmd0aDogdGhpcy5fc2VsZWN0TGVuZ3RoKGxheW91dCksXG4gICAgICBpbmRleCxcbiAgICAgIGluTGF5b3V0OiB0cnVlLFxuICAgIH07XG4gICAgY29uc3QgY3VyciA9IHRoaXMuX2ZyYW1lc1tjZWxsS2V5XTtcbiAgICBpZiAoXG4gICAgICAhY3VyciB8fFxuICAgICAgbmV4dC5vZmZzZXQgIT09IGN1cnIub2Zmc2V0IHx8XG4gICAgICBuZXh0Lmxlbmd0aCAhPT0gY3Vyci5sZW5ndGggfHxcbiAgICAgIGluZGV4ICE9PSBjdXJyLmluZGV4XG4gICAgKSB7XG4gICAgICB0aGlzLl90b3RhbENlbGxMZW5ndGggKz0gbmV4dC5sZW5ndGggLSAoY3VyciA/IGN1cnIubGVuZ3RoIDogMCk7XG4gICAgICB0aGlzLl90b3RhbENlbGxzTWVhc3VyZWQgKz0gY3VyciA/IDAgOiAxO1xuICAgICAgdGhpcy5fYXZlcmFnZUNlbGxMZW5ndGggPVxuICAgICAgICB0aGlzLl90b3RhbENlbGxMZW5ndGggLyB0aGlzLl90b3RhbENlbGxzTWVhc3VyZWQ7XG4gICAgICB0aGlzLl9mcmFtZXNbY2VsbEtleV0gPSBuZXh0O1xuICAgICAgdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCA9IE1hdGgubWF4KFxuICAgICAgICB0aGlzLl9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4LFxuICAgICAgICBpbmRleCxcbiAgICAgICk7XG4gICAgICB0aGlzLl9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZnJhbWVzW2NlbGxLZXldLmluTGF5b3V0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGlsZExpc3RLZXlzID0gdGhpcy5fY2VsbEtleXNUb0NoaWxkTGlzdEtleXMuZ2V0KGNlbGxLZXkpO1xuICAgIGlmIChjaGlsZExpc3RLZXlzKSB7XG4gICAgICBmb3IgKGxldCBjaGlsZEtleSBvZiBjaGlsZExpc3RLZXlzKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkTGlzdCA9IHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZ2V0KGNoaWxkS2V5KTtcbiAgICAgICAgY2hpbGRMaXN0ICYmXG4gICAgICAgICAgY2hpbGRMaXN0LnJlZiAmJlxuICAgICAgICAgIGNoaWxkTGlzdC5yZWYubWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2NvbXB1dGVCbGFua25lc3MoKTtcbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKHRoaXMucHJvcHMuZGF0YSk7XG4gIH1cblxuICBfb25DZWxsVW5tb3VudCA9IChjZWxsS2V5OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBjdXJyID0gdGhpcy5fZnJhbWVzW2NlbGxLZXldO1xuICAgIGlmIChjdXJyKSB7XG4gICAgICB0aGlzLl9mcmFtZXNbY2VsbEtleV0gPSB7Li4uY3VyciwgaW5MYXlvdXQ6IGZhbHNlfTtcbiAgICB9XG4gIH07XG5cbiAgbWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCgpOiB2b2lkIHtcbiAgICAvLyBUT0RPIChUMzU1NzQ1MzgpOiBmaW5kTm9kZUhhbmRsZSBzb21ldGltZXMgY3Jhc2hlcyB3aXRoIFwiVW5hYmxlIHRvIGZpbmRcbiAgICAvLyBub2RlIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnRcIiBkdXJpbmcgc2Nyb2xsaW5nXG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5fc2Nyb2xsUmVmKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIFdlIGFyZSBhc3N1bWluZyB0aGF0IGdldE91dGVybW9zdFBhcmVudExpc3RSZWYoKS5nZXRTY3JvbGxSZWYoKVxuICAgICAgLy8gaXMgYSBub24tbnVsbCByZWZlcmVuY2UgdG8gYSBTY3JvbGxWaWV3XG4gICAgICB0aGlzLl9zY3JvbGxSZWYubWVhc3VyZUxheW91dChcbiAgICAgICAgdGhpcy5jb250ZXh0LnZpcnR1YWxpemVkTGlzdFxuICAgICAgICAgIC5nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmKClcbiAgICAgICAgICAuZ2V0U2Nyb2xsUmVmKClcbiAgICAgICAgICAuZ2V0TmF0aXZlU2Nyb2xsUmVmKCksXG4gICAgICAgICh4LCB5LCB3aWR0aCwgaGVpZ2h0KSA9PiB7XG4gICAgICAgICAgdGhpcy5fb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdCA9IHRoaXMuX3NlbGVjdE9mZnNldCh7eCwgeX0pO1xuICAgICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MuY29udGVudExlbmd0aCA9IHRoaXMuX3NlbGVjdExlbmd0aCh7XG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBzY3JvbGxNZXRyaWNzID0gdGhpcy5fY29udmVydFBhcmVudFNjcm9sbE1ldHJpY3MoXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQudmlydHVhbGl6ZWRMaXN0LmdldFNjcm9sbE1ldHJpY3MoKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCA9IHNjcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aDtcbiAgICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLm9mZnNldCA9IHNjcm9sbE1ldHJpY3Mub2Zmc2V0O1xuICAgICAgICB9LFxuICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgXCJWaXJ0dWFsaXplZExpc3Q6IEVuY291bnRlcmVkIGFuIGVycm9yIHdoaWxlIG1lYXN1cmluZyBhIGxpc3Qnc1wiICtcbiAgICAgICAgICAgICAgJyBvZmZzZXQgZnJvbSBpdHMgY29udGFpbmluZyBWaXJ0dWFsaXplZExpc3QuJyxcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnbWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCB0aHJldyBhbiBlcnJvcicsXG4gICAgICAgIGVycm9yLnN0YWNrLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBfb25MYXlvdXQgPSAoZTogT2JqZWN0KSA9PiB7XG4gICAgaWYgKHRoaXMuX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpKSB7XG4gICAgICAvLyBOZWVkIHRvIGFkanVzdCBvdXIgc2Nyb2xsIG1ldHJpY3MgdG8gYmUgcmVsYXRpdmUgdG8gb3VyIGNvbnRhaW5pbmdcbiAgICAgIC8vIFZpcnR1YWxpemVkTGlzdCBiZWZvcmUgd2UgY2FuIG1ha2UgY2xhaW1zIGFib3V0IGxpc3QgaXRlbSB2aWV3YWJpbGl0eVxuICAgICAgdGhpcy5tZWFzdXJlTGF5b3V0UmVsYXRpdmVUb0NvbnRhaW5pbmdMaXN0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCA9IHRoaXMuX3NlbGVjdExlbmd0aChcbiAgICAgICAgZS5uYXRpdmVFdmVudC5sYXlvdXQsXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLm9uTGF5b3V0ICYmIHRoaXMucHJvcHMub25MYXlvdXQoZSk7XG4gICAgdGhpcy5fc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlKCk7XG4gICAgdGhpcy5fbWF5YmVDYWxsT25FbmRSZWFjaGVkKCk7XG4gIH07XG5cbiAgX29uTGF5b3V0RW1wdHkgPSBlID0+IHtcbiAgICB0aGlzLnByb3BzLm9uTGF5b3V0ICYmIHRoaXMucHJvcHMub25MYXlvdXQoZSk7XG4gIH07XG5cbiAgX29uTGF5b3V0Rm9vdGVyID0gZSA9PiB7XG4gICAgdGhpcy5fZm9vdGVyTGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKGUubmF0aXZlRXZlbnQubGF5b3V0KTtcbiAgfTtcblxuICBfb25MYXlvdXRIZWFkZXIgPSBlID0+IHtcbiAgICB0aGlzLl9oZWFkZXJMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoZS5uYXRpdmVFdmVudC5sYXlvdXQpO1xuICB9O1xuXG4gIF9yZW5kZXJEZWJ1Z092ZXJsYXkoKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplID1cbiAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCAvXG4gICAgICAodGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoIHx8IDEpO1xuICAgIGNvbnN0IGZyYW1lc0luTGF5b3V0ID0gW107XG4gICAgY29uc3QgaXRlbUNvdW50ID0gdGhpcy5wcm9wcy5nZXRJdGVtQ291bnQodGhpcy5wcm9wcy5kYXRhKTtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgaXRlbUNvdW50OyBpaSsrKSB7XG4gICAgICBjb25zdCBmcmFtZSA9IHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChpaSk7XG4gICAgICAvKiAkRmxvd0ZpeE1lKD49MC42OC4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhblxuICAgICAgICogZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjY4IHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciBkZWxldGUgdGhpc1xuICAgICAgICogY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICBpZiAoZnJhbWUuaW5MYXlvdXQpIHtcbiAgICAgICAgZnJhbWVzSW5MYXlvdXQucHVzaChmcmFtZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHdpbmRvd1RvcCA9IHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveCh0aGlzLnN0YXRlLmZpcnN0KS5vZmZzZXQ7XG4gICAgY29uc3QgZnJhbWVMYXN0ID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KHRoaXMuc3RhdGUubGFzdCk7XG4gICAgY29uc3Qgd2luZG93TGVuID0gZnJhbWVMYXN0Lm9mZnNldCArIGZyYW1lTGFzdC5sZW5ndGggLSB3aW5kb3dUb3A7XG4gICAgY29uc3QgdmlzVG9wID0gdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQ7XG4gICAgY29uc3QgdmlzTGVuID0gdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLmRlYnVnT3ZlcmxheUJhc2UsIHN0eWxlcy5kZWJ1Z092ZXJsYXldfT5cbiAgICAgICAge2ZyYW1lc0luTGF5b3V0Lm1hcCgoZiwgaWkpID0+IChcbiAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAga2V5PXsnZicgKyBpaX1cbiAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgIHN0eWxlcy5kZWJ1Z092ZXJsYXlCYXNlLFxuICAgICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5RnJhbWUsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b3A6IGYub2Zmc2V0ICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICAgIGhlaWdodDogZi5sZW5ndGggKiBub3JtYWxpemUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdfVxuICAgICAgICAgIC8+XG4gICAgICAgICkpfVxuICAgICAgICA8Vmlld1xuICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5QmFzZSxcbiAgICAgICAgICAgIHN0eWxlcy5kZWJ1Z092ZXJsYXlGcmFtZUxhc3QsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRvcDogd2luZG93VG9wICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHdpbmRvd0xlbiAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgLz5cbiAgICAgICAgPFZpZXdcbiAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgc3R5bGVzLmRlYnVnT3ZlcmxheUJhc2UsXG4gICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5RnJhbWVWaXMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRvcDogdmlzVG9wICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHZpc0xlbiAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgLz5cbiAgICAgIDwvVmlldz5cbiAgICApO1xuICB9XG5cbiAgX3NlbGVjdExlbmd0aChtZXRyaWNzOiAkUmVhZE9ubHk8e2hlaWdodDogbnVtYmVyLCB3aWR0aDogbnVtYmVyfT4pOiBudW1iZXIge1xuICAgIHJldHVybiAhdGhpcy5wcm9wcy5ob3Jpem9udGFsID8gbWV0cmljcy5oZWlnaHQgOiBtZXRyaWNzLndpZHRoO1xuICB9XG5cbiAgX3NlbGVjdE9mZnNldChtZXRyaWNzOiAkUmVhZE9ubHk8e3g6IG51bWJlciwgeTogbnVtYmVyfT4pOiBudW1iZXIge1xuICAgIHJldHVybiAhdGhpcy5wcm9wcy5ob3Jpem9udGFsID8gbWV0cmljcy55IDogbWV0cmljcy54O1xuICB9XG5cbiAgX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBkYXRhLFxuICAgICAgZ2V0SXRlbUNvdW50LFxuICAgICAgb25FbmRSZWFjaGVkLFxuICAgICAgb25FbmRSZWFjaGVkVGhyZXNob2xkLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHtjb250ZW50TGVuZ3RoLCB2aXNpYmxlTGVuZ3RoLCBvZmZzZXR9ID0gdGhpcy5fc2Nyb2xsTWV0cmljcztcbiAgICBjb25zdCBkaXN0YW5jZUZyb21FbmQgPSBjb250ZW50TGVuZ3RoIC0gdmlzaWJsZUxlbmd0aCAtIG9mZnNldDtcbiAgICBpZiAoXG4gICAgICBvbkVuZFJlYWNoZWQgJiZcbiAgICAgIHRoaXMuc3RhdGUubGFzdCA9PT0gZ2V0SXRlbUNvdW50KGRhdGEpIC0gMSAmJlxuICAgICAgLyogJEZsb3dGaXhNZSg+PTAuNjMuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW5cbiAgICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC42MyB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IgZGVsZXRlIHRoaXNcbiAgICAgICAqIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgZGlzdGFuY2VGcm9tRW5kIDwgb25FbmRSZWFjaGVkVGhyZXNob2xkICogdmlzaWJsZUxlbmd0aCAmJlxuICAgICAgKHRoaXMuX2hhc0RhdGFDaGFuZ2VkU2luY2VFbmRSZWFjaGVkIHx8XG4gICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MuY29udGVudExlbmd0aCAhPT0gdGhpcy5fc2VudEVuZEZvckNvbnRlbnRMZW5ndGgpXG4gICAgKSB7XG4gICAgICAvLyBPbmx5IGNhbGwgb25FbmRSZWFjaGVkIG9uY2UgZm9yIGEgZ2l2ZW4gZGF0YXNldCArIGNvbnRlbnQgbGVuZ3RoLlxuICAgICAgdGhpcy5faGFzRGF0YUNoYW5nZWRTaW5jZUVuZFJlYWNoZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoID0gdGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoO1xuICAgICAgb25FbmRSZWFjaGVkKHtkaXN0YW5jZUZyb21FbmR9KTtcbiAgICB9XG4gIH1cblxuICBfb25Db250ZW50U2l6ZUNoYW5nZSA9ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4ge1xuICAgIGlmIChcbiAgICAgIHdpZHRoID4gMCAmJlxuICAgICAgaGVpZ2h0ID4gMCAmJlxuICAgICAgdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggIT0gbnVsbCAmJlxuICAgICAgdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggPiAwICYmXG4gICAgICAhdGhpcy5faGFzRG9uZUluaXRpYWxTY3JvbGxcbiAgICApIHtcbiAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCh7XG4gICAgICAgIGFuaW1hdGVkOiBmYWxzZSxcbiAgICAgICAgaW5kZXg6IHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4LFxuICAgICAgfSk7XG4gICAgICB0aGlzLl9oYXNEb25lSW5pdGlhbFNjcm9sbCA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLm9uQ29udGVudFNpemVDaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25Db250ZW50U2l6ZUNoYW5nZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKHtoZWlnaHQsIHdpZHRofSk7XG4gICAgdGhpcy5fc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlKCk7XG4gICAgdGhpcy5fbWF5YmVDYWxsT25FbmRSZWFjaGVkKCk7XG4gIH07XG5cbiAgLyogVHJhbnNsYXRlcyBtZXRyaWNzIGZyb20gYSBzY3JvbGwgZXZlbnQgaW4gYSBwYXJlbnQgVmlydHVhbGl6ZWRMaXN0IGludG9cbiAgICogY29vcmRpbmF0ZXMgcmVsYXRpdmUgdG8gdGhlIGNoaWxkIGxpc3QuXG4gICAqL1xuICBfY29udmVydFBhcmVudFNjcm9sbE1ldHJpY3MgPSAobWV0cmljczoge1xuICAgIHZpc2libGVMZW5ndGg6IG51bWJlcixcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgfSkgPT4ge1xuICAgIC8vIE9mZnNldCBvZiB0aGUgdG9wIG9mIHRoZSBuZXN0ZWQgbGlzdCByZWxhdGl2ZSB0byB0aGUgdG9wIG9mIGl0cyBwYXJlbnQncyB2aWV3cG9ydFxuICAgIGNvbnN0IG9mZnNldCA9IG1ldHJpY3Mub2Zmc2V0IC0gdGhpcy5fb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdDtcbiAgICAvLyBDaGlsZCdzIHZpc2libGUgbGVuZ3RoIGlzIHRoZSBzYW1lIGFzIGl0cyBwYXJlbnQnc1xuICAgIGNvbnN0IHZpc2libGVMZW5ndGggPSBtZXRyaWNzLnZpc2libGVMZW5ndGg7XG4gICAgY29uc3QgZE9mZnNldCA9IG9mZnNldCAtIHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0O1xuICAgIGNvbnN0IGNvbnRlbnRMZW5ndGggPSB0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGg7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmlzaWJsZUxlbmd0aCxcbiAgICAgIGNvbnRlbnRMZW5ndGgsXG4gICAgICBvZmZzZXQsXG4gICAgICBkT2Zmc2V0LFxuICAgIH07XG4gIH07XG5cbiAgX29uU2Nyb2xsID0gKGU6IE9iamVjdCkgPT4ge1xuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZm9yRWFjaChjaGlsZExpc3QgPT4ge1xuICAgICAgY2hpbGRMaXN0LnJlZiAmJiBjaGlsZExpc3QucmVmLl9vblNjcm9sbChlKTtcbiAgICB9KTtcbiAgICBpZiAodGhpcy5wcm9wcy5vblNjcm9sbCkge1xuICAgICAgdGhpcy5wcm9wcy5vblNjcm9sbChlKTtcbiAgICB9XG4gICAgY29uc3QgdGltZXN0YW1wID0gZS50aW1lU3RhbXA7XG4gICAgbGV0IHZpc2libGVMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoZS5uYXRpdmVFdmVudC5sYXlvdXRNZWFzdXJlbWVudCk7XG4gICAgbGV0IGNvbnRlbnRMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoZS5uYXRpdmVFdmVudC5jb250ZW50U2l6ZSk7XG4gICAgbGV0IG9mZnNldCA9IHRoaXMuX3NlbGVjdE9mZnNldChlLm5hdGl2ZUV2ZW50LmNvbnRlbnRPZmZzZXQpO1xuICAgIGxldCBkT2Zmc2V0ID0gb2Zmc2V0IC0gdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQ7XG5cbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIGlmICh0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gSWdub3JlIHNjcm9sbCBldmVudHMgdW50aWwgb25MYXlvdXQgaGFzIGJlZW4gY2FsbGVkIGFuZCB3ZVxuICAgICAgICAvLyBrbm93IG91ciBvZmZzZXQgZnJvbSBvdXIgb2Zmc2V0IGZyb20gb3VyIHBhcmVudFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAoe1xuICAgICAgICB2aXNpYmxlTGVuZ3RoLFxuICAgICAgICBjb250ZW50TGVuZ3RoLFxuICAgICAgICBvZmZzZXQsXG4gICAgICAgIGRPZmZzZXQsXG4gICAgICB9ID0gdGhpcy5fY29udmVydFBhcmVudFNjcm9sbE1ldHJpY3Moe1xuICAgICAgICB2aXNpYmxlTGVuZ3RoLFxuICAgICAgICBvZmZzZXQsXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgY29uc3QgZHQgPSB0aGlzLl9zY3JvbGxNZXRyaWNzLnRpbWVzdGFtcFxuICAgICAgPyBNYXRoLm1heCgxLCB0aW1lc3RhbXAgLSB0aGlzLl9zY3JvbGxNZXRyaWNzLnRpbWVzdGFtcClcbiAgICAgIDogMTtcbiAgICBjb25zdCB2ZWxvY2l0eSA9IGRPZmZzZXQgLyBkdDtcblxuICAgIGlmIChcbiAgICAgIGR0ID4gNTAwICYmXG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLmR0ID4gNTAwICYmXG4gICAgICBjb250ZW50TGVuZ3RoID4gNSAqIHZpc2libGVMZW5ndGggJiZcbiAgICAgICF0aGlzLl9oYXNXYXJuZWQucGVyZlxuICAgICkge1xuICAgICAgaW5mb0xvZyhcbiAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdDogWW91IGhhdmUgYSBsYXJnZSBsaXN0IHRoYXQgaXMgc2xvdyB0byB1cGRhdGUgLSBtYWtlIHN1cmUgeW91ciAnICtcbiAgICAgICAgICAncmVuZGVySXRlbSBmdW5jdGlvbiByZW5kZXJzIGNvbXBvbmVudHMgdGhhdCBmb2xsb3cgUmVhY3QgcGVyZm9ybWFuY2UgYmVzdCBwcmFjdGljZXMgJyArXG4gICAgICAgICAgJ2xpa2UgUHVyZUNvbXBvbmVudCwgc2hvdWxkQ29tcG9uZW50VXBkYXRlLCBldGMuJyxcbiAgICAgICAge2R0LCBwcmV2RHQ6IHRoaXMuX3Njcm9sbE1ldHJpY3MuZHQsIGNvbnRlbnRMZW5ndGh9LFxuICAgICAgKTtcbiAgICAgIHRoaXMuX2hhc1dhcm5lZC5wZXJmID0gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5fc2Nyb2xsTWV0cmljcyA9IHtcbiAgICAgIGNvbnRlbnRMZW5ndGgsXG4gICAgICBkdCxcbiAgICAgIGRPZmZzZXQsXG4gICAgICBvZmZzZXQsXG4gICAgICB0aW1lc3RhbXAsXG4gICAgICB2ZWxvY2l0eSxcbiAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgfTtcbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKHRoaXMucHJvcHMuZGF0YSk7XG4gICAgaWYgKCF0aGlzLnByb3BzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpO1xuICAgIGlmICh2ZWxvY2l0eSAhPT0gMCkge1xuICAgICAgdGhpcy5fZmlsbFJhdGVIZWxwZXIuYWN0aXZhdGUoKTtcbiAgICB9XG4gICAgdGhpcy5fY29tcHV0ZUJsYW5rbmVzcygpO1xuICAgIHRoaXMuX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSgpO1xuICB9O1xuXG4gIF9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUoKSB7XG4gICAgY29uc3Qge2ZpcnN0LCBsYXN0fSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3Qge29mZnNldCwgdmlzaWJsZUxlbmd0aCwgdmVsb2NpdHl9ID0gdGhpcy5fc2Nyb2xsTWV0cmljcztcbiAgICBjb25zdCBpdGVtQ291bnQgPSB0aGlzLnByb3BzLmdldEl0ZW1Db3VudCh0aGlzLnByb3BzLmRhdGEpO1xuICAgIGxldCBoaVByaSA9IGZhbHNlO1xuICAgIGNvbnN0IHNjcm9sbGluZ1RocmVzaG9sZCA9XG4gICAgICAvKiAkRmxvd0ZpeE1lKD49MC42My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhblxuICAgICAgICogZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjYzIHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciBkZWxldGVcbiAgICAgICAqIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICAodGhpcy5wcm9wcy5vbkVuZFJlYWNoZWRUaHJlc2hvbGQgKiB2aXNpYmxlTGVuZ3RoKSAvIDI7XG4gICAgLy8gTWFyayBhcyBoaWdoIHByaW9yaXR5IGlmIHdlJ3JlIGNsb3NlIHRvIHRoZSBzdGFydCBvZiB0aGUgZmlyc3QgaXRlbVxuICAgIC8vIEJ1dCBvbmx5IGlmIHRoZXJlIGFyZSBpdGVtcyBiZWZvcmUgdGhlIGZpcnN0IHJlbmRlcmVkIGl0ZW1cbiAgICBpZiAoZmlyc3QgPiAwKSB7XG4gICAgICBjb25zdCBkaXN0VG9wID0gb2Zmc2V0IC0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGZpcnN0KS5vZmZzZXQ7XG4gICAgICBoaVByaSA9XG4gICAgICAgIGhpUHJpIHx8IGRpc3RUb3AgPCAwIHx8ICh2ZWxvY2l0eSA8IC0yICYmIGRpc3RUb3AgPCBzY3JvbGxpbmdUaHJlc2hvbGQpO1xuICAgIH1cbiAgICAvLyBNYXJrIGFzIGhpZ2ggcHJpb3JpdHkgaWYgd2UncmUgY2xvc2UgdG8gdGhlIGVuZCBvZiB0aGUgbGFzdCBpdGVtXG4gICAgLy8gQnV0IG9ubHkgaWYgdGhlcmUgYXJlIGl0ZW1zIGFmdGVyIHRoZSBsYXN0IHJlbmRlcmVkIGl0ZW1cbiAgICBpZiAobGFzdCA8IGl0ZW1Db3VudCAtIDEpIHtcbiAgICAgIGNvbnN0IGRpc3RCb3R0b20gPVxuICAgICAgICB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3gobGFzdCkub2Zmc2V0IC0gKG9mZnNldCArIHZpc2libGVMZW5ndGgpO1xuICAgICAgaGlQcmkgPVxuICAgICAgICBoaVByaSB8fFxuICAgICAgICBkaXN0Qm90dG9tIDwgMCB8fFxuICAgICAgICAodmVsb2NpdHkgPiAyICYmIGRpc3RCb3R0b20gPCBzY3JvbGxpbmdUaHJlc2hvbGQpO1xuICAgIH1cbiAgICAvLyBPbmx5IHRyaWdnZXIgaGlnaC1wcmlvcml0eSB1cGRhdGVzIGlmIHdlJ3ZlIGFjdHVhbGx5IHJlbmRlcmVkIGNlbGxzLFxuICAgIC8vIGFuZCB3aXRoIHRoYXQgc2l6ZSBlc3RpbWF0ZSwgYWNjdXJhdGVseSBjb21wdXRlIGhvdyBtYW55IGNlbGxzIHdlIHNob3VsZCByZW5kZXIuXG4gICAgLy8gT3RoZXJ3aXNlLCBpdCB3b3VsZCBqdXN0IHJlbmRlciBhcyBtYW55IGNlbGxzIGFzIGl0IGNhbiAob2YgemVybyBkaW1lbnNpb24pLFxuICAgIC8vIGVhY2ggdGltZSB0aHJvdWdoIGF0dGVtcHRpbmcgdG8gcmVuZGVyIG1vcmUgKGxpbWl0ZWQgYnkgbWF4VG9SZW5kZXJQZXJCYXRjaCksXG4gICAgLy8gc3RhcnZpbmcgdGhlIHJlbmRlcmVyIGZyb20gYWN0dWFsbHkgbGF5aW5nIG91dCB0aGUgb2JqZWN0cyBhbmQgY29tcHV0aW5nIF9hdmVyYWdlQ2VsbExlbmd0aC5cbiAgICAvLyBJZiB0aGlzIGlzIHRyaWdnZXJlZCBpbiBhbiBgY29tcG9uZW50RGlkVXBkYXRlYCBmb2xsb3dlZCBieSBhIGhpUHJpIGNlbGxUb1JlbmRlclVwZGF0ZVxuICAgIC8vIFdlIHNob3VsZG4ndCBkbyBhbm90aGVyIGhpcHJpIGNlbGxUb1JlbmRlclVwZGF0ZVxuICAgIGlmIChcbiAgICAgIGhpUHJpICYmXG4gICAgICAodGhpcy5fYXZlcmFnZUNlbGxMZW5ndGggfHwgdGhpcy5wcm9wcy5nZXRJdGVtTGF5b3V0KSAmJlxuICAgICAgIXRoaXMuX2hpUHJpSW5Qcm9ncmVzc1xuICAgICkge1xuICAgICAgdGhpcy5faGlQcmlJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgIC8vIERvbid0IHdvcnJ5IGFib3V0IGludGVyYWN0aW9ucyB3aGVuIHNjcm9sbGluZyBxdWlja2x5OyBmb2N1cyBvbiBmaWxsaW5nIGNvbnRlbnQgYXMgZmFzdFxuICAgICAgLy8gYXMgcG9zc2libGUuXG4gICAgICB0aGlzLl91cGRhdGVDZWxsc1RvUmVuZGVyQmF0Y2hlci5kaXNwb3NlKHthYm9ydDogdHJ1ZX0pO1xuICAgICAgdGhpcy5fdXBkYXRlQ2VsbHNUb1JlbmRlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl91cGRhdGVDZWxsc1RvUmVuZGVyQmF0Y2hlci5zY2hlZHVsZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9vblNjcm9sbEJlZ2luRHJhZyA9IChlKTogdm9pZCA9PiB7XG4gICAgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5mb3JFYWNoKGNoaWxkTGlzdCA9PiB7XG4gICAgICBjaGlsZExpc3QucmVmICYmIGNoaWxkTGlzdC5yZWYuX29uU2Nyb2xsQmVnaW5EcmFnKGUpO1xuICAgIH0pO1xuICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzLmZvckVhY2godHVwbGUgPT4ge1xuICAgICAgdHVwbGUudmlld2FiaWxpdHlIZWxwZXIucmVjb3JkSW50ZXJhY3Rpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLl9oYXNJbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICB0aGlzLnByb3BzLm9uU2Nyb2xsQmVnaW5EcmFnICYmIHRoaXMucHJvcHMub25TY3JvbGxCZWdpbkRyYWcoZSk7XG4gIH07XG5cbiAgX29uU2Nyb2xsRW5kRHJhZyA9IChlKTogdm9pZCA9PiB7XG4gICAgY29uc3Qge3ZlbG9jaXR5fSA9IGUubmF0aXZlRXZlbnQ7XG4gICAgaWYgKHZlbG9jaXR5KSB7XG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZlbG9jaXR5ID0gdGhpcy5fc2VsZWN0T2Zmc2V0KHZlbG9jaXR5KTtcbiAgICB9XG4gICAgdGhpcy5fY29tcHV0ZUJsYW5rbmVzcygpO1xuICAgIHRoaXMucHJvcHMub25TY3JvbGxFbmREcmFnICYmIHRoaXMucHJvcHMub25TY3JvbGxFbmREcmFnKGUpO1xuICB9O1xuXG4gIF9vbk1vbWVudHVtU2Nyb2xsRW5kID0gKGUpOiB2b2lkID0+IHtcbiAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZlbG9jaXR5ID0gMDtcbiAgICB0aGlzLl9jb21wdXRlQmxhbmtuZXNzKCk7XG4gICAgdGhpcy5wcm9wcy5vbk1vbWVudHVtU2Nyb2xsRW5kICYmIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEVuZChlKTtcbiAgfTtcblxuICBfdXBkYXRlQ2VsbHNUb1JlbmRlciA9ICgpID0+IHtcbiAgICBjb25zdCB7ZGF0YSwgZ2V0SXRlbUNvdW50LCBvbkVuZFJlYWNoZWRUaHJlc2hvbGR9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBpc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQgPSB0aGlzLl9pc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQoKTtcbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKGRhdGEpO1xuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+IHtcbiAgICAgIGxldCBuZXdTdGF0ZTtcbiAgICAgIGlmICghaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkKSB7XG4gICAgICAgIC8vIElmIHdlIHJ1biB0aGlzIHdpdGggYm9ndXMgZGF0YSwgd2UnbGwgZm9yY2UtcmVuZGVyIHdpbmRvdyB7Zmlyc3Q6IDAsIGxhc3Q6IDB9LFxuICAgICAgICAvLyBhbmQgd2lwZSBvdXQgdGhlIGluaXRpYWxOdW1Ub1JlbmRlciByZW5kZXJlZCBlbGVtZW50cy5cbiAgICAgICAgLy8gU28gbGV0J3Mgd2FpdCB1bnRpbCB0aGUgc2Nyb2xsIHZpZXcgbWV0cmljcyBoYXZlIGJlZW4gc2V0IHVwLiBBbmQgdW50aWwgdGhlbixcbiAgICAgICAgLy8gd2Ugd2lsbCB0cnVzdCB0aGUgaW5pdGlhbE51bVRvUmVuZGVyIHN1Z2dlc3Rpb25cbiAgICAgICAgaWYgKHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCkge1xuICAgICAgICAgIC8vIElmIHdlIGhhdmUgYSBub24temVybyBpbml0aWFsU2Nyb2xsSW5kZXggYW5kIHJ1biB0aGlzIGJlZm9yZSB3ZSd2ZSBzY3JvbGxlZCxcbiAgICAgICAgICAvLyB3ZSdsbCB3aXBlIG91dCB0aGUgaW5pdGlhbE51bVRvUmVuZGVyIHJlbmRlcmVkIGVsZW1lbnRzIHN0YXJ0aW5nIGF0IGluaXRpYWxTY3JvbGxJbmRleC5cbiAgICAgICAgICAvLyBTbyBsZXQncyB3YWl0IHVudGlsIHdlJ3ZlIHNjcm9sbGVkIHRoZSB2aWV3IHRvIHRoZSByaWdodCBwbGFjZS4gQW5kIHVudGlsIHRoZW4sXG4gICAgICAgICAgLy8gd2Ugd2lsbCB0cnVzdCB0aGUgaW5pdGlhbFNjcm9sbEluZGV4IHN1Z2dlc3Rpb24uXG4gICAgICAgICAgaWYgKCF0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleCB8fCB0aGlzLl9zY3JvbGxNZXRyaWNzLm9mZnNldCkge1xuICAgICAgICAgICAgbmV3U3RhdGUgPSBjb21wdXRlV2luZG93ZWRSZW5kZXJMaW1pdHMoXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMsXG4gICAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgICB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3gsXG4gICAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qge2NvbnRlbnRMZW5ndGgsIG9mZnNldCwgdmlzaWJsZUxlbmd0aH0gPSB0aGlzLl9zY3JvbGxNZXRyaWNzO1xuICAgICAgICBjb25zdCBkaXN0YW5jZUZyb21FbmQgPSBjb250ZW50TGVuZ3RoIC0gdmlzaWJsZUxlbmd0aCAtIG9mZnNldDtcbiAgICAgICAgY29uc3QgcmVuZGVyQWhlYWQgPVxuICAgICAgICAgIC8qICRGbG93Rml4TWUoPj0wLjYzLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzXG4gICAgICAgICAgICogYW4gZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjYzIHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvclxuICAgICAgICAgICAqIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgICAgIGRpc3RhbmNlRnJvbUVuZCA8IG9uRW5kUmVhY2hlZFRocmVzaG9sZCAqIHZpc2libGVMZW5ndGhcbiAgICAgICAgICAgID8gdGhpcy5wcm9wcy5tYXhUb1JlbmRlclBlckJhdGNoXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIG5ld1N0YXRlID0ge1xuICAgICAgICAgIGZpcnN0OiAwLFxuICAgICAgICAgIGxhc3Q6IE1hdGgubWluKHN0YXRlLmxhc3QgKyByZW5kZXJBaGVhZCwgZ2V0SXRlbUNvdW50KGRhdGEpIC0gMSksXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAobmV3U3RhdGUgJiYgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5zaXplID4gMCkge1xuICAgICAgICBjb25zdCBuZXdGaXJzdCA9IG5ld1N0YXRlLmZpcnN0O1xuICAgICAgICBjb25zdCBuZXdMYXN0ID0gbmV3U3RhdGUubGFzdDtcbiAgICAgICAgLy8gSWYgc29tZSBjZWxsIGluIHRoZSBuZXcgc3RhdGUgaGFzIGEgY2hpbGQgbGlzdCBpbiBpdCwgd2Ugc2hvdWxkIG9ubHkgcmVuZGVyXG4gICAgICAgIC8vIHVwIHRocm91Z2ggdGhhdCBpdGVtLCBzbyB0aGF0IHdlIGdpdmUgdGhhdCBsaXN0IGEgY2hhbmNlIHRvIHJlbmRlci5cbiAgICAgICAgLy8gT3RoZXJ3aXNlIHRoZXJlJ3MgY2h1cm4gZnJvbSBtdWx0aXBsZSBjaGlsZCBsaXN0cyBtb3VudGluZyBhbmQgdW4tbW91bnRpbmdcbiAgICAgICAgLy8gdGhlaXIgaXRlbXMuXG4gICAgICAgIGZvciAobGV0IGlpID0gbmV3Rmlyc3Q7IGlpIDw9IG5ld0xhc3Q7IGlpKyspIHtcbiAgICAgICAgICBjb25zdCBjZWxsS2V5Rm9ySW5kZXggPSB0aGlzLl9pbmRpY2VzVG9LZXlzLmdldChpaSk7XG4gICAgICAgICAgY29uc3QgY2hpbGRMaXN0S2V5cyA9XG4gICAgICAgICAgICBjZWxsS2V5Rm9ySW5kZXggJiZcbiAgICAgICAgICAgIHRoaXMuX2NlbGxLZXlzVG9DaGlsZExpc3RLZXlzLmdldChjZWxsS2V5Rm9ySW5kZXgpO1xuICAgICAgICAgIGlmICghY2hpbGRMaXN0S2V5cykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBzb21lQ2hpbGRIYXNNb3JlID0gZmFsc2U7XG4gICAgICAgICAgLy8gRm9yIGVhY2ggY2VsbCwgbmVlZCB0byBjaGVjayB3aGV0aGVyIGFueSBjaGlsZCBsaXN0IGluIGl0IGhhcyBtb3JlIGVsZW1lbnRzIHRvIHJlbmRlclxuICAgICAgICAgIGZvciAobGV0IGNoaWxkS2V5IG9mIGNoaWxkTGlzdEtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkTGlzdCA9IHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZ2V0KGNoaWxkS2V5KTtcbiAgICAgICAgICAgIGlmIChjaGlsZExpc3QgJiYgY2hpbGRMaXN0LnJlZiAmJiBjaGlsZExpc3QucmVmLmhhc01vcmUoKSkge1xuICAgICAgICAgICAgICBzb21lQ2hpbGRIYXNNb3JlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzb21lQ2hpbGRIYXNNb3JlKSB7XG4gICAgICAgICAgICBuZXdTdGF0ZS5sYXN0ID0gaWk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICB9KTtcbiAgfTtcblxuICBfY3JlYXRlVmlld1Rva2VuID0gKGluZGV4OiBudW1iZXIsIGlzVmlld2FibGU6IGJvb2xlYW4pID0+IHtcbiAgICBjb25zdCB7ZGF0YSwgZ2V0SXRlbSwga2V5RXh0cmFjdG9yfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgaXRlbSA9IGdldEl0ZW0oZGF0YSwgaW5kZXgpO1xuICAgIHJldHVybiB7aW5kZXgsIGl0ZW0sIGtleToga2V5RXh0cmFjdG9yKGl0ZW0sIGluZGV4KSwgaXNWaWV3YWJsZX07XG4gIH07XG5cbiAgX2dldEZyYW1lTWV0cmljc0FwcHJveCA9IChcbiAgICBpbmRleDogbnVtYmVyLFxuICApOiB7bGVuZ3RoOiBudW1iZXIsIG9mZnNldDogbnVtYmVyfSA9PiB7XG4gICAgY29uc3QgZnJhbWUgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3MoaW5kZXgpO1xuICAgIGlmIChmcmFtZSAmJiBmcmFtZS5pbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgIC8vIGNoZWNrIGZvciBpbnZhbGlkIGZyYW1lcyBkdWUgdG8gcm93IHJlLW9yZGVyaW5nXG4gICAgICByZXR1cm4gZnJhbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHtnZXRJdGVtTGF5b3V0fSA9IHRoaXMucHJvcHM7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgICFnZXRJdGVtTGF5b3V0LFxuICAgICAgICAnU2hvdWxkIG5vdCBoYXZlIHRvIGVzdGltYXRlIGZyYW1lcyB3aGVuIGEgbWVhc3VyZW1lbnQgbWV0cmljcyBmdW5jdGlvbiBpcyBwcm92aWRlZCcsXG4gICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGVuZ3RoOiB0aGlzLl9hdmVyYWdlQ2VsbExlbmd0aCxcbiAgICAgICAgb2Zmc2V0OiB0aGlzLl9hdmVyYWdlQ2VsbExlbmd0aCAqIGluZGV4LFxuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgX2dldEZyYW1lTWV0cmljcyA9IChcbiAgICBpbmRleDogbnVtYmVyLFxuICApOiA/e1xuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9mZnNldDogbnVtYmVyLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgaW5MYXlvdXQ/OiBib29sZWFuLFxuICB9ID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBkYXRhLFxuICAgICAgZ2V0SXRlbSxcbiAgICAgIGdldEl0ZW1Db3VudCxcbiAgICAgIGdldEl0ZW1MYXlvdXQsXG4gICAgICBrZXlFeHRyYWN0b3IsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgaW52YXJpYW50KFxuICAgICAgZ2V0SXRlbUNvdW50KGRhdGEpID4gaW5kZXgsXG4gICAgICAnVHJpZWQgdG8gZ2V0IGZyYW1lIGZvciBvdXQgb2YgcmFuZ2UgaW5kZXggJyArIGluZGV4LFxuICAgICk7XG4gICAgY29uc3QgaXRlbSA9IGdldEl0ZW0oZGF0YSwgaW5kZXgpO1xuICAgIGxldCBmcmFtZSA9IGl0ZW0gJiYgdGhpcy5fZnJhbWVzW2tleUV4dHJhY3RvcihpdGVtLCBpbmRleCldO1xuICAgIGlmICghZnJhbWUgfHwgZnJhbWUuaW5kZXggIT09IGluZGV4KSB7XG4gICAgICBpZiAoZ2V0SXRlbUxheW91dCkge1xuICAgICAgICBmcmFtZSA9IGdldEl0ZW1MYXlvdXQoZGF0YSwgaW5kZXgpO1xuICAgICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICAgIGNvbnN0IGZyYW1lVHlwZSA9IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICBsZW5ndGg6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIG9mZnNldDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgaW5kZXg6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICAgICAgICB9KS5pc1JlcXVpcmVkO1xuICAgICAgICAgIFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcyhcbiAgICAgICAgICAgIHtmcmFtZTogZnJhbWVUeXBlfSxcbiAgICAgICAgICAgIHtmcmFtZX0sXG4gICAgICAgICAgICAnZnJhbWUnLFxuICAgICAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdC5nZXRJdGVtTGF5b3V0JyxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qICRGbG93Rml4TWUoPj0wLjYzLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuXG4gICAgICogZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjYzIHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciBkZWxldGUgdGhpc1xuICAgICAqIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgIHJldHVybiBmcmFtZTtcbiAgfTtcblxuICBfdXBkYXRlVmlld2FibGVJdGVtcyhkYXRhOiBhbnkpIHtcbiAgICBjb25zdCB7Z2V0SXRlbUNvdW50fSA9IHRoaXMucHJvcHM7XG5cbiAgICB0aGlzLl92aWV3YWJpbGl0eVR1cGxlcy5mb3JFYWNoKHR1cGxlID0+IHtcbiAgICAgIHR1cGxlLnZpZXdhYmlsaXR5SGVscGVyLm9uVXBkYXRlKFxuICAgICAgICBnZXRJdGVtQ291bnQoZGF0YSksXG4gICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0LFxuICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGgsXG4gICAgICAgIHRoaXMuX2dldEZyYW1lTWV0cmljcyxcbiAgICAgICAgdGhpcy5fY3JlYXRlVmlld1Rva2VuLFxuICAgICAgICB0dXBsZS5vblZpZXdhYmxlSXRlbXNDaGFuZ2VkLFxuICAgICAgICB0aGlzLnN0YXRlLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxufVxuXG50eXBlIENlbGxSZW5kZXJlclByb3BzID0ge1xuICBDZWxsUmVuZGVyZXJDb21wb25lbnQ/OiA/UmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+LFxuICBJdGVtU2VwYXJhdG9yQ29tcG9uZW50OiA/UmVhY3QuQ29tcG9uZW50VHlwZTwqPixcbiAgY2VsbEtleTogc3RyaW5nLFxuICBmaWxsUmF0ZUhlbHBlcjogRmlsbFJhdGVIZWxwZXIsXG4gIGhvcml6b250YWw6ID9ib29sZWFuLFxuICBpbmRleDogbnVtYmVyLFxuICBpbnZlcnNpb25TdHlsZTogVmlld1N0eWxlUHJvcCxcbiAgaXRlbTogSXRlbSxcbiAgb25MYXlvdXQ6IChldmVudDogT2JqZWN0KSA9PiB2b2lkLCAvLyBUaGlzIGlzIGV4dHJhY3RlZCBieSBTY3JvbGxWaWV3U3RpY2t5SGVhZGVyXG4gIG9uVW5tb3VudDogKGNlbGxLZXk6IHN0cmluZykgPT4gdm9pZCxcbiAgb25VcGRhdGVTZXBhcmF0b3JzOiAoY2VsbEtleXM6IEFycmF5PD9zdHJpbmc+LCBwcm9wczogT2JqZWN0KSA9PiB2b2lkLFxuICBwYXJlbnRQcm9wczoge1xuICAgIGdldEl0ZW1MYXlvdXQ/OiA/RnVuY3Rpb24sXG4gICAgcmVuZGVySXRlbT86ID9SZW5kZXJJdGVtVHlwZTxJdGVtPixcbiAgICBMaXN0SXRlbUNvbXBvbmVudD86ID8oUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+IHwgUmVhY3QuRWxlbWVudDxhbnk+KSxcbiAgfSxcbiAgcHJldkNlbGxLZXk6ID9zdHJpbmcsXG59O1xuXG50eXBlIENlbGxSZW5kZXJlclN0YXRlID0ge1xuICBzZXBhcmF0b3JQcm9wczogJFJlYWRPbmx5PHt8XG4gICAgaGlnaGxpZ2h0ZWQ6IGJvb2xlYW4sXG4gICAgbGVhZGluZ0l0ZW06ID9JdGVtLFxuICB8fT4sXG59O1xuXG5jbGFzcyBDZWxsUmVuZGVyZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8XG4gIENlbGxSZW5kZXJlclByb3BzLFxuICBDZWxsUmVuZGVyZXJTdGF0ZSxcbj4ge1xuICBzdGF0ZSA9IHtcbiAgICBzZXBhcmF0b3JQcm9wczoge1xuICAgICAgaGlnaGxpZ2h0ZWQ6IGZhbHNlLFxuICAgICAgbGVhZGluZ0l0ZW06IHRoaXMucHJvcHMuaXRlbSxcbiAgICB9LFxuICB9O1xuXG4gIHN0YXRpYyBjaGlsZENvbnRleHRUeXBlcyA9IHtcbiAgICB2aXJ0dWFsaXplZENlbGw6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBjZWxsS2V5OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIH0pLFxuICB9O1xuXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMoXG4gICAgcHJvcHM6IENlbGxSZW5kZXJlclByb3BzLFxuICAgIHByZXZTdGF0ZTogQ2VsbFJlbmRlcmVyU3RhdGUsXG4gICk6ID9DZWxsUmVuZGVyZXJTdGF0ZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlcGFyYXRvclByb3BzOiB7XG4gICAgICAgIC4uLnByZXZTdGF0ZS5zZXBhcmF0b3JQcm9wcyxcbiAgICAgICAgbGVhZGluZ0l0ZW06IHByb3BzLml0ZW0sXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZpcnR1YWxpemVkQ2VsbDoge1xuICAgICAgICBjZWxsS2V5OiB0aGlzLnByb3BzLmNlbGxLZXksXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBUT0RPOiBjb25zaWRlciBmYWN0b3Jpbmcgc2VwYXJhdG9yIHN0dWZmIG91dCBvZiBWaXJ0dWFsaXplZExpc3QgaW50byBGbGF0TGlzdCBzaW5jZSBpdCdzIG5vdFxuICAvLyByZXVzZWQgYnkgU2VjdGlvbkxpc3QgYW5kIHdlIGNhbiBrZWVwIFZpcnR1YWxpemVkTGlzdCBzaW1wbGVyLlxuICBfc2VwYXJhdG9ycyA9IHtcbiAgICBoaWdobGlnaHQ6ICgpID0+IHtcbiAgICAgIGNvbnN0IHtjZWxsS2V5LCBwcmV2Q2VsbEtleX0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZVNlcGFyYXRvcnMoW2NlbGxLZXksIHByZXZDZWxsS2V5XSwge1xuICAgICAgICBoaWdobGlnaHRlZDogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdW5oaWdobGlnaHQ6ICgpID0+IHtcbiAgICAgIGNvbnN0IHtjZWxsS2V5LCBwcmV2Q2VsbEtleX0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZVNlcGFyYXRvcnMoW2NlbGxLZXksIHByZXZDZWxsS2V5XSwge1xuICAgICAgICBoaWdobGlnaHRlZDogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHVwZGF0ZVByb3BzOiAoc2VsZWN0OiAnbGVhZGluZycgfCAndHJhaWxpbmcnLCBuZXdQcm9wczogT2JqZWN0KSA9PiB7XG4gICAgICBjb25zdCB7Y2VsbEtleSwgcHJldkNlbGxLZXl9ID0gdGhpcy5wcm9wcztcbiAgICAgIHRoaXMucHJvcHMub25VcGRhdGVTZXBhcmF0b3JzKFxuICAgICAgICBbc2VsZWN0ID09PSAnbGVhZGluZycgPyBwcmV2Q2VsbEtleSA6IGNlbGxLZXldLFxuICAgICAgICBuZXdQcm9wcyxcbiAgICAgICk7XG4gICAgfSxcbiAgfTtcblxuICB1cGRhdGVTZXBhcmF0b3JQcm9wcyhuZXdQcm9wczogT2JqZWN0KSB7XG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgc2VwYXJhdG9yUHJvcHM6IHsuLi5zdGF0ZS5zZXBhcmF0b3JQcm9wcywgLi4ubmV3UHJvcHN9LFxuICAgIH0pKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMucHJvcHMub25Vbm1vdW50KHRoaXMucHJvcHMuY2VsbEtleSk7XG4gIH1cblxuICBfcmVuZGVyRWxlbWVudChyZW5kZXJJdGVtLCBMaXN0SXRlbUNvbXBvbmVudCwgaXRlbSwgaW5kZXgpIHtcbiAgICBpZiAocmVuZGVySXRlbSAmJiBMaXN0SXRlbUNvbXBvbmVudCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnVmlydHVhbGl6ZWRMaXN0OiBCb3RoIExpc3RJdGVtQ29tcG9uZW50IGFuZCByZW5kZXJJdGVtIHByb3BzIGFyZSBwcmVzZW50LiBMaXN0SXRlbUNvbXBvbmVudCB3aWxsIHRha2UnICtcbiAgICAgICAgICAnIHByZWNlZGVuY2Ugb3ZlciByZW5kZXJJdGVtLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChMaXN0SXRlbUNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW1Db21wb25lbnQsIHtcbiAgICAgICAgaXRlbSxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHNlcGFyYXRvcnM6IHRoaXMuX3NlcGFyYXRvcnMsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocmVuZGVySXRlbSkge1xuICAgICAgcmV0dXJuIHJlbmRlckl0ZW0oe1xuICAgICAgICBpdGVtLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgc2VwYXJhdG9yczogdGhpcy5fc2VwYXJhdG9ycyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGludmFyaWFudChcbiAgICAgIGZhbHNlLFxuICAgICAgJ1ZpcnR1YWxpemVkTGlzdDogRWl0aGVyIExpc3RJdGVtQ29tcG9uZW50IG9yIHJlbmRlckl0ZW0gcHJvcHMgYXJlIHJlcXVpcmVkIGJ1dCBub25lIHdlcmUgZm91bmQuJyxcbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIENlbGxSZW5kZXJlckNvbXBvbmVudCxcbiAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQsXG4gICAgICBmaWxsUmF0ZUhlbHBlcixcbiAgICAgIGhvcml6b250YWwsXG4gICAgICBpdGVtLFxuICAgICAgaW5kZXgsXG4gICAgICBpbnZlcnNpb25TdHlsZSxcbiAgICAgIHBhcmVudFByb3BzLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHtyZW5kZXJJdGVtLCBnZXRJdGVtTGF5b3V0LCBMaXN0SXRlbUNvbXBvbmVudH0gPSBwYXJlbnRQcm9wcztcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fcmVuZGVyRWxlbWVudChcbiAgICAgIHJlbmRlckl0ZW0sXG4gICAgICBMaXN0SXRlbUNvbXBvbmVudCxcbiAgICAgIGl0ZW0sXG4gICAgICBpbmRleCxcbiAgICApO1xuXG4gICAgY29uc3Qgb25MYXlvdXQgPVxuICAgICAgLyogJEZsb3dGaXhNZSg+PTAuNjguMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW5cbiAgICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC42OCB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IgZGVsZXRlIHRoaXNcbiAgICAgICAqIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgZ2V0SXRlbUxheW91dCAmJiAhcGFyZW50UHJvcHMuZGVidWcgJiYgIWZpbGxSYXRlSGVscGVyLmVuYWJsZWQoKVxuICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICA6IHRoaXMucHJvcHMub25MYXlvdXQ7XG4gICAgLy8gTk9URTogdGhhdCB3aGVuIHRoaXMgaXMgYSBzdGlja3kgaGVhZGVyLCBgb25MYXlvdXRgIHdpbGwgZ2V0IGF1dG9tYXRpY2FsbHkgZXh0cmFjdGVkIGFuZFxuICAgIC8vIGNhbGxlZCBleHBsaWNpdGx5IGJ5IGBTY3JvbGxWaWV3U3RpY2t5SGVhZGVyYC5cbiAgICBjb25zdCBpdGVtU2VwYXJhdG9yID0gSXRlbVNlcGFyYXRvckNvbXBvbmVudCAmJiAoXG4gICAgICA8SXRlbVNlcGFyYXRvckNvbXBvbmVudCB7Li4udGhpcy5zdGF0ZS5zZXBhcmF0b3JQcm9wc30gLz5cbiAgICApO1xuICAgIGNvbnN0IGNlbGxTdHlsZSA9IGludmVyc2lvblN0eWxlXG4gICAgICA/IGhvcml6b250YWxcbiAgICAgICAgPyBbc3R5bGVzLnJvd1JldmVyc2UsIGludmVyc2lvblN0eWxlXVxuICAgICAgICA6IFtzdHlsZXMuY29sdW1uUmV2ZXJzZSwgaW52ZXJzaW9uU3R5bGVdXG4gICAgICA6IGhvcml6b250YWxcbiAgICAgID8gW3N0eWxlcy5yb3csIGludmVyc2lvblN0eWxlXVxuICAgICAgOiBpbnZlcnNpb25TdHlsZTtcbiAgICBpZiAoIUNlbGxSZW5kZXJlckNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgLyogJEZsb3dGaXhNZSg+PTAuODkuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW5cbiAgICAgICAgICogZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjg5IHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciwgZGVsZXRlXG4gICAgICAgICAqIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICAgIDxWaWV3IHN0eWxlPXtjZWxsU3R5bGV9IG9uTGF5b3V0PXtvbkxheW91dH0+XG4gICAgICAgICAge2VsZW1lbnR9XG4gICAgICAgICAge2l0ZW1TZXBhcmF0b3J9XG4gICAgICAgIDwvVmlldz5cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8Q2VsbFJlbmRlcmVyQ29tcG9uZW50XG4gICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICBzdHlsZT17Y2VsbFN0eWxlfVxuICAgICAgICBvbkxheW91dD17b25MYXlvdXR9PlxuICAgICAgICB7ZWxlbWVudH1cbiAgICAgICAge2l0ZW1TZXBhcmF0b3J9XG4gICAgICA8L0NlbGxSZW5kZXJlckNvbXBvbmVudD5cbiAgICApO1xuICB9XG59XG5cbmNsYXNzIFZpcnR1YWxpemVkQ2VsbFdyYXBwZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8e1xuICBjZWxsS2V5OiBzdHJpbmcsXG4gIGNoaWxkcmVuOiBSZWFjdC5Ob2RlLFxufT4ge1xuICBzdGF0aWMgY2hpbGRDb250ZXh0VHlwZXMgPSB7XG4gICAgdmlydHVhbGl6ZWRDZWxsOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgY2VsbEtleTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB9KSxcbiAgfTtcblxuICBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZpcnR1YWxpemVkQ2VsbDoge1xuICAgICAgICBjZWxsS2V5OiB0aGlzLnByb3BzLmNlbGxLZXksXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW47XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICB2ZXJ0aWNhbGx5SW52ZXJ0ZWQ6IHtcbiAgICB0cmFuc2Zvcm06IFt7c2NhbGVZOiAtMX1dLFxuICB9LFxuICBob3Jpem9udGFsbHlJbnZlcnRlZDoge1xuICAgIHRyYW5zZm9ybTogW3tzY2FsZVg6IC0xfV0sXG4gIH0sXG4gIHJvdzoge1xuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICB9LFxuICByb3dSZXZlcnNlOiB7XG4gICAgZmxleERpcmVjdGlvbjogJ3Jvdy1yZXZlcnNlJyxcbiAgfSxcbiAgY29sdW1uUmV2ZXJzZToge1xuICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4tcmV2ZXJzZScsXG4gIH0sXG4gIGRlYnVnOiB7XG4gICAgZmxleDogMSxcbiAgfSxcbiAgZGVidWdPdmVybGF5QmFzZToge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICByaWdodDogMCxcbiAgfSxcbiAgZGVidWdPdmVybGF5OiB7XG4gICAgYm90dG9tOiAwLFxuICAgIHdpZHRoOiAyMCxcbiAgICBib3JkZXJDb2xvcjogJ2JsdWUnLFxuICAgIGJvcmRlcldpZHRoOiAxLFxuICB9LFxuICBkZWJ1Z092ZXJsYXlGcmFtZToge1xuICAgIGxlZnQ6IDAsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnb3JhbmdlJyxcbiAgfSxcbiAgZGVidWdPdmVybGF5RnJhbWVMYXN0OiB7XG4gICAgbGVmdDogMCxcbiAgICBib3JkZXJDb2xvcjogJ2dyZWVuJyxcbiAgICBib3JkZXJXaWR0aDogMixcbiAgfSxcbiAgZGVidWdPdmVybGF5RnJhbWVWaXM6IHtcbiAgICBsZWZ0OiAwLFxuICAgIGJvcmRlckNvbG9yOiAncmVkJyxcbiAgICBib3JkZXJXaWR0aDogMixcbiAgfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZpcnR1YWxpemVkTGlzdDtcbiJdfQ==